"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_pnpm_hashbrownai_core_0_3_0_node_modules_hashbrownai_core_ind-673761"],{

/***/ "(app-pages-browser)/./node_modules/.pnpm/@hashbrownai+core@0.3.0/node_modules/@hashbrownai/core/index.esm3.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@hashbrownai+core@0.3.0/node_modules/@hashbrownai/core/index.esm3.js ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   E: function() { return /* binding */ EvalFlags; },\n/* harmony export */   G: function() { return /* binding */ GetOwnPropertyNamesFlags; },\n/* harmony export */   I: function() { return /* binding */ IsEqualOp; },\n/* harmony export */   J: function() { return /* binding */ JSPromiseStateEnum; },\n/* harmony export */   a: function() { return /* binding */ assertSync; },\n/* harmony export */   b: function() { return /* binding */ IntrinsicsFlags; }\n/* harmony export */ });\nfunction assertSync(fn){return function(...args){let result=fn(...args);if(result&&typeof result==\"object\"&&result instanceof Promise)throw new Error(\"Function unexpectedly returned a Promise\");return result}}var EvalFlags={JS_EVAL_TYPE_GLOBAL:0,JS_EVAL_TYPE_MODULE:1,JS_EVAL_TYPE_DIRECT:2,JS_EVAL_TYPE_INDIRECT:3,JS_EVAL_TYPE_MASK:3,JS_EVAL_FLAG_STRICT:8,JS_EVAL_FLAG_STRIP:16,JS_EVAL_FLAG_COMPILE_ONLY:32,JS_EVAL_FLAG_BACKTRACE_BARRIER:64},IntrinsicsFlags={BaseObjects:1,Date:2,Eval:4,StringNormalize:8,RegExp:16,RegExpCompiler:32,JSON:64,Proxy:128,MapSet:256,TypedArrays:512,Promise:1024,BigInt:2048,BigFloat:4096,BigDecimal:8192,OperatorOverloading:16384,BignumExt:32768},JSPromiseStateEnum={Pending:0,Fulfilled:1,Rejected:2},GetOwnPropertyNamesFlags={JS_GPN_STRING_MASK:1,JS_GPN_SYMBOL_MASK:2,JS_GPN_PRIVATE_MASK:4,JS_GPN_ENUM_ONLY:16,JS_GPN_SET_ENUM:32,QTS_GPN_NUMBER_MASK:64,QTS_STANDARD_COMPLIANT_NUMBER:128},IsEqualOp={IsStrictlyEqual:0,IsSameValue:1,IsSameValueZero:2};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9AaGFzaGJyb3duYWkrY29yZUAwLjMuMC9ub2RlX21vZHVsZXMvQGhhc2hicm93bmFpL2NvcmUvaW5kZXguZXNtMy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSx3QkFBd0IseUJBQXlCLHVCQUF1QiwwSEFBMEgsZUFBZSxlQUFlLHlOQUF5TixrQkFBa0Isd05BQXdOLHFCQUFxQixpQ0FBaUMsMkJBQTJCLGdLQUFnSyxZQUFZOztBQUV2eEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BoYXNoYnJvd25haStjb3JlQDAuMy4wL25vZGVfbW9kdWxlcy9AaGFzaGJyb3duYWkvY29yZS9pbmRleC5lc20zLmpzPzJjYjkiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gYXNzZXJ0U3luYyhmbil7cmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3Mpe2xldCByZXN1bHQ9Zm4oLi4uYXJncyk7aWYocmVzdWx0JiZ0eXBlb2YgcmVzdWx0PT1cIm9iamVjdFwiJiZyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKXRocm93IG5ldyBFcnJvcihcIkZ1bmN0aW9uIHVuZXhwZWN0ZWRseSByZXR1cm5lZCBhIFByb21pc2VcIik7cmV0dXJuIHJlc3VsdH19dmFyIEV2YWxGbGFncz17SlNfRVZBTF9UWVBFX0dMT0JBTDowLEpTX0VWQUxfVFlQRV9NT0RVTEU6MSxKU19FVkFMX1RZUEVfRElSRUNUOjIsSlNfRVZBTF9UWVBFX0lORElSRUNUOjMsSlNfRVZBTF9UWVBFX01BU0s6MyxKU19FVkFMX0ZMQUdfU1RSSUNUOjgsSlNfRVZBTF9GTEFHX1NUUklQOjE2LEpTX0VWQUxfRkxBR19DT01QSUxFX09OTFk6MzIsSlNfRVZBTF9GTEFHX0JBQ0tUUkFDRV9CQVJSSUVSOjY0fSxJbnRyaW5zaWNzRmxhZ3M9e0Jhc2VPYmplY3RzOjEsRGF0ZToyLEV2YWw6NCxTdHJpbmdOb3JtYWxpemU6OCxSZWdFeHA6MTYsUmVnRXhwQ29tcGlsZXI6MzIsSlNPTjo2NCxQcm94eToxMjgsTWFwU2V0OjI1NixUeXBlZEFycmF5czo1MTIsUHJvbWlzZToxMDI0LEJpZ0ludDoyMDQ4LEJpZ0Zsb2F0OjQwOTYsQmlnRGVjaW1hbDo4MTkyLE9wZXJhdG9yT3ZlcmxvYWRpbmc6MTYzODQsQmlnbnVtRXh0OjMyNzY4fSxKU1Byb21pc2VTdGF0ZUVudW09e1BlbmRpbmc6MCxGdWxmaWxsZWQ6MSxSZWplY3RlZDoyfSxHZXRPd25Qcm9wZXJ0eU5hbWVzRmxhZ3M9e0pTX0dQTl9TVFJJTkdfTUFTSzoxLEpTX0dQTl9TWU1CT0xfTUFTSzoyLEpTX0dQTl9QUklWQVRFX01BU0s6NCxKU19HUE5fRU5VTV9PTkxZOjE2LEpTX0dQTl9TRVRfRU5VTTozMixRVFNfR1BOX05VTUJFUl9NQVNLOjY0LFFUU19TVEFOREFSRF9DT01QTElBTlRfTlVNQkVSOjEyOH0sSXNFcXVhbE9wPXtJc1N0cmljdGx5RXF1YWw6MCxJc1NhbWVWYWx1ZToxLElzU2FtZVZhbHVlWmVybzoyfTtcblxuZXhwb3J0IHsgRXZhbEZsYWdzIGFzIEUsIEdldE93blByb3BlcnR5TmFtZXNGbGFncyBhcyBHLCBJc0VxdWFsT3AgYXMgSSwgSlNQcm9taXNlU3RhdGVFbnVtIGFzIEosIGFzc2VydFN5bmMgYXMgYSwgSW50cmluc2ljc0ZsYWdzIGFzIGIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/@hashbrownai+core@0.3.0/node_modules/@hashbrownai/core/index.esm3.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/.pnpm/@hashbrownai+core@0.3.0/node_modules/@hashbrownai/core/index.esm4.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@hashbrownai+core@0.3.0/node_modules/@hashbrownai/core/index.esm4.js ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultIntrinsics: function() { return /* binding */ DefaultIntrinsics; },\n/* harmony export */   DisposableFail: function() { return /* binding */ DisposableFail; },\n/* harmony export */   DisposableResult: function() { return /* binding */ DisposableResult; },\n/* harmony export */   DisposableSuccess: function() { return /* binding */ DisposableSuccess; },\n/* harmony export */   EvalFlags: function() { return /* reexport safe */ _index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.E; },\n/* harmony export */   GetOwnPropertyNamesFlags: function() { return /* reexport safe */ _index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.G; },\n/* harmony export */   IntrinsicsFlags: function() { return /* reexport safe */ _index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.b; },\n/* harmony export */   IsEqualOp: function() { return /* reexport safe */ _index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.I; },\n/* harmony export */   JSPromiseStateEnum: function() { return /* reexport safe */ _index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.J; },\n/* harmony export */   Lifetime: function() { return /* binding */ Lifetime; },\n/* harmony export */   QuickJSAsyncContext: function() { return /* binding */ QuickJSAsyncContext; },\n/* harmony export */   QuickJSAsyncRuntime: function() { return /* binding */ QuickJSAsyncRuntime; },\n/* harmony export */   QuickJSAsyncWASMModule: function() { return /* binding */ QuickJSAsyncWASMModule; },\n/* harmony export */   QuickJSContext: function() { return /* binding */ QuickJSContext; },\n/* harmony export */   QuickJSDeferredPromise: function() { return /* binding */ QuickJSDeferredPromise; },\n/* harmony export */   QuickJSRuntime: function() { return /* binding */ QuickJSRuntime; },\n/* harmony export */   QuickJSWASMModule: function() { return /* binding */ QuickJSWASMModule; },\n/* harmony export */   Scope: function() { return /* binding */ Scope; },\n/* harmony export */   StaticLifetime: function() { return /* binding */ StaticLifetime; },\n/* harmony export */   TestQuickJSWASMModule: function() { return /* binding */ TestQuickJSWASMModule; },\n/* harmony export */   UsingDisposable: function() { return /* binding */ UsingDisposable; },\n/* harmony export */   WeakLifetime: function() { return /* binding */ WeakLifetime; },\n/* harmony export */   assertSync: function() { return /* reexport safe */ _index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.a; },\n/* harmony export */   createDisposableArray: function() { return /* binding */ createDisposableArray; },\n/* harmony export */   debugLog: function() { return /* binding */ debugLog; },\n/* harmony export */   errors: function() { return /* binding */ errors_exports; },\n/* harmony export */   isFail: function() { return /* binding */ isFail; },\n/* harmony export */   isSuccess: function() { return /* binding */ isSuccess; },\n/* harmony export */   memoizePromiseFactory: function() { return /* binding */ memoizePromiseFactory; },\n/* harmony export */   newQuickJSAsyncWASMModuleFromVariant: function() { return /* binding */ newQuickJSAsyncWASMModuleFromVariant; },\n/* harmony export */   newQuickJSWASMModuleFromVariant: function() { return /* binding */ newQuickJSWASMModuleFromVariant; },\n/* harmony export */   newVariant: function() { return /* binding */ newVariant; },\n/* harmony export */   setDebugMode: function() { return /* binding */ setDebugMode; },\n/* harmony export */   shouldInterruptAfterDeadline: function() { return /* binding */ shouldInterruptAfterDeadline; }\n/* harmony export */ });\n/* harmony import */ var _index_esm3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.esm3.js */ \"(app-pages-browser)/./node_modules/.pnpm/@hashbrownai+core@0.3.0/node_modules/@hashbrownai/core/index.esm3.js\");\n\n\n\nvar __defProp=Object.defineProperty;var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0});};var QTS_DEBUG=!1;function setDebugMode(enabled=!0){QTS_DEBUG=enabled;}function debugLog(...args){QTS_DEBUG&&console.log(\"quickjs-emscripten:\",...args);}var errors_exports={};__export(errors_exports,{QuickJSAsyncifyError:()=>QuickJSAsyncifyError,QuickJSAsyncifySuspended:()=>QuickJSAsyncifySuspended,QuickJSEmptyGetOwnPropertyNames:()=>QuickJSEmptyGetOwnPropertyNames,QuickJSEmscriptenModuleError:()=>QuickJSEmscriptenModuleError,QuickJSMemoryLeakDetected:()=>QuickJSMemoryLeakDetected,QuickJSNotImplemented:()=>QuickJSNotImplemented,QuickJSPromisePending:()=>QuickJSPromisePending,QuickJSUnknownIntrinsic:()=>QuickJSUnknownIntrinsic,QuickJSUnwrapError:()=>QuickJSUnwrapError,QuickJSUseAfterFree:()=>QuickJSUseAfterFree,QuickJSWrongOwner:()=>QuickJSWrongOwner});var QuickJSUnwrapError=class extends Error{constructor(cause,context){let message=typeof cause==\"object\"&&cause&&\"message\"in cause?String(cause.message):String(cause);super(message);this.cause=cause;this.context=context;this.name=\"QuickJSUnwrapError\";}},QuickJSWrongOwner=class extends Error{constructor(){super(...arguments);this.name=\"QuickJSWrongOwner\";}},QuickJSUseAfterFree=class extends Error{constructor(){super(...arguments);this.name=\"QuickJSUseAfterFree\";}},QuickJSNotImplemented=class extends Error{constructor(){super(...arguments);this.name=\"QuickJSNotImplemented\";}},QuickJSAsyncifyError=class extends Error{constructor(){super(...arguments);this.name=\"QuickJSAsyncifyError\";}},QuickJSAsyncifySuspended=class extends Error{constructor(){super(...arguments);this.name=\"QuickJSAsyncifySuspended\";}},QuickJSMemoryLeakDetected=class extends Error{constructor(){super(...arguments);this.name=\"QuickJSMemoryLeakDetected\";}},QuickJSEmscriptenModuleError=class extends Error{constructor(){super(...arguments);this.name=\"QuickJSEmscriptenModuleError\";}},QuickJSUnknownIntrinsic=class extends TypeError{constructor(){super(...arguments);this.name=\"QuickJSUnknownIntrinsic\";}},QuickJSPromisePending=class extends Error{constructor(){super(...arguments);this.name=\"QuickJSPromisePending\";}},QuickJSEmptyGetOwnPropertyNames=class extends Error{constructor(){super(...arguments);this.name=\"QuickJSEmptyGetOwnPropertyNames\";}};function*awaitYield(value){return yield value}function awaitYieldOf(generator){return awaitYield(awaitEachYieldedPromise(generator))}var AwaitYield=awaitYield;AwaitYield.of=awaitYieldOf;function maybeAsyncFn(that,fn){return (...args)=>{let generator=fn.call(that,AwaitYield,...args);return awaitEachYieldedPromise(generator)}}function maybeAsync(that,startGenerator){let generator=startGenerator.call(that,AwaitYield);return awaitEachYieldedPromise(generator)}function awaitEachYieldedPromise(gen){function handleNextStep(step){return step.done?step.value:step.value instanceof Promise?step.value.then(value=>handleNextStep(gen.next(value)),error=>handleNextStep(gen.throw(error))):handleNextStep(gen.next(step.value))}return handleNextStep(gen.next())}var UsingDisposable=class{[Symbol.dispose](){return this.dispose()}},SymbolDispose=Symbol.dispose??Symbol.for(\"Symbol.dispose\"),prototypeAsAny=UsingDisposable.prototype;prototypeAsAny[SymbolDispose]||(prototypeAsAny[SymbolDispose]=function(){return this.dispose()});var Lifetime=class _Lifetime extends UsingDisposable{constructor(_value,copier,disposer,_owner){super();this._value=_value;this.copier=copier;this.disposer=disposer;this._owner=_owner;this._alive=!0;this._constructorStack=QTS_DEBUG?new Error(\"Lifetime constructed\").stack:void 0;}get alive(){return this._alive}get value(){return this.assertAlive(),this._value}get owner(){return this._owner}get dupable(){return !!this.copier}dup(){if(this.assertAlive(),!this.copier)throw new Error(\"Non-dupable lifetime\");return new _Lifetime(this.copier(this._value),this.copier,this.disposer,this._owner)}consume(map){this.assertAlive();let result=map(this);return this.dispose(),result}map(map){return this.assertAlive(),map(this)}tap(fn){return fn(this),this}dispose(){this.assertAlive(),this.disposer&&this.disposer(this._value),this._alive=!1;}assertAlive(){if(!this.alive)throw this._constructorStack?new QuickJSUseAfterFree(`Lifetime not alive\n${this._constructorStack}\nLifetime used`):new QuickJSUseAfterFree(\"Lifetime not alive\")}},StaticLifetime=class extends Lifetime{constructor(value,owner){super(value,void 0,void 0,owner);}get dupable(){return !0}dup(){return this}dispose(){}},WeakLifetime=class extends Lifetime{constructor(value,copier,disposer,owner){super(value,copier,disposer,owner);}dispose(){this._alive=!1;}};function scopeFinally(scope,blockError){let disposeError;try{scope.dispose();}catch(error){disposeError=error;}if(blockError&&disposeError)throw Object.assign(blockError,{message:`${blockError.message}\n Then, failed to dispose scope: ${disposeError.message}`,disposeError}),blockError;if(blockError||disposeError)throw blockError||disposeError}var Scope=class _Scope extends UsingDisposable{constructor(){super(...arguments);this._disposables=new Lifetime(new Set);this.manage=lifetime=>(this._disposables.value.add(lifetime),lifetime);}static withScope(block){let scope=new _Scope,blockError;try{return block(scope)}catch(error){throw blockError=error,error}finally{scopeFinally(scope,blockError);}}static withScopeMaybeAsync(_this,block){return maybeAsync(void 0,function*(awaited){let scope=new _Scope,blockError;try{return yield*awaited.of(block.call(_this,awaited,scope))}catch(error){throw blockError=error,error}finally{scopeFinally(scope,blockError);}})}static async withScopeAsync(block){let scope=new _Scope,blockError;try{return await block(scope)}catch(error){throw blockError=error,error}finally{scopeFinally(scope,blockError);}}get alive(){return this._disposables.alive}dispose(){let lifetimes=Array.from(this._disposables.value.values()).reverse();for(let lifetime of lifetimes)lifetime.alive&&lifetime.dispose();this._disposables.dispose();}};function createDisposableArray(items){let array=items?Array.from(items):[];function disposeAlive(){return array.forEach(disposable=>disposable.alive?disposable.dispose():void 0)}function someIsAlive(){return array.some(disposable=>disposable.alive)}return Object.defineProperty(array,SymbolDispose,{configurable:!0,enumerable:!1,value:disposeAlive}),Object.defineProperty(array,\"dispose\",{configurable:!0,enumerable:!1,value:disposeAlive}),Object.defineProperty(array,\"alive\",{configurable:!0,enumerable:!1,get:someIsAlive}),array}function isDisposable(value){return !!(value&&(typeof value==\"object\"||typeof value==\"function\")&&\"alive\"in value&&typeof value.alive==\"boolean\"&&\"dispose\"in value&&typeof value.dispose==\"function\")}var AbstractDisposableResult=class _AbstractDisposableResult extends UsingDisposable{static success(value){return new DisposableSuccess(value)}static fail(error,onUnwrap){return new DisposableFail(error,onUnwrap)}static is(result){return result instanceof _AbstractDisposableResult}},DisposableSuccess=class extends AbstractDisposableResult{constructor(value){super();this.value=value;}get alive(){return isDisposable(this.value)?this.value.alive:!0}dispose(){isDisposable(this.value)&&this.value.dispose();}unwrap(){return this.value}unwrapOr(_fallback){return this.value}},DisposableFail=class extends AbstractDisposableResult{constructor(error,onUnwrap){super();this.error=error;this.onUnwrap=onUnwrap;}get alive(){return isDisposable(this.error)?this.error.alive:!0}dispose(){isDisposable(this.error)&&this.error.dispose();}unwrap(){throw this.onUnwrap(this),this.error}unwrapOr(fallback){return fallback}},DisposableResult=AbstractDisposableResult;var QuickJSDeferredPromise=class extends UsingDisposable{constructor(args){super();this.resolve=value=>{this.resolveHandle.alive&&(this.context.unwrapResult(this.context.callFunction(this.resolveHandle,this.context.undefined,value||this.context.undefined)).dispose(),this.disposeResolvers(),this.onSettled());};this.reject=value=>{this.rejectHandle.alive&&(this.context.unwrapResult(this.context.callFunction(this.rejectHandle,this.context.undefined,value||this.context.undefined)).dispose(),this.disposeResolvers(),this.onSettled());};this.dispose=()=>{this.handle.alive&&this.handle.dispose(),this.disposeResolvers();};this.context=args.context,this.owner=args.context.runtime,this.handle=args.promiseHandle,this.settled=new Promise(resolve=>{this.onSettled=resolve;}),this.resolveHandle=args.resolveHandle,this.rejectHandle=args.rejectHandle;}get alive(){return this.handle.alive||this.resolveHandle.alive||this.rejectHandle.alive}disposeResolvers(){this.resolveHandle.alive&&this.resolveHandle.dispose(),this.rejectHandle.alive&&this.rejectHandle.dispose();}};var ModuleMemory=class{constructor(module){this.module=module;}toPointerArray(handleArray){let typedArray=new Int32Array(handleArray.map(handle=>handle.value)),numBytes=typedArray.length*typedArray.BYTES_PER_ELEMENT,ptr=this.module._malloc(numBytes);return new Uint8Array(this.module.HEAPU8.buffer,ptr,numBytes).set(new Uint8Array(typedArray.buffer)),new Lifetime(ptr,void 0,ptr2=>this.module._free(ptr2))}newTypedArray(kind,length){let zeros=new kind(new Array(length).fill(0)),numBytes=zeros.length*zeros.BYTES_PER_ELEMENT,ptr=this.module._malloc(numBytes),typedArray=new kind(this.module.HEAPU8.buffer,ptr,length);return typedArray.set(zeros),new Lifetime({typedArray,ptr},void 0,value=>this.module._free(value.ptr))}newMutablePointerArray(length){return this.newTypedArray(Int32Array,length)}newHeapCharPointer(string){let strlen=this.module.lengthBytesUTF8(string),dataBytes=strlen+1,ptr=this.module._malloc(dataBytes);return this.module.stringToUTF8(string,ptr,dataBytes),new Lifetime({ptr,strlen},void 0,value=>this.module._free(value.ptr))}newHeapBufferPointer(buffer){let numBytes=buffer.byteLength,ptr=this.module._malloc(numBytes);return this.module.HEAPU8.set(buffer,ptr),new Lifetime({pointer:ptr,numBytes},void 0,value=>this.module._free(value.pointer))}consumeHeapCharPointer(ptr){let str=this.module.UTF8ToString(ptr);return this.module._free(ptr),str}};var DefaultIntrinsics=Object.freeze({BaseObjects:!0,Date:!0,Eval:!0,StringNormalize:!0,RegExp:!0,JSON:!0,Proxy:!0,MapSet:!0,TypedArrays:!0,Promise:!0});function intrinsicsToFlags(intrinsics){if(!intrinsics)return 0;let result=0;for(let[maybeIntrinsicName,enabled]of Object.entries(intrinsics)){if(!(maybeIntrinsicName in _index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.b))throw new QuickJSUnknownIntrinsic(maybeIntrinsicName);enabled&&(result|=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.b[maybeIntrinsicName]);}return result}function evalOptionsToFlags(evalOptions){if(typeof evalOptions==\"number\")return evalOptions;if(evalOptions===void 0)return 0;let{type,strict,strip,compileOnly,backtraceBarrier}=evalOptions,flags=0;return type===\"global\"&&(flags|=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.E.JS_EVAL_TYPE_GLOBAL),type===\"module\"&&(flags|=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.E.JS_EVAL_TYPE_MODULE),strict&&(flags|=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.E.JS_EVAL_FLAG_STRICT),strip&&(flags|=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.E.JS_EVAL_FLAG_STRIP),compileOnly&&(flags|=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.E.JS_EVAL_FLAG_COMPILE_ONLY),backtraceBarrier&&(flags|=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.E.JS_EVAL_FLAG_BACKTRACE_BARRIER),flags}function getOwnPropertyNamesOptionsToFlags(options){if(typeof options==\"number\")return options;if(options===void 0)return 0;let{strings:includeStrings,symbols:includeSymbols,quickjsPrivate:includePrivate,onlyEnumerable,numbers:includeNumbers,numbersAsStrings}=options,flags=0;return includeStrings&&(flags|=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.G.JS_GPN_STRING_MASK),includeSymbols&&(flags|=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.G.JS_GPN_SYMBOL_MASK),includePrivate&&(flags|=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.G.JS_GPN_PRIVATE_MASK),onlyEnumerable&&(flags|=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.G.JS_GPN_ENUM_ONLY),includeNumbers&&(flags|=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.G.QTS_GPN_NUMBER_MASK),numbersAsStrings&&(flags|=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.G.QTS_STANDARD_COMPLIANT_NUMBER),flags}function concat(...values){let result=[];for(let value of values)value!==void 0&&(result=result.concat(value));return result}var QuickJSIterator=class extends UsingDisposable{constructor(handle,context){super();this.handle=handle;this.context=context;this._isDone=!1;this.owner=context.runtime;}[Symbol.iterator](){return this}next(value){if(!this.alive||this._isDone)return {done:!0,value:void 0};let nextMethod=this._next??(this._next=this.context.getProp(this.handle,\"next\"));return this.callIteratorMethod(nextMethod,value)}return(value){if(!this.alive)return {done:!0,value:void 0};let returnMethod=this.context.getProp(this.handle,\"return\");if(returnMethod===this.context.undefined&&value===void 0)return this.dispose(),{done:!0,value:void 0};let result=this.callIteratorMethod(returnMethod,value);return returnMethod.dispose(),this.dispose(),result}throw(e){if(!this.alive)return {done:!0,value:void 0};let errorHandle=e instanceof Lifetime?e:this.context.newError(e),throwMethod=this.context.getProp(this.handle,\"throw\"),result=this.callIteratorMethod(throwMethod,e);return errorHandle.alive&&errorHandle.dispose(),throwMethod.dispose(),this.dispose(),result}get alive(){return this.handle.alive}dispose(){this._isDone=!0,this.handle.dispose(),this._next?.dispose();}callIteratorMethod(method,input){let callResult=input?this.context.callFunction(method,this.handle,input):this.context.callFunction(method,this.handle);if(callResult.error)return this.dispose(),{value:callResult};let done=this.context.getProp(callResult.value,\"done\").consume(v=>this.context.dump(v));if(done)return callResult.value.dispose(),this.dispose(),{done,value:void 0};let value=this.context.getProp(callResult.value,\"value\");return callResult.value.dispose(),{value:DisposableResult.success(value),done}}};var ContextMemory=class extends ModuleMemory{constructor(args){super(args.module);this.scope=new Scope;this.copyJSValue=ptr=>this.ffi.QTS_DupValuePointer(this.ctx.value,ptr);this.freeJSValue=ptr=>{this.ffi.QTS_FreeValuePointer(this.ctx.value,ptr);};args.ownedLifetimes?.forEach(lifetime=>this.scope.manage(lifetime)),this.owner=args.owner,this.module=args.module,this.ffi=args.ffi,this.rt=args.rt,this.ctx=this.scope.manage(args.ctx);}get alive(){return this.scope.alive}dispose(){return this.scope.dispose()}[Symbol.dispose](){return this.dispose()}manage(lifetime){return this.scope.manage(lifetime)}consumeJSCharPointer(ptr){let str=this.module.UTF8ToString(ptr);return this.ffi.QTS_FreeCString(this.ctx.value,ptr),str}heapValueHandle(ptr){return new Lifetime(ptr,this.copyJSValue,this.freeJSValue,this.owner)}staticHeapValueHandle(ptr){return this.manage(this.heapValueHandle(ptr)),new StaticLifetime(ptr,this.owner)}},QuickJSContext=class extends UsingDisposable{constructor(args){super();this._undefined=void 0;this._null=void 0;this._false=void 0;this._true=void 0;this._global=void 0;this._BigInt=void 0;this._Symbol=void 0;this._SymbolIterator=void 0;this._SymbolAsyncIterator=void 0;this.fnNextId=-32768;this.fnMaps=new Map;this.cToHostCallbacks={callFunction:(ctx,this_ptr,argc,argv,fn_id)=>{if(ctx!==this.ctx.value)throw new Error(\"QuickJSContext instance received C -> JS call with mismatched ctx\");let fn=this.getFunction(fn_id);if(!fn)throw new Error(`QuickJSContext had no callback with id ${fn_id}`);return Scope.withScopeMaybeAsync(this,function*(awaited,scope){let thisHandle=scope.manage(new WeakLifetime(this_ptr,this.memory.copyJSValue,this.memory.freeJSValue,this.runtime)),argHandles=new Array(argc);for(let i=0;i<argc;i++){let ptr=this.ffi.QTS_ArgvGetJSValueConstPointer(argv,i);argHandles[i]=scope.manage(new WeakLifetime(ptr,this.memory.copyJSValue,this.memory.freeJSValue,this.runtime));}try{let result=yield*awaited(fn.apply(thisHandle,argHandles));if(result){if(\"error\"in result&&result.error)throw this.runtime.debugLog(\"throw error\",result.error),result.error;let handle=scope.manage(result instanceof Lifetime?result:result.value);return this.ffi.QTS_DupValuePointer(this.ctx.value,handle.value)}return 0}catch(error){return this.errorToHandle(error).consume(errorHandle=>this.ffi.QTS_Throw(this.ctx.value,errorHandle.value))}})}};this.runtime=args.runtime,this.module=args.module,this.ffi=args.ffi,this.rt=args.rt,this.ctx=args.ctx,this.memory=new ContextMemory({...args,owner:this.runtime}),args.callbacks.setContextCallbacks(this.ctx.value,this.cToHostCallbacks),this.dump=this.dump.bind(this),this.getString=this.getString.bind(this),this.getNumber=this.getNumber.bind(this),this.resolvePromise=this.resolvePromise.bind(this),this.uint32Out=this.memory.manage(this.memory.newTypedArray(Uint32Array,1));}get alive(){return this.memory.alive}dispose(){this.memory.dispose();}get undefined(){if(this._undefined)return this._undefined;let ptr=this.ffi.QTS_GetUndefined();return this._undefined=new StaticLifetime(ptr)}get null(){if(this._null)return this._null;let ptr=this.ffi.QTS_GetNull();return this._null=new StaticLifetime(ptr)}get true(){if(this._true)return this._true;let ptr=this.ffi.QTS_GetTrue();return this._true=new StaticLifetime(ptr)}get false(){if(this._false)return this._false;let ptr=this.ffi.QTS_GetFalse();return this._false=new StaticLifetime(ptr)}get global(){if(this._global)return this._global;let ptr=this.ffi.QTS_GetGlobalObject(this.ctx.value);return this._global=this.memory.staticHeapValueHandle(ptr),this._global}newNumber(num){return this.memory.heapValueHandle(this.ffi.QTS_NewFloat64(this.ctx.value,num))}newString(str){let ptr=this.memory.newHeapCharPointer(str).consume(charHandle=>this.ffi.QTS_NewString(this.ctx.value,charHandle.value.ptr));return this.memory.heapValueHandle(ptr)}newUniqueSymbol(description){let key=(typeof description==\"symbol\"?description.description:description)??\"\",ptr=this.memory.newHeapCharPointer(key).consume(charHandle=>this.ffi.QTS_NewSymbol(this.ctx.value,charHandle.value.ptr,0));return this.memory.heapValueHandle(ptr)}newSymbolFor(key){let description=(typeof key==\"symbol\"?key.description:key)??\"\",ptr=this.memory.newHeapCharPointer(description).consume(charHandle=>this.ffi.QTS_NewSymbol(this.ctx.value,charHandle.value.ptr,1));return this.memory.heapValueHandle(ptr)}getWellKnownSymbol(name){return this._Symbol??(this._Symbol=this.memory.manage(this.getProp(this.global,\"Symbol\"))),this.getProp(this._Symbol,name)}newBigInt(num){if(!this._BigInt){let bigIntHandle2=this.getProp(this.global,\"BigInt\");this.memory.manage(bigIntHandle2),this._BigInt=new StaticLifetime(bigIntHandle2.value,this.runtime);}let bigIntHandle=this._BigInt,asString=String(num);return this.newString(asString).consume(handle=>this.unwrapResult(this.callFunction(bigIntHandle,this.undefined,handle)))}newObject(prototype){prototype&&this.runtime.assertOwned(prototype);let ptr=prototype?this.ffi.QTS_NewObjectProto(this.ctx.value,prototype.value):this.ffi.QTS_NewObject(this.ctx.value);return this.memory.heapValueHandle(ptr)}newArray(){let ptr=this.ffi.QTS_NewArray(this.ctx.value);return this.memory.heapValueHandle(ptr)}newArrayBuffer(buffer){let array=new Uint8Array(buffer),handle=this.memory.newHeapBufferPointer(array),ptr=this.ffi.QTS_NewArrayBuffer(this.ctx.value,handle.value.pointer,array.length);return this.memory.heapValueHandle(ptr)}newPromise(value){let deferredPromise=Scope.withScope(scope=>{let mutablePointerArray=scope.manage(this.memory.newMutablePointerArray(2)),promisePtr=this.ffi.QTS_NewPromiseCapability(this.ctx.value,mutablePointerArray.value.ptr),promiseHandle=this.memory.heapValueHandle(promisePtr),[resolveHandle,rejectHandle]=Array.from(mutablePointerArray.value.typedArray).map(jsvaluePtr=>this.memory.heapValueHandle(jsvaluePtr));return new QuickJSDeferredPromise({context:this,promiseHandle,resolveHandle,rejectHandle})});return value&&typeof value==\"function\"&&(value=new Promise(value)),value&&Promise.resolve(value).then(deferredPromise.resolve,error=>error instanceof Lifetime?deferredPromise.reject(error):this.newError(error).consume(deferredPromise.reject)),deferredPromise}newFunction(name,fn){let fnId=++this.fnNextId;return this.setFunction(fnId,fn),this.memory.heapValueHandle(this.ffi.QTS_NewFunction(this.ctx.value,fnId,name))}newError(error){let errorHandle=this.memory.heapValueHandle(this.ffi.QTS_NewError(this.ctx.value));return error&&typeof error==\"object\"?(error.name!==void 0&&this.newString(error.name).consume(handle=>this.setProp(errorHandle,\"name\",handle)),error.message!==void 0&&this.newString(error.message).consume(handle=>this.setProp(errorHandle,\"message\",handle))):typeof error==\"string\"?this.newString(error).consume(handle=>this.setProp(errorHandle,\"message\",handle)):error!==void 0&&this.newString(String(error)).consume(handle=>this.setProp(errorHandle,\"message\",handle)),errorHandle}typeof(handle){return this.runtime.assertOwned(handle),this.memory.consumeHeapCharPointer(this.ffi.QTS_Typeof(this.ctx.value,handle.value))}getNumber(handle){return this.runtime.assertOwned(handle),this.ffi.QTS_GetFloat64(this.ctx.value,handle.value)}getString(handle){return this.runtime.assertOwned(handle),this.memory.consumeJSCharPointer(this.ffi.QTS_GetString(this.ctx.value,handle.value))}getSymbol(handle){this.runtime.assertOwned(handle);let key=this.memory.consumeJSCharPointer(this.ffi.QTS_GetSymbolDescriptionOrKey(this.ctx.value,handle.value));return this.ffi.QTS_IsGlobalSymbol(this.ctx.value,handle.value)?Symbol.for(key):Symbol(key)}getBigInt(handle){this.runtime.assertOwned(handle);let asString=this.getString(handle);return BigInt(asString)}getArrayBuffer(handle){this.runtime.assertOwned(handle);let len=this.ffi.QTS_GetArrayBufferLength(this.ctx.value,handle.value),ptr=this.ffi.QTS_GetArrayBuffer(this.ctx.value,handle.value);if(!ptr)throw new Error(\"Couldn't allocate memory to get ArrayBuffer\");return new Lifetime(this.module.HEAPU8.subarray(ptr,ptr+len),void 0,()=>this.module._free(ptr))}getPromiseState(handle){this.runtime.assertOwned(handle);let state=this.ffi.QTS_PromiseState(this.ctx.value,handle.value);if(state<0)return {type:\"fulfilled\",value:handle,notAPromise:!0};if(state===_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.J.Pending)return {type:\"pending\",get error(){return new QuickJSPromisePending(\"Cannot unwrap a pending promise\")}};let ptr=this.ffi.QTS_PromiseResult(this.ctx.value,handle.value),result=this.memory.heapValueHandle(ptr);if(state===_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.J.Fulfilled)return {type:\"fulfilled\",value:result};if(state===_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.J.Rejected)return {type:\"rejected\",error:result};throw result.dispose(),new Error(`Unknown JSPromiseStateEnum: ${state}`)}resolvePromise(promiseLikeHandle){this.runtime.assertOwned(promiseLikeHandle);let vmResolveResult=Scope.withScope(scope=>{let vmPromise=scope.manage(this.getProp(this.global,\"Promise\")),vmPromiseResolve=scope.manage(this.getProp(vmPromise,\"resolve\"));return this.callFunction(vmPromiseResolve,vmPromise,promiseLikeHandle)});return vmResolveResult.error?Promise.resolve(vmResolveResult):new Promise(resolve=>{Scope.withScope(scope=>{let resolveHandle=scope.manage(this.newFunction(\"resolve\",value=>{resolve(this.success(value&&value.dup()));})),rejectHandle=scope.manage(this.newFunction(\"reject\",error=>{resolve(this.fail(error&&error.dup()));})),promiseHandle=scope.manage(vmResolveResult.value),promiseThenHandle=scope.manage(this.getProp(promiseHandle,\"then\"));this.callFunction(promiseThenHandle,promiseHandle,resolveHandle,rejectHandle).unwrap().dispose();});})}isEqual(a,b,equalityType=_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.I.IsStrictlyEqual){if(a===b)return !0;this.runtime.assertOwned(a),this.runtime.assertOwned(b);let result=this.ffi.QTS_IsEqual(this.ctx.value,a.value,b.value,equalityType);if(result===-1)throw new QuickJSNotImplemented(\"WASM variant does not expose equality\");return !!result}eq(handle,other){return this.isEqual(handle,other,_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.I.IsStrictlyEqual)}sameValue(handle,other){return this.isEqual(handle,other,_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.I.IsSameValue)}sameValueZero(handle,other){return this.isEqual(handle,other,_index_esm3_js__WEBPACK_IMPORTED_MODULE_0__.I.IsSameValueZero)}getProp(handle,key){this.runtime.assertOwned(handle);let ptr;return typeof key==\"number\"&&key>=0?ptr=this.ffi.QTS_GetPropNumber(this.ctx.value,handle.value,key):ptr=this.borrowPropertyKey(key).consume(quickJSKey=>this.ffi.QTS_GetProp(this.ctx.value,handle.value,quickJSKey.value)),this.memory.heapValueHandle(ptr)}getLength(handle){if(this.runtime.assertOwned(handle),!(this.ffi.QTS_GetLength(this.ctx.value,this.uint32Out.value.ptr,handle.value)<0))return this.uint32Out.value.typedArray[0]}getOwnPropertyNames(handle,options={strings:!0,numbersAsStrings:!0}){this.runtime.assertOwned(handle),handle.value;let flags=getOwnPropertyNamesOptionsToFlags(options);if(flags===0)throw new QuickJSEmptyGetOwnPropertyNames(\"No options set, will return an empty array\");return Scope.withScope(scope=>{let outPtr=scope.manage(this.memory.newMutablePointerArray(1)),errorPtr=this.ffi.QTS_GetOwnPropertyNames(this.ctx.value,outPtr.value.ptr,this.uint32Out.value.ptr,handle.value,flags);if(errorPtr)return this.fail(this.memory.heapValueHandle(errorPtr));let len=this.uint32Out.value.typedArray[0],ptr=outPtr.value.typedArray[0],pointerArray=new Uint32Array(this.module.HEAP8.buffer,ptr,len),handles=Array.from(pointerArray).map(ptr2=>this.memory.heapValueHandle(ptr2));return this.ffi.QTS_FreeVoidPointer(this.ctx.value,ptr),this.success(createDisposableArray(handles))})}getIterator(iterableHandle){let SymbolIterator=this._SymbolIterator??(this._SymbolIterator=this.memory.manage(this.getWellKnownSymbol(\"iterator\")));return Scope.withScope(scope=>{let methodHandle=scope.manage(this.getProp(iterableHandle,SymbolIterator)),iteratorCallResult=this.callFunction(methodHandle,iterableHandle);return iteratorCallResult.error?iteratorCallResult:this.success(new QuickJSIterator(iteratorCallResult.value,this))})}setProp(handle,key,value){this.runtime.assertOwned(handle),this.borrowPropertyKey(key).consume(quickJSKey=>this.ffi.QTS_SetProp(this.ctx.value,handle.value,quickJSKey.value,value.value));}defineProp(handle,key,descriptor){this.runtime.assertOwned(handle),Scope.withScope(scope=>{let quickJSKey=scope.manage(this.borrowPropertyKey(key)),value=descriptor.value||this.undefined,configurable=!!descriptor.configurable,enumerable=!!descriptor.enumerable,hasValue=!!descriptor.value,get=descriptor.get?scope.manage(this.newFunction(descriptor.get.name,descriptor.get)):this.undefined,set=descriptor.set?scope.manage(this.newFunction(descriptor.set.name,descriptor.set)):this.undefined;this.ffi.QTS_DefineProp(this.ctx.value,handle.value,quickJSKey.value,value.value,get.value,set.value,configurable,enumerable,hasValue);});}callFunction(func,thisVal,...restArgs){this.runtime.assertOwned(func);let args,firstArg=restArgs[0];firstArg===void 0||Array.isArray(firstArg)?args=firstArg??[]:args=restArgs;let resultPtr=this.memory.toPointerArray(args).consume(argsArrayPtr=>this.ffi.QTS_Call(this.ctx.value,func.value,thisVal.value,args.length,argsArrayPtr.value)),errorPtr=this.ffi.QTS_ResolveException(this.ctx.value,resultPtr);return errorPtr?(this.ffi.QTS_FreeValuePointer(this.ctx.value,resultPtr),this.fail(this.memory.heapValueHandle(errorPtr))):this.success(this.memory.heapValueHandle(resultPtr))}callMethod(thisHandle,key,args=[]){return this.getProp(thisHandle,key).consume(func=>this.callFunction(func,thisHandle,args))}evalCode(code,filename=\"eval.js\",options){let detectModule=options===void 0?1:0,flags=evalOptionsToFlags(options),resultPtr=this.memory.newHeapCharPointer(code).consume(charHandle=>this.ffi.QTS_Eval(this.ctx.value,charHandle.value.ptr,charHandle.value.strlen,filename,detectModule,flags)),errorPtr=this.ffi.QTS_ResolveException(this.ctx.value,resultPtr);return errorPtr?(this.ffi.QTS_FreeValuePointer(this.ctx.value,resultPtr),this.fail(this.memory.heapValueHandle(errorPtr))):this.success(this.memory.heapValueHandle(resultPtr))}throw(error){return this.errorToHandle(error).consume(handle=>this.ffi.QTS_Throw(this.ctx.value,handle.value))}borrowPropertyKey(key){return typeof key==\"number\"?this.newNumber(key):typeof key==\"string\"?this.newString(key):new StaticLifetime(key.value,this.runtime)}getMemory(rt){if(rt===this.rt.value)return this.memory;throw new Error(\"Private API. Cannot get memory from a different runtime\")}dump(handle){this.runtime.assertOwned(handle);let type=this.typeof(handle);if(type===\"string\")return this.getString(handle);if(type===\"number\")return this.getNumber(handle);if(type===\"bigint\")return this.getBigInt(handle);if(type===\"undefined\")return;if(type===\"symbol\")return this.getSymbol(handle);let asPromiseState=this.getPromiseState(handle);if(asPromiseState.type===\"fulfilled\"&&!asPromiseState.notAPromise)return handle.dispose(),{type:asPromiseState.type,value:asPromiseState.value.consume(this.dump)};if(asPromiseState.type===\"pending\")return handle.dispose(),{type:asPromiseState.type};if(asPromiseState.type===\"rejected\")return handle.dispose(),{type:asPromiseState.type,error:asPromiseState.error.consume(this.dump)};let str=this.memory.consumeJSCharPointer(this.ffi.QTS_Dump(this.ctx.value,handle.value));try{return JSON.parse(str)}catch{return str}}unwrapResult(result){if(result.error){let context=\"context\"in result.error?result.error.context:this,cause=result.error.consume(error=>this.dump(error));if(cause&&typeof cause==\"object\"&&typeof cause.message==\"string\"){let{message,name,stack,...rest}=cause,exception=new QuickJSUnwrapError(cause,context);typeof name==\"string\"&&(exception.name=cause.name),exception.message=message;let hostStack=exception.stack;throw typeof stack==\"string\"&&(exception.stack=`${name}: ${message}\n${cause.stack}Host: ${hostStack}`),Object.assign(exception,rest),exception}throw new QuickJSUnwrapError(cause)}return result.value}[Symbol.for(\"nodejs.util.inspect.custom\")](){return this.alive?`${this.constructor.name} { ctx: ${this.ctx.value} rt: ${this.rt.value} }`:`${this.constructor.name} { disposed }`}getFunction(fn_id){let map_id=fn_id>>8,fnMap=this.fnMaps.get(map_id);if(fnMap)return fnMap.get(fn_id)}setFunction(fn_id,handle){let map_id=fn_id>>8,fnMap=this.fnMaps.get(map_id);return fnMap||(fnMap=new Map,this.fnMaps.set(map_id,fnMap)),fnMap.set(fn_id,handle)}errorToHandle(error){return error instanceof Lifetime?error:this.newError(error)}encodeBinaryJSON(handle){let ptr=this.ffi.QTS_bjson_encode(this.ctx.value,handle.value);return this.memory.heapValueHandle(ptr)}decodeBinaryJSON(handle){let ptr=this.ffi.QTS_bjson_decode(this.ctx.value,handle.value);return this.memory.heapValueHandle(ptr)}success(value){return DisposableResult.success(value)}fail(error){return DisposableResult.fail(error,error2=>this.unwrapResult(error2))}};var QuickJSRuntime=class extends UsingDisposable{constructor(args){super();this.scope=new Scope;this.contextMap=new Map;this._debugMode=!1;this.cToHostCallbacks={shouldInterrupt:rt=>{if(rt!==this.rt.value)throw new Error(\"QuickJSContext instance received C -> JS interrupt with mismatched rt\");let fn=this.interruptHandler;if(!fn)throw new Error(\"QuickJSContext had no interrupt handler\");return fn(this)?1:0},loadModuleSource:maybeAsyncFn(this,function*(awaited,rt,ctx,moduleName){let moduleLoader=this.moduleLoader;if(!moduleLoader)throw new Error(\"Runtime has no module loader\");if(rt!==this.rt.value)throw new Error(\"Runtime pointer mismatch\");let context=this.contextMap.get(ctx)??this.newContext({contextPointer:ctx});try{let result=yield*awaited(moduleLoader(moduleName,context));if(typeof result==\"object\"&&\"error\"in result&&result.error)throw this.debugLog(\"cToHostLoadModule: loader returned error\",result.error),result.error;let moduleSource=typeof result==\"string\"?result:\"value\"in result?result.value:result;return this.memory.newHeapCharPointer(moduleSource).value.ptr}catch(error){return this.debugLog(\"cToHostLoadModule: caught error\",error),context.throw(error),0}}),normalizeModule:maybeAsyncFn(this,function*(awaited,rt,ctx,baseModuleName,moduleNameRequest){let moduleNormalizer=this.moduleNormalizer;if(!moduleNormalizer)throw new Error(\"Runtime has no module normalizer\");if(rt!==this.rt.value)throw new Error(\"Runtime pointer mismatch\");let context=this.contextMap.get(ctx)??this.newContext({contextPointer:ctx});try{let result=yield*awaited(moduleNormalizer(baseModuleName,moduleNameRequest,context));if(typeof result==\"object\"&&\"error\"in result&&result.error)throw this.debugLog(\"cToHostNormalizeModule: normalizer returned error\",result.error),result.error;let name=typeof result==\"string\"?result:result.value;return context.getMemory(this.rt.value).newHeapCharPointer(name).value.ptr}catch(error){return this.debugLog(\"normalizeModule: caught error\",error),context.throw(error),0}})};args.ownedLifetimes?.forEach(lifetime=>this.scope.manage(lifetime)),this.module=args.module,this.memory=new ModuleMemory(this.module),this.ffi=args.ffi,this.rt=args.rt,this.callbacks=args.callbacks,this.scope.manage(this.rt),this.callbacks.setRuntimeCallbacks(this.rt.value,this.cToHostCallbacks),this.executePendingJobs=this.executePendingJobs.bind(this),QTS_DEBUG&&this.setDebugMode(!0);}get alive(){return this.scope.alive}dispose(){return this.scope.dispose()}newContext(options={}){let intrinsics=intrinsicsToFlags(options.intrinsics),ctx=new Lifetime(options.contextPointer||this.ffi.QTS_NewContext(this.rt.value,intrinsics),void 0,ctx_ptr=>{this.contextMap.delete(ctx_ptr),this.callbacks.deleteContext(ctx_ptr),this.ffi.QTS_FreeContext(ctx_ptr);}),context=new QuickJSContext({module:this.module,ctx,ffi:this.ffi,rt:this.rt,ownedLifetimes:options.ownedLifetimes,runtime:this,callbacks:this.callbacks});return this.contextMap.set(ctx.value,context),context}setModuleLoader(moduleLoader,moduleNormalizer){this.moduleLoader=moduleLoader,this.moduleNormalizer=moduleNormalizer,this.ffi.QTS_RuntimeEnableModuleLoader(this.rt.value,this.moduleNormalizer?1:0);}removeModuleLoader(){this.moduleLoader=void 0,this.ffi.QTS_RuntimeDisableModuleLoader(this.rt.value);}hasPendingJob(){return !!this.ffi.QTS_IsJobPending(this.rt.value)}setInterruptHandler(cb){let prevInterruptHandler=this.interruptHandler;this.interruptHandler=cb,prevInterruptHandler||this.ffi.QTS_RuntimeEnableInterruptHandler(this.rt.value);}removeInterruptHandler(){this.interruptHandler&&(this.ffi.QTS_RuntimeDisableInterruptHandler(this.rt.value),this.interruptHandler=void 0);}executePendingJobs(maxJobsToExecute=-1){let ctxPtrOut=this.memory.newMutablePointerArray(1),valuePtr=this.ffi.QTS_ExecutePendingJob(this.rt.value,maxJobsToExecute??-1,ctxPtrOut.value.ptr),ctxPtr=ctxPtrOut.value.typedArray[0];if(ctxPtrOut.dispose(),ctxPtr===0)return this.ffi.QTS_FreeValuePointerRuntime(this.rt.value,valuePtr),DisposableResult.success(0);let context=this.contextMap.get(ctxPtr)??this.newContext({contextPointer:ctxPtr}),resultValue=context.getMemory(this.rt.value).heapValueHandle(valuePtr);if(context.typeof(resultValue)===\"number\"){let executedJobs=context.getNumber(resultValue);return resultValue.dispose(),DisposableResult.success(executedJobs)}else {let error=Object.assign(resultValue,{context});return DisposableResult.fail(error,error2=>context.unwrapResult(error2))}}setMemoryLimit(limitBytes){if(limitBytes<0&&limitBytes!==-1)throw new Error(\"Cannot set memory limit to negative number. To unset, pass -1\");this.ffi.QTS_RuntimeSetMemoryLimit(this.rt.value,limitBytes);}computeMemoryUsage(){let serviceContextMemory=this.getSystemContext().getMemory(this.rt.value);return serviceContextMemory.heapValueHandle(this.ffi.QTS_RuntimeComputeMemoryUsage(this.rt.value,serviceContextMemory.ctx.value))}dumpMemoryUsage(){return this.memory.consumeHeapCharPointer(this.ffi.QTS_RuntimeDumpMemoryUsage(this.rt.value))}setMaxStackSize(stackSize){if(stackSize<0)throw new Error(\"Cannot set memory limit to negative number. To unset, pass 0.\");this.ffi.QTS_RuntimeSetMaxStackSize(this.rt.value,stackSize);}assertOwned(handle){if(handle.owner&&handle.owner.rt!==this.rt)throw new QuickJSWrongOwner(`Handle is not owned by this runtime: ${handle.owner.rt.value} != ${this.rt.value}`)}setDebugMode(enabled){this._debugMode=enabled,this.ffi.DEBUG&&this.rt.alive&&this.ffi.QTS_SetDebugLogEnabled(this.rt.value,enabled?1:0);}isDebugMode(){return this._debugMode}debugLog(...msg){this._debugMode&&console.log(\"quickjs-emscripten:\",...msg);}[Symbol.for(\"nodejs.util.inspect.custom\")](){return this.alive?`${this.constructor.name} { rt: ${this.rt.value} }`:`${this.constructor.name} { disposed }`}getSystemContext(){return this.context||(this.context=this.scope.manage(this.newContext())),this.context}};var QuickJSEmscriptenModuleCallbacks=class{constructor(args){this.callFunction=args.callFunction,this.shouldInterrupt=args.shouldInterrupt,this.loadModuleSource=args.loadModuleSource,this.normalizeModule=args.normalizeModule;}},QuickJSModuleCallbacks=class{constructor(module){this.contextCallbacks=new Map;this.runtimeCallbacks=new Map;this.suspendedCount=0;this.cToHostCallbacks=new QuickJSEmscriptenModuleCallbacks({callFunction:(asyncify,ctx,this_ptr,argc,argv,fn_id)=>this.handleAsyncify(asyncify,()=>{try{let vm=this.contextCallbacks.get(ctx);if(!vm)throw new Error(`QuickJSContext(ctx = ${ctx}) not found for C function call \"${fn_id}\"`);return vm.callFunction(ctx,this_ptr,argc,argv,fn_id)}catch(error){return console.error(\"[C to host error: returning null]\",error),0}}),shouldInterrupt:(asyncify,rt)=>this.handleAsyncify(asyncify,()=>{try{let vm=this.runtimeCallbacks.get(rt);if(!vm)throw new Error(`QuickJSRuntime(rt = ${rt}) not found for C interrupt`);return vm.shouldInterrupt(rt)}catch(error){return console.error(\"[C to host interrupt: returning error]\",error),1}}),loadModuleSource:(asyncify,rt,ctx,moduleName)=>this.handleAsyncify(asyncify,()=>{try{let runtimeCallbacks=this.runtimeCallbacks.get(rt);if(!runtimeCallbacks)throw new Error(`QuickJSRuntime(rt = ${rt}) not found for C module loader`);let loadModule=runtimeCallbacks.loadModuleSource;if(!loadModule)throw new Error(`QuickJSRuntime(rt = ${rt}) does not support module loading`);return loadModule(rt,ctx,moduleName)}catch(error){return console.error(\"[C to host module loader error: returning null]\",error),0}}),normalizeModule:(asyncify,rt,ctx,moduleBaseName,moduleName)=>this.handleAsyncify(asyncify,()=>{try{let runtimeCallbacks=this.runtimeCallbacks.get(rt);if(!runtimeCallbacks)throw new Error(`QuickJSRuntime(rt = ${rt}) not found for C module loader`);let normalizeModule=runtimeCallbacks.normalizeModule;if(!normalizeModule)throw new Error(`QuickJSRuntime(rt = ${rt}) does not support module loading`);return normalizeModule(rt,ctx,moduleBaseName,moduleName)}catch(error){return console.error(\"[C to host module loader error: returning null]\",error),0}})});this.module=module,this.module.callbacks=this.cToHostCallbacks;}setRuntimeCallbacks(rt,callbacks){this.runtimeCallbacks.set(rt,callbacks);}deleteRuntime(rt){this.runtimeCallbacks.delete(rt);}setContextCallbacks(ctx,callbacks){this.contextCallbacks.set(ctx,callbacks);}deleteContext(ctx){this.contextCallbacks.delete(ctx);}handleAsyncify(asyncify,fn){if(asyncify)return asyncify.handleSleep(done=>{try{let result=fn();if(!(result instanceof Promise)){debugLog(\"asyncify.handleSleep: not suspending:\",result),done(result);return}if(this.suspended)throw new QuickJSAsyncifyError(`Already suspended at: ${this.suspended.stack}\nAttempted to suspend at:`);this.suspended=new QuickJSAsyncifySuspended(`(${this.suspendedCount++})`),debugLog(\"asyncify.handleSleep: suspending:\",this.suspended),result.then(resolvedResult=>{this.suspended=void 0,debugLog(\"asyncify.handleSleep: resolved:\",resolvedResult),done(resolvedResult);},error=>{debugLog(\"asyncify.handleSleep: rejected:\",error),console.error(\"QuickJS: cannot handle error in suspended function\",error),this.suspended=void 0;});}catch(error){throw debugLog(\"asyncify.handleSleep: error:\",error),this.suspended=void 0,error}});let value=fn();if(value instanceof Promise)throw new Error(\"Promise return value not supported in non-asyncify context.\");return value}};function applyBaseRuntimeOptions(runtime,options){options.interruptHandler&&runtime.setInterruptHandler(options.interruptHandler),options.maxStackSizeBytes!==void 0&&runtime.setMaxStackSize(options.maxStackSizeBytes),options.memoryLimitBytes!==void 0&&runtime.setMemoryLimit(options.memoryLimitBytes);}function applyModuleEvalRuntimeOptions(runtime,options){options.moduleLoader&&runtime.setModuleLoader(options.moduleLoader),options.shouldInterrupt&&runtime.setInterruptHandler(options.shouldInterrupt),options.memoryLimitBytes!==void 0&&runtime.setMemoryLimit(options.memoryLimitBytes),options.maxStackSizeBytes!==void 0&&runtime.setMaxStackSize(options.maxStackSizeBytes);}var QuickJSWASMModule=class{constructor(module,ffi){this.module=module,this.ffi=ffi,this.callbacks=new QuickJSModuleCallbacks(module);}newRuntime(options={}){let rt=new Lifetime(this.ffi.QTS_NewRuntime(),void 0,rt_ptr=>{this.callbacks.deleteRuntime(rt_ptr),this.ffi.QTS_FreeRuntime(rt_ptr);}),runtime=new QuickJSRuntime({module:this.module,callbacks:this.callbacks,ffi:this.ffi,rt});return applyBaseRuntimeOptions(runtime,options),options.moduleLoader&&runtime.setModuleLoader(options.moduleLoader),runtime}newContext(options={}){let runtime=this.newRuntime(),context=runtime.newContext({...options,ownedLifetimes:concat(runtime,options.ownedLifetimes)});return runtime.context=context,context}evalCode(code,options={}){return Scope.withScope(scope=>{let vm=scope.manage(this.newContext());applyModuleEvalRuntimeOptions(vm.runtime,options);let result=vm.evalCode(code,\"eval.js\");if(options.memoryLimitBytes!==void 0&&vm.runtime.setMemoryLimit(-1),result.error)throw vm.dump(scope.manage(result.error));return vm.dump(scope.manage(result.value))})}getWasmMemory(){let memory=this.module.quickjsEmscriptenInit?.(()=>{})?.getWasmMemory?.();if(!memory)throw new Error(\"Variant does not support getting WebAssembly.Memory\");return memory}getFFI(){return this.ffi}};\n\nvar QuickJSAsyncContext=class extends QuickJSContext{async evalCodeAsync(code,filename=\"eval.js\",options){let detectModule=options===void 0?1:0,flags=evalOptionsToFlags(options),resultPtr=0;try{resultPtr=await this.memory.newHeapCharPointer(code).consume(charHandle=>this.ffi.QTS_Eval_MaybeAsync(this.ctx.value,charHandle.value.ptr,charHandle.value.strlen,filename,detectModule,flags));}catch(error){throw this.runtime.debugLog(\"QTS_Eval_MaybeAsync threw\",error),error}let errorPtr=this.ffi.QTS_ResolveException(this.ctx.value,resultPtr);return errorPtr?(this.ffi.QTS_FreeValuePointer(this.ctx.value,resultPtr),this.fail(this.memory.heapValueHandle(errorPtr))):this.success(this.memory.heapValueHandle(resultPtr))}newAsyncifiedFunction(name,fn){return this.newFunction(name,fn)}};var QuickJSAsyncRuntime=class extends QuickJSRuntime{constructor(args){super(args);}newContext(options={}){let intrinsics=intrinsicsToFlags(options.intrinsics),ctx=new Lifetime(this.ffi.QTS_NewContext(this.rt.value,intrinsics),void 0,ctx_ptr=>{this.contextMap.delete(ctx_ptr),this.callbacks.deleteContext(ctx_ptr),this.ffi.QTS_FreeContext(ctx_ptr);}),context=new QuickJSAsyncContext({module:this.module,ctx,ffi:this.ffi,rt:this.rt,ownedLifetimes:[],runtime:this,callbacks:this.callbacks});return this.contextMap.set(ctx.value,context),context}setModuleLoader(moduleLoader,moduleNormalizer){super.setModuleLoader(moduleLoader,moduleNormalizer);}setMaxStackSize(stackSize){return super.setMaxStackSize(stackSize)}};var QuickJSAsyncWASMModule=class extends QuickJSWASMModule{constructor(module,ffi){super(module,ffi);this.ffi=ffi,this.module=module;}newRuntime(options={}){let rt=new Lifetime(this.ffi.QTS_NewRuntime(),void 0,rt_ptr=>{this.callbacks.deleteRuntime(rt_ptr),this.ffi.QTS_FreeRuntime(rt_ptr);}),runtime=new QuickJSAsyncRuntime({module:this.module,ffi:this.ffi,rt,callbacks:this.callbacks});return applyBaseRuntimeOptions(runtime,options),options.moduleLoader&&runtime.setModuleLoader(options.moduleLoader),runtime}newContext(options={}){let runtime=this.newRuntime(),lifetimes=options.ownedLifetimes?options.ownedLifetimes.concat([runtime]):[runtime],context=runtime.newContext({...options,ownedLifetimes:lifetimes});return runtime.context=context,context}evalCode(){throw new QuickJSNotImplemented(\"QuickJSWASMModuleAsyncify.evalCode: use evalCodeAsync instead\")}evalCodeAsync(code,options){return Scope.withScopeAsync(async scope=>{let vm=scope.manage(this.newContext());applyModuleEvalRuntimeOptions(vm.runtime,options);let result=await vm.evalCodeAsync(code,\"eval.js\");if(options.memoryLimitBytes!==void 0&&vm.runtime.setMemoryLimit(-1),result.error)throw vm.dump(scope.manage(result.error));return vm.dump(scope.manage(result.value))})}};\n\nasync function newQuickJSWASMModuleFromVariant(variantOrPromise){let variant=smartUnwrap(await variantOrPromise),[wasmModuleLoader,QuickJSFFI,{QuickJSWASMModule:QuickJSWASMModule2}]=await Promise.all([variant.importModuleLoader().then(smartUnwrap),variant.importFFI(),Promise.resolve().then(function () { return module6F3E5H7Y; }).then(smartUnwrap)]),wasmModule=await wasmModuleLoader();wasmModule.type=\"sync\";let ffi=new QuickJSFFI(wasmModule);return new QuickJSWASMModule2(wasmModule,ffi)}async function newQuickJSAsyncWASMModuleFromVariant(variantOrPromise){let variant=smartUnwrap(await variantOrPromise),[wasmModuleLoader,QuickJSAsyncFFI,{QuickJSAsyncWASMModule:QuickJSAsyncWASMModule2}]=await Promise.all([variant.importModuleLoader().then(smartUnwrap),variant.importFFI(),Promise.resolve().then(function () { return moduleAsyncifyR6PWJ6ZV; }).then(smartUnwrap)]),wasmModule=await wasmModuleLoader();wasmModule.type=\"async\";let ffi=new QuickJSAsyncFFI(wasmModule);return new QuickJSAsyncWASMModule2(wasmModule,ffi)}function memoizePromiseFactory(fn){let promise;return ()=>promise??(promise=fn())}function smartUnwrap(val){return val&&\"default\"in val&&val.default?val.default&&\"default\"in val.default&&val.default.default?val.default.default:val.default:val}function newVariant(baseVariant,options){return {...baseVariant,async importModuleLoader(){let moduleLoader=smartUnwrap(await baseVariant.importModuleLoader());return async function(){let moduleLoaderArg=options.emscriptenModule?{...options.emscriptenModule}:{},log=options.log??((...args)=>debugLog(\"newVariant moduleLoader:\",...args)),tapValue=(message,val)=>(log(...message,val),val),force=val=>typeof val==\"function\"?val():val;(options.wasmLocation||options.wasmSourceMapLocation||options.locateFile)&&(moduleLoaderArg.locateFile=(fileName,relativeTo)=>{let args={fileName,relativeTo};if(fileName.endsWith(\".wasm\")&&options.wasmLocation!==void 0)return tapValue([\"locateFile .wasm: provide wasmLocation\",args],options.wasmLocation);if(fileName.endsWith(\".map\")){if(options.wasmSourceMapLocation!==void 0)return tapValue([\"locateFile .map: provide wasmSourceMapLocation\",args],options.wasmSourceMapLocation);if(options.wasmLocation&&!options.locateFile)return tapValue([\"locateFile .map: infer from wasmLocation\",args],options.wasmLocation+\".map\")}return options.locateFile?tapValue([\"locateFile: use provided fn\",args],options.locateFile(fileName,relativeTo)):tapValue([\"locateFile: unhandled, passthrough\",args],fileName)}),options.wasmBinary&&(moduleLoaderArg.wasmBinary=await force(options.wasmBinary)),options.wasmMemory&&(moduleLoaderArg.wasmMemory=await force(options.wasmMemory));let optionsWasmModule=options.wasmModule,modulePromise;optionsWasmModule&&(moduleLoaderArg.instantiateWasm=async(imports,onSuccess)=>{modulePromise??(modulePromise=Promise.resolve(force(optionsWasmModule)));let wasmModule=await modulePromise;if(!wasmModule)throw new QuickJSEmscriptenModuleError(`options.wasmModule returned ${String(wasmModule)}`);let instance=await WebAssembly.instantiate(wasmModule,imports);return onSuccess(instance),instance.exports}),moduleLoaderArg.monitorRunDependencies=left=>{log(\"monitorRunDependencies:\",left);},moduleLoaderArg.quickjsEmscriptenInit=()=>newMockExtensions(log);let resultPromise=moduleLoader(moduleLoaderArg),extensions=moduleLoaderArg.quickjsEmscriptenInit?.(log);if(optionsWasmModule&&extensions?.receiveWasmOffsetConverter&&!extensions.existingWasmOffsetConverter){let wasmBinary=await force(options.wasmBinary)??new ArrayBuffer(0);modulePromise??(modulePromise=Promise.resolve(force(optionsWasmModule)));let wasmModule=await modulePromise;if(!wasmModule)throw new QuickJSEmscriptenModuleError(`options.wasmModule returned ${String(wasmModule)}`);extensions.receiveWasmOffsetConverter(wasmBinary,wasmModule);}if(extensions?.receiveSourceMapJSON){let loadedSourceMapData=await force(options.wasmSourceMapData);typeof loadedSourceMapData==\"string\"?extensions.receiveSourceMapJSON(JSON.parse(loadedSourceMapData)):loadedSourceMapData?extensions.receiveSourceMapJSON(loadedSourceMapData):extensions.receiveSourceMapJSON({version:3,names:[],sources:[],mappings:\"\"});}return resultPromise}}}}function newMockExtensions(log){let mockMessage=\"mock called, emscripten module may not be initialized yet\";return {mock:!0,removeRunDependency(name){log(`${mockMessage}: removeRunDependency called:`,name);},receiveSourceMapJSON(data){log(`${mockMessage}: receiveSourceMapJSON called:`,data);},WasmOffsetConverter:void 0,receiveWasmOffsetConverter(bytes,mod){log(`${mockMessage}: receiveWasmOffsetConverter called:`,bytes,mod);}}}function isSuccess(successOrFail){return !(\"error\"in successOrFail)}function isFail(successOrFail){return \"error\"in successOrFail}function shouldInterruptAfterDeadline(deadline){let deadlineAsNumber=typeof deadline==\"number\"?deadline:deadline.getTime();return function(){return Date.now()>deadlineAsNumber}}var TestQuickJSWASMModule=class{constructor(parent){this.parent=parent;this.contexts=new Set;this.runtimes=new Set;}newRuntime(options){let runtime=this.parent.newRuntime({...options,ownedLifetimes:[new Lifetime(void 0,void 0,()=>this.runtimes.delete(runtime)),...options?.ownedLifetimes??[]]});return this.runtimes.add(runtime),runtime}newContext(options){let context=this.parent.newContext({...options,ownedLifetimes:[new Lifetime(void 0,void 0,()=>this.contexts.delete(context)),...options?.ownedLifetimes??[]]});return this.contexts.add(context),context}evalCode(code,options){return this.parent.evalCode(code,options)}disposeAll(){let allDisposables=[...this.contexts,...this.runtimes];this.runtimes.clear(),this.contexts.clear(),allDisposables.forEach(d=>{d.alive&&d.dispose();});}assertNoMemoryAllocated(){if(this.getFFI().QTS_RecoverableLeakCheck())throw new QuickJSMemoryLeakDetected(\"Leak sanitizer detected un-freed memory\");if(this.contexts.size>0)throw new QuickJSMemoryLeakDetected(`${this.contexts.size} contexts leaked`);if(this.runtimes.size>0)throw new QuickJSMemoryLeakDetected(`${this.runtimes.size} runtimes leaked`)}getWasmMemory(){return this.parent.getWasmMemory()}getFFI(){return this.parent.getFFI()}};\n\nvar module6F3E5H7Y = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tQuickJSModuleCallbacks: QuickJSModuleCallbacks,\n\tQuickJSWASMModule: QuickJSWASMModule,\n\tapplyBaseRuntimeOptions: applyBaseRuntimeOptions,\n\tapplyModuleEvalRuntimeOptions: applyModuleEvalRuntimeOptions\n});\n\nvar moduleAsyncifyR6PWJ6ZV = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tQuickJSAsyncWASMModule: QuickJSAsyncWASMModule\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9AaGFzaGJyb3duYWkrY29yZUAwLjMuMC9ub2RlX21vZHVsZXMvQGhhc2hicm93bmFpL2NvcmUvaW5kZXguZXNtNC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErSTtBQUM3Rjs7QUFFbEQsb0NBQW9DLDRCQUE0QiwyQ0FBMkMsNEJBQTRCLElBQUksaUJBQWlCLGtDQUFrQyxtQkFBbUIsMkJBQTJCLHVEQUF1RCxzQkFBc0IseUJBQXlCLGdqQkFBZ2pCLEVBQUUsMkNBQTJDLDJCQUEyQixpR0FBaUcsZUFBZSxpQkFBaUIscUJBQXFCLGlDQUFpQyx1Q0FBdUMsY0FBYyxvQkFBb0IsZ0NBQWdDLHlDQUF5QyxjQUFjLG9CQUFvQixrQ0FBa0MsMkNBQTJDLGNBQWMsb0JBQW9CLG9DQUFvQywwQ0FBMEMsY0FBYyxvQkFBb0IsbUNBQW1DLDhDQUE4QyxjQUFjLG9CQUFvQix1Q0FBdUMsK0NBQStDLGNBQWMsb0JBQW9CLHdDQUF3QyxrREFBa0QsY0FBYyxvQkFBb0IsMkNBQTJDLGlEQUFpRCxjQUFjLG9CQUFvQixzQ0FBc0MsMkNBQTJDLGNBQWMsb0JBQW9CLG9DQUFvQyxxREFBcUQsY0FBYyxvQkFBb0IsK0NBQStDLDJCQUEyQixtQkFBbUIsaUNBQWlDLHNEQUFzRCwwQkFBMEIsMkJBQTJCLCtCQUErQixtQkFBbUIsK0NBQStDLDJDQUEyQyx5Q0FBeUMsbURBQW1ELDBDQUEwQyxzQ0FBc0MsOEJBQThCLCtMQUErTCxrQ0FBa0MsMEJBQTBCLG1CQUFtQix1QkFBdUIscUdBQXFHLHlFQUF5RSxzQkFBc0IsRUFBRSxxREFBcUQsMkNBQTJDLFFBQVEsbUJBQW1CLG1CQUFtQix1QkFBdUIsbUJBQW1CLGVBQWUsaUZBQWlGLFlBQVksbUJBQW1CLFlBQVksc0NBQXNDLFlBQVksbUJBQW1CLGNBQWMscUJBQXFCLE1BQU0sMkVBQTJFLHFGQUFxRixhQUFh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T0FBTyxZQUFZLHNDQUFzQyw0QkFBNEIsT0FBTyxZQUFZLHVDQUF1QyxrRUFBa0UsT0FBTyxZQUFZLG9EQUFvRCxrQ0FBa0Msa0NBQWtDLCtCQUErQiwrQkFBK0IsZ0RBQWdELDJFQUEyRSxrQkFBa0Isb0NBQW9DLGdDQUFnQyxvQkFBb0IsbUJBQW1CLHNCQUFzQix1QkFBdUIsb0JBQW9CLG9DQUFvQyx5SEFBeUgsRUFBRSwwQ0FBMEMsb0JBQW9CLG9DQUFvQyx5SEFBeUgsRUFBRSwwQ0FBMEMsdUJBQXVCLDBDQUEwQyxhQUFhLHVEQUF1RCx1RUFBdUUsc0JBQXNCLEdBQUcsMEJBQTBCLDJIQUEySCwrREFBK0Qsb0JBQW9CLGtCQUFrQiwrREFBK0Qsb0JBQW9CLGtCQUFrQixnQkFBZ0IsbUNBQW1DLFNBQVM7O0FBRTcrTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRThtQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvLnBucG0vQGhhc2hicm93bmFpK2NvcmVAMC4zLjAvbm9kZV9tb2R1bGVzL0BoYXNoYnJvd25haS9jb3JlL2luZGV4LmVzbTQuanM/MjRkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBKIGFzIEpTUHJvbWlzZVN0YXRlRW51bSwgSSBhcyBJc0VxdWFsT3AsIGIgYXMgSW50cmluc2ljc0ZsYWdzLCBFIGFzIEV2YWxGbGFncywgRyBhcyBHZXRPd25Qcm9wZXJ0eU5hbWVzRmxhZ3MgfSBmcm9tICcuL2luZGV4LmVzbTMuanMnO1xuZXhwb3J0IHsgYSBhcyBhc3NlcnRTeW5jIH0gZnJvbSAnLi9pbmRleC5lc20zLmpzJztcblxudmFyIF9fZGVmUHJvcD1PYmplY3QuZGVmaW5lUHJvcGVydHk7dmFyIF9fZXhwb3J0PSh0YXJnZXQsYWxsKT0+e2Zvcih2YXIgbmFtZSBpbiBhbGwpX19kZWZQcm9wKHRhcmdldCxuYW1lLHtnZXQ6YWxsW25hbWVdLGVudW1lcmFibGU6ITB9KTt9O3ZhciBRVFNfREVCVUc9ITE7ZnVuY3Rpb24gc2V0RGVidWdNb2RlKGVuYWJsZWQ9ITApe1FUU19ERUJVRz1lbmFibGVkO31mdW5jdGlvbiBkZWJ1Z0xvZyguLi5hcmdzKXtRVFNfREVCVUcmJmNvbnNvbGUubG9nKFwicXVpY2tqcy1lbXNjcmlwdGVuOlwiLC4uLmFyZ3MpO312YXIgZXJyb3JzX2V4cG9ydHM9e307X19leHBvcnQoZXJyb3JzX2V4cG9ydHMse1F1aWNrSlNBc3luY2lmeUVycm9yOigpPT5RdWlja0pTQXN5bmNpZnlFcnJvcixRdWlja0pTQXN5bmNpZnlTdXNwZW5kZWQ6KCk9PlF1aWNrSlNBc3luY2lmeVN1c3BlbmRlZCxRdWlja0pTRW1wdHlHZXRPd25Qcm9wZXJ0eU5hbWVzOigpPT5RdWlja0pTRW1wdHlHZXRPd25Qcm9wZXJ0eU5hbWVzLFF1aWNrSlNFbXNjcmlwdGVuTW9kdWxlRXJyb3I6KCk9PlF1aWNrSlNFbXNjcmlwdGVuTW9kdWxlRXJyb3IsUXVpY2tKU01lbW9yeUxlYWtEZXRlY3RlZDooKT0+UXVpY2tKU01lbW9yeUxlYWtEZXRlY3RlZCxRdWlja0pTTm90SW1wbGVtZW50ZWQ6KCk9PlF1aWNrSlNOb3RJbXBsZW1lbnRlZCxRdWlja0pTUHJvbWlzZVBlbmRpbmc6KCk9PlF1aWNrSlNQcm9taXNlUGVuZGluZyxRdWlja0pTVW5rbm93bkludHJpbnNpYzooKT0+UXVpY2tKU1Vua25vd25JbnRyaW5zaWMsUXVpY2tKU1Vud3JhcEVycm9yOigpPT5RdWlja0pTVW53cmFwRXJyb3IsUXVpY2tKU1VzZUFmdGVyRnJlZTooKT0+UXVpY2tKU1VzZUFmdGVyRnJlZSxRdWlja0pTV3JvbmdPd25lcjooKT0+UXVpY2tKU1dyb25nT3duZXJ9KTt2YXIgUXVpY2tKU1Vud3JhcEVycm9yPWNsYXNzIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoY2F1c2UsY29udGV4dCl7bGV0IG1lc3NhZ2U9dHlwZW9mIGNhdXNlPT1cIm9iamVjdFwiJiZjYXVzZSYmXCJtZXNzYWdlXCJpbiBjYXVzZT9TdHJpbmcoY2F1c2UubWVzc2FnZSk6U3RyaW5nKGNhdXNlKTtzdXBlcihtZXNzYWdlKTt0aGlzLmNhdXNlPWNhdXNlO3RoaXMuY29udGV4dD1jb250ZXh0O3RoaXMubmFtZT1cIlF1aWNrSlNVbndyYXBFcnJvclwiO319LFF1aWNrSlNXcm9uZ093bmVyPWNsYXNzIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpO3RoaXMubmFtZT1cIlF1aWNrSlNXcm9uZ093bmVyXCI7fX0sUXVpY2tKU1VzZUFmdGVyRnJlZT1jbGFzcyBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKTt0aGlzLm5hbWU9XCJRdWlja0pTVXNlQWZ0ZXJGcmVlXCI7fX0sUXVpY2tKU05vdEltcGxlbWVudGVkPWNsYXNzIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpO3RoaXMubmFtZT1cIlF1aWNrSlNOb3RJbXBsZW1lbnRlZFwiO319LFF1aWNrSlNBc3luY2lmeUVycm9yPWNsYXNzIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpO3RoaXMubmFtZT1cIlF1aWNrSlNBc3luY2lmeUVycm9yXCI7fX0sUXVpY2tKU0FzeW5jaWZ5U3VzcGVuZGVkPWNsYXNzIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpO3RoaXMubmFtZT1cIlF1aWNrSlNBc3luY2lmeVN1c3BlbmRlZFwiO319LFF1aWNrSlNNZW1vcnlMZWFrRGV0ZWN0ZWQ9Y2xhc3MgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyk7dGhpcy5uYW1lPVwiUXVpY2tKU01lbW9yeUxlYWtEZXRlY3RlZFwiO319LFF1aWNrSlNFbXNjcmlwdGVuTW9kdWxlRXJyb3I9Y2xhc3MgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyk7dGhpcy5uYW1lPVwiUXVpY2tKU0Vtc2NyaXB0ZW5Nb2R1bGVFcnJvclwiO319LFF1aWNrSlNVbmtub3duSW50cmluc2ljPWNsYXNzIGV4dGVuZHMgVHlwZUVycm9ye2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKTt0aGlzLm5hbWU9XCJRdWlja0pTVW5rbm93bkludHJpbnNpY1wiO319LFF1aWNrSlNQcm9taXNlUGVuZGluZz1jbGFzcyBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKTt0aGlzLm5hbWU9XCJRdWlja0pTUHJvbWlzZVBlbmRpbmdcIjt9fSxRdWlja0pTRW1wdHlHZXRPd25Qcm9wZXJ0eU5hbWVzPWNsYXNzIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpO3RoaXMubmFtZT1cIlF1aWNrSlNFbXB0eUdldE93blByb3BlcnR5TmFtZXNcIjt9fTtmdW5jdGlvbiphd2FpdFlpZWxkKHZhbHVlKXtyZXR1cm4geWllbGQgdmFsdWV9ZnVuY3Rpb24gYXdhaXRZaWVsZE9mKGdlbmVyYXRvcil7cmV0dXJuIGF3YWl0WWllbGQoYXdhaXRFYWNoWWllbGRlZFByb21pc2UoZ2VuZXJhdG9yKSl9dmFyIEF3YWl0WWllbGQ9YXdhaXRZaWVsZDtBd2FpdFlpZWxkLm9mPWF3YWl0WWllbGRPZjtmdW5jdGlvbiBtYXliZUFzeW5jRm4odGhhdCxmbil7cmV0dXJuICguLi5hcmdzKT0+e2xldCBnZW5lcmF0b3I9Zm4uY2FsbCh0aGF0LEF3YWl0WWllbGQsLi4uYXJncyk7cmV0dXJuIGF3YWl0RWFjaFlpZWxkZWRQcm9taXNlKGdlbmVyYXRvcil9fWZ1bmN0aW9uIG1heWJlQXN5bmModGhhdCxzdGFydEdlbmVyYXRvcil7bGV0IGdlbmVyYXRvcj1zdGFydEdlbmVyYXRvci5jYWxsKHRoYXQsQXdhaXRZaWVsZCk7cmV0dXJuIGF3YWl0RWFjaFlpZWxkZWRQcm9taXNlKGdlbmVyYXRvcil9ZnVuY3Rpb24gYXdhaXRFYWNoWWllbGRlZFByb21pc2UoZ2VuKXtmdW5jdGlvbiBoYW5kbGVOZXh0U3RlcChzdGVwKXtyZXR1cm4gc3RlcC5kb25lP3N0ZXAudmFsdWU6c3RlcC52YWx1ZSBpbnN0YW5jZW9mIFByb21pc2U/c3RlcC52YWx1ZS50aGVuKHZhbHVlPT5oYW5kbGVOZXh0U3RlcChnZW4ubmV4dCh2YWx1ZSkpLGVycm9yPT5oYW5kbGVOZXh0U3RlcChnZW4udGhyb3coZXJyb3IpKSk6aGFuZGxlTmV4dFN0ZXAoZ2VuLm5leHQoc3RlcC52YWx1ZSkpfXJldHVybiBoYW5kbGVOZXh0U3RlcChnZW4ubmV4dCgpKX12YXIgVXNpbmdEaXNwb3NhYmxlPWNsYXNze1tTeW1ib2wuZGlzcG9zZV0oKXtyZXR1cm4gdGhpcy5kaXNwb3NlKCl9fSxTeW1ib2xEaXNwb3NlPVN5bWJvbC5kaXNwb3NlPz9TeW1ib2wuZm9yKFwiU3ltYm9sLmRpc3Bvc2VcIikscHJvdG90eXBlQXNBbnk9VXNpbmdEaXNwb3NhYmxlLnByb3RvdHlwZTtwcm90b3R5cGVBc0FueVtTeW1ib2xEaXNwb3NlXXx8KHByb3RvdHlwZUFzQW55W1N5bWJvbERpc3Bvc2VdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzcG9zZSgpfSk7dmFyIExpZmV0aW1lPWNsYXNzIF9MaWZldGltZSBleHRlbmRzIFVzaW5nRGlzcG9zYWJsZXtjb25zdHJ1Y3RvcihfdmFsdWUsY29waWVyLGRpc3Bvc2VyLF9vd25lcil7c3VwZXIoKTt0aGlzLl92YWx1ZT1fdmFsdWU7dGhpcy5jb3BpZXI9Y29waWVyO3RoaXMuZGlzcG9zZXI9ZGlzcG9zZXI7dGhpcy5fb3duZXI9X293bmVyO3RoaXMuX2FsaXZlPSEwO3RoaXMuX2NvbnN0cnVjdG9yU3RhY2s9UVRTX0RFQlVHP25ldyBFcnJvcihcIkxpZmV0aW1lIGNvbnN0cnVjdGVkXCIpLnN0YWNrOnZvaWQgMDt9Z2V0IGFsaXZlKCl7cmV0dXJuIHRoaXMuX2FsaXZlfWdldCB2YWx1ZSgpe3JldHVybiB0aGlzLmFzc2VydEFsaXZlKCksdGhpcy5fdmFsdWV9Z2V0IG93bmVyKCl7cmV0dXJuIHRoaXMuX293bmVyfWdldCBkdXBhYmxlKCl7cmV0dXJuICEhdGhpcy5jb3BpZXJ9ZHVwKCl7aWYodGhpcy5hc3NlcnRBbGl2ZSgpLCF0aGlzLmNvcGllcil0aHJvdyBuZXcgRXJyb3IoXCJOb24tZHVwYWJsZSBsaWZldGltZVwiKTtyZXR1cm4gbmV3IF9MaWZldGltZSh0aGlzLmNvcGllcih0aGlzLl92YWx1ZSksdGhpcy5jb3BpZXIsdGhpcy5kaXNwb3Nlcix0aGlzLl9vd25lcil9Y29uc3VtZShtYXApe3RoaXMuYXNzZXJ0QWxpdmUoKTtsZXQgcmVzdWx0PW1hcCh0aGlzKTtyZXR1cm4gdGhpcy5kaXNwb3NlKCkscmVzdWx0fW1hcChtYXApe3JldHVybiB0aGlzLmFzc2VydEFsaXZlKCksbWFwKHRoaXMpfXRhcChmbil7cmV0dXJuIGZuKHRoaXMpLHRoaXN9ZGlzcG9zZSgpe3RoaXMuYXNzZXJ0QWxpdmUoKSx0aGlzLmRpc3Bvc2VyJiZ0aGlzLmRpc3Bvc2VyKHRoaXMuX3ZhbHVlKSx0aGlzLl9hbGl2ZT0hMTt9YXNzZXJ0QWxpdmUoKXtpZighdGhpcy5hbGl2ZSl0aHJvdyB0aGlzLl9jb25zdHJ1Y3RvclN0YWNrP25ldyBRdWlja0pTVXNlQWZ0ZXJGcmVlKGBMaWZldGltZSBub3QgYWxpdmVcbiR7dGhpcy5fY29uc3RydWN0b3JTdGFja31cbkxpZmV0aW1lIHVzZWRgKTpuZXcgUXVpY2tKU1VzZUFmdGVyRnJlZShcIkxpZmV0aW1lIG5vdCBhbGl2ZVwiKX19LFN0YXRpY0xpZmV0aW1lPWNsYXNzIGV4dGVuZHMgTGlmZXRpbWV7Y29uc3RydWN0b3IodmFsdWUsb3duZXIpe3N1cGVyKHZhbHVlLHZvaWQgMCx2b2lkIDAsb3duZXIpO31nZXQgZHVwYWJsZSgpe3JldHVybiAhMH1kdXAoKXtyZXR1cm4gdGhpc31kaXNwb3NlKCl7fX0sV2Vha0xpZmV0aW1lPWNsYXNzIGV4dGVuZHMgTGlmZXRpbWV7Y29uc3RydWN0b3IodmFsdWUsY29waWVyLGRpc3Bvc2VyLG93bmVyKXtzdXBlcih2YWx1ZSxjb3BpZXIsZGlzcG9zZXIsb3duZXIpO31kaXNwb3NlKCl7dGhpcy5fYWxpdmU9ITE7fX07ZnVuY3Rpb24gc2NvcGVGaW5hbGx5KHNjb3BlLGJsb2NrRXJyb3Ipe2xldCBkaXNwb3NlRXJyb3I7dHJ5e3Njb3BlLmRpc3Bvc2UoKTt9Y2F0Y2goZXJyb3Ipe2Rpc3Bvc2VFcnJvcj1lcnJvcjt9aWYoYmxvY2tFcnJvciYmZGlzcG9zZUVycm9yKXRocm93IE9iamVjdC5hc3NpZ24oYmxvY2tFcnJvcix7bWVzc2FnZTpgJHtibG9ja0Vycm9yLm1lc3NhZ2V9XG4gVGhlbiwgZmFpbGVkIHRvIGRpc3Bvc2Ugc2NvcGU6ICR7ZGlzcG9zZUVycm9yLm1lc3NhZ2V9YCxkaXNwb3NlRXJyb3J9KSxibG9ja0Vycm9yO2lmKGJsb2NrRXJyb3J8fGRpc3Bvc2VFcnJvcil0aHJvdyBibG9ja0Vycm9yfHxkaXNwb3NlRXJyb3J9dmFyIFNjb3BlPWNsYXNzIF9TY29wZSBleHRlbmRzIFVzaW5nRGlzcG9zYWJsZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyk7dGhpcy5fZGlzcG9zYWJsZXM9bmV3IExpZmV0aW1lKG5ldyBTZXQpO3RoaXMubWFuYWdlPWxpZmV0aW1lPT4odGhpcy5fZGlzcG9zYWJsZXMudmFsdWUuYWRkKGxpZmV0aW1lKSxsaWZldGltZSk7fXN0YXRpYyB3aXRoU2NvcGUoYmxvY2spe2xldCBzY29wZT1uZXcgX1Njb3BlLGJsb2NrRXJyb3I7dHJ5e3JldHVybiBibG9jayhzY29wZSl9Y2F0Y2goZXJyb3Ipe3Rocm93IGJsb2NrRXJyb3I9ZXJyb3IsZXJyb3J9ZmluYWxseXtzY29wZUZpbmFsbHkoc2NvcGUsYmxvY2tFcnJvcik7fX1zdGF0aWMgd2l0aFNjb3BlTWF5YmVBc3luYyhfdGhpcyxibG9jayl7cmV0dXJuIG1heWJlQXN5bmModm9pZCAwLGZ1bmN0aW9uKihhd2FpdGVkKXtsZXQgc2NvcGU9bmV3IF9TY29wZSxibG9ja0Vycm9yO3RyeXtyZXR1cm4geWllbGQqYXdhaXRlZC5vZihibG9jay5jYWxsKF90aGlzLGF3YWl0ZWQsc2NvcGUpKX1jYXRjaChlcnJvcil7dGhyb3cgYmxvY2tFcnJvcj1lcnJvcixlcnJvcn1maW5hbGx5e3Njb3BlRmluYWxseShzY29wZSxibG9ja0Vycm9yKTt9fSl9c3RhdGljIGFzeW5jIHdpdGhTY29wZUFzeW5jKGJsb2NrKXtsZXQgc2NvcGU9bmV3IF9TY29wZSxibG9ja0Vycm9yO3RyeXtyZXR1cm4gYXdhaXQgYmxvY2soc2NvcGUpfWNhdGNoKGVycm9yKXt0aHJvdyBibG9ja0Vycm9yPWVycm9yLGVycm9yfWZpbmFsbHl7c2NvcGVGaW5hbGx5KHNjb3BlLGJsb2NrRXJyb3IpO319Z2V0IGFsaXZlKCl7cmV0dXJuIHRoaXMuX2Rpc3Bvc2FibGVzLmFsaXZlfWRpc3Bvc2UoKXtsZXQgbGlmZXRpbWVzPUFycmF5LmZyb20odGhpcy5fZGlzcG9zYWJsZXMudmFsdWUudmFsdWVzKCkpLnJldmVyc2UoKTtmb3IobGV0IGxpZmV0aW1lIG9mIGxpZmV0aW1lcylsaWZldGltZS5hbGl2ZSYmbGlmZXRpbWUuZGlzcG9zZSgpO3RoaXMuX2Rpc3Bvc2FibGVzLmRpc3Bvc2UoKTt9fTtmdW5jdGlvbiBjcmVhdGVEaXNwb3NhYmxlQXJyYXkoaXRlbXMpe2xldCBhcnJheT1pdGVtcz9BcnJheS5mcm9tKGl0ZW1zKTpbXTtmdW5jdGlvbiBkaXNwb3NlQWxpdmUoKXtyZXR1cm4gYXJyYXkuZm9yRWFjaChkaXNwb3NhYmxlPT5kaXNwb3NhYmxlLmFsaXZlP2Rpc3Bvc2FibGUuZGlzcG9zZSgpOnZvaWQgMCl9ZnVuY3Rpb24gc29tZUlzQWxpdmUoKXtyZXR1cm4gYXJyYXkuc29tZShkaXNwb3NhYmxlPT5kaXNwb3NhYmxlLmFsaXZlKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGFycmF5LFN5bWJvbERpc3Bvc2Use2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiExLHZhbHVlOmRpc3Bvc2VBbGl2ZX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcnJheSxcImRpc3Bvc2VcIix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsdmFsdWU6ZGlzcG9zZUFsaXZlfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGFycmF5LFwiYWxpdmVcIix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsZ2V0OnNvbWVJc0FsaXZlfSksYXJyYXl9ZnVuY3Rpb24gaXNEaXNwb3NhYmxlKHZhbHVlKXtyZXR1cm4gISEodmFsdWUmJih0eXBlb2YgdmFsdWU9PVwib2JqZWN0XCJ8fHR5cGVvZiB2YWx1ZT09XCJmdW5jdGlvblwiKSYmXCJhbGl2ZVwiaW4gdmFsdWUmJnR5cGVvZiB2YWx1ZS5hbGl2ZT09XCJib29sZWFuXCImJlwiZGlzcG9zZVwiaW4gdmFsdWUmJnR5cGVvZiB2YWx1ZS5kaXNwb3NlPT1cImZ1bmN0aW9uXCIpfXZhciBBYnN0cmFjdERpc3Bvc2FibGVSZXN1bHQ9Y2xhc3MgX0Fic3RyYWN0RGlzcG9zYWJsZVJlc3VsdCBleHRlbmRzIFVzaW5nRGlzcG9zYWJsZXtzdGF0aWMgc3VjY2Vzcyh2YWx1ZSl7cmV0dXJuIG5ldyBEaXNwb3NhYmxlU3VjY2Vzcyh2YWx1ZSl9c3RhdGljIGZhaWwoZXJyb3Isb25VbndyYXApe3JldHVybiBuZXcgRGlzcG9zYWJsZUZhaWwoZXJyb3Isb25VbndyYXApfXN0YXRpYyBpcyhyZXN1bHQpe3JldHVybiByZXN1bHQgaW5zdGFuY2VvZiBfQWJzdHJhY3REaXNwb3NhYmxlUmVzdWx0fX0sRGlzcG9zYWJsZVN1Y2Nlc3M9Y2xhc3MgZXh0ZW5kcyBBYnN0cmFjdERpc3Bvc2FibGVSZXN1bHR7Y29uc3RydWN0b3IodmFsdWUpe3N1cGVyKCk7dGhpcy52YWx1ZT12YWx1ZTt9Z2V0IGFsaXZlKCl7cmV0dXJuIGlzRGlzcG9zYWJsZSh0aGlzLnZhbHVlKT90aGlzLnZhbHVlLmFsaXZlOiEwfWRpc3Bvc2UoKXtpc0Rpc3Bvc2FibGUodGhpcy52YWx1ZSkmJnRoaXMudmFsdWUuZGlzcG9zZSgpO311bndyYXAoKXtyZXR1cm4gdGhpcy52YWx1ZX11bndyYXBPcihfZmFsbGJhY2spe3JldHVybiB0aGlzLnZhbHVlfX0sRGlzcG9zYWJsZUZhaWw9Y2xhc3MgZXh0ZW5kcyBBYnN0cmFjdERpc3Bvc2FibGVSZXN1bHR7Y29uc3RydWN0b3IoZXJyb3Isb25VbndyYXApe3N1cGVyKCk7dGhpcy5lcnJvcj1lcnJvcjt0aGlzLm9uVW53cmFwPW9uVW53cmFwO31nZXQgYWxpdmUoKXtyZXR1cm4gaXNEaXNwb3NhYmxlKHRoaXMuZXJyb3IpP3RoaXMuZXJyb3IuYWxpdmU6ITB9ZGlzcG9zZSgpe2lzRGlzcG9zYWJsZSh0aGlzLmVycm9yKSYmdGhpcy5lcnJvci5kaXNwb3NlKCk7fXVud3JhcCgpe3Rocm93IHRoaXMub25VbndyYXAodGhpcyksdGhpcy5lcnJvcn11bndyYXBPcihmYWxsYmFjayl7cmV0dXJuIGZhbGxiYWNrfX0sRGlzcG9zYWJsZVJlc3VsdD1BYnN0cmFjdERpc3Bvc2FibGVSZXN1bHQ7dmFyIFF1aWNrSlNEZWZlcnJlZFByb21pc2U9Y2xhc3MgZXh0ZW5kcyBVc2luZ0Rpc3Bvc2FibGV7Y29uc3RydWN0b3IoYXJncyl7c3VwZXIoKTt0aGlzLnJlc29sdmU9dmFsdWU9Pnt0aGlzLnJlc29sdmVIYW5kbGUuYWxpdmUmJih0aGlzLmNvbnRleHQudW53cmFwUmVzdWx0KHRoaXMuY29udGV4dC5jYWxsRnVuY3Rpb24odGhpcy5yZXNvbHZlSGFuZGxlLHRoaXMuY29udGV4dC51bmRlZmluZWQsdmFsdWV8fHRoaXMuY29udGV4dC51bmRlZmluZWQpKS5kaXNwb3NlKCksdGhpcy5kaXNwb3NlUmVzb2x2ZXJzKCksdGhpcy5vblNldHRsZWQoKSk7fTt0aGlzLnJlamVjdD12YWx1ZT0+e3RoaXMucmVqZWN0SGFuZGxlLmFsaXZlJiYodGhpcy5jb250ZXh0LnVud3JhcFJlc3VsdCh0aGlzLmNvbnRleHQuY2FsbEZ1bmN0aW9uKHRoaXMucmVqZWN0SGFuZGxlLHRoaXMuY29udGV4dC51bmRlZmluZWQsdmFsdWV8fHRoaXMuY29udGV4dC51bmRlZmluZWQpKS5kaXNwb3NlKCksdGhpcy5kaXNwb3NlUmVzb2x2ZXJzKCksdGhpcy5vblNldHRsZWQoKSk7fTt0aGlzLmRpc3Bvc2U9KCk9Pnt0aGlzLmhhbmRsZS5hbGl2ZSYmdGhpcy5oYW5kbGUuZGlzcG9zZSgpLHRoaXMuZGlzcG9zZVJlc29sdmVycygpO307dGhpcy5jb250ZXh0PWFyZ3MuY29udGV4dCx0aGlzLm93bmVyPWFyZ3MuY29udGV4dC5ydW50aW1lLHRoaXMuaGFuZGxlPWFyZ3MucHJvbWlzZUhhbmRsZSx0aGlzLnNldHRsZWQ9bmV3IFByb21pc2UocmVzb2x2ZT0+e3RoaXMub25TZXR0bGVkPXJlc29sdmU7fSksdGhpcy5yZXNvbHZlSGFuZGxlPWFyZ3MucmVzb2x2ZUhhbmRsZSx0aGlzLnJlamVjdEhhbmRsZT1hcmdzLnJlamVjdEhhbmRsZTt9Z2V0IGFsaXZlKCl7cmV0dXJuIHRoaXMuaGFuZGxlLmFsaXZlfHx0aGlzLnJlc29sdmVIYW5kbGUuYWxpdmV8fHRoaXMucmVqZWN0SGFuZGxlLmFsaXZlfWRpc3Bvc2VSZXNvbHZlcnMoKXt0aGlzLnJlc29sdmVIYW5kbGUuYWxpdmUmJnRoaXMucmVzb2x2ZUhhbmRsZS5kaXNwb3NlKCksdGhpcy5yZWplY3RIYW5kbGUuYWxpdmUmJnRoaXMucmVqZWN0SGFuZGxlLmRpc3Bvc2UoKTt9fTt2YXIgTW9kdWxlTWVtb3J5PWNsYXNze2NvbnN0cnVjdG9yKG1vZHVsZSl7dGhpcy5tb2R1bGU9bW9kdWxlO310b1BvaW50ZXJBcnJheShoYW5kbGVBcnJheSl7bGV0IHR5cGVkQXJyYXk9bmV3IEludDMyQXJyYXkoaGFuZGxlQXJyYXkubWFwKGhhbmRsZT0+aGFuZGxlLnZhbHVlKSksbnVtQnl0ZXM9dHlwZWRBcnJheS5sZW5ndGgqdHlwZWRBcnJheS5CWVRFU19QRVJfRUxFTUVOVCxwdHI9dGhpcy5tb2R1bGUuX21hbGxvYyhudW1CeXRlcyk7cmV0dXJuIG5ldyBVaW50OEFycmF5KHRoaXMubW9kdWxlLkhFQVBVOC5idWZmZXIscHRyLG51bUJ5dGVzKS5zZXQobmV3IFVpbnQ4QXJyYXkodHlwZWRBcnJheS5idWZmZXIpKSxuZXcgTGlmZXRpbWUocHRyLHZvaWQgMCxwdHIyPT50aGlzLm1vZHVsZS5fZnJlZShwdHIyKSl9bmV3VHlwZWRBcnJheShraW5kLGxlbmd0aCl7bGV0IHplcm9zPW5ldyBraW5kKG5ldyBBcnJheShsZW5ndGgpLmZpbGwoMCkpLG51bUJ5dGVzPXplcm9zLmxlbmd0aCp6ZXJvcy5CWVRFU19QRVJfRUxFTUVOVCxwdHI9dGhpcy5tb2R1bGUuX21hbGxvYyhudW1CeXRlcyksdHlwZWRBcnJheT1uZXcga2luZCh0aGlzLm1vZHVsZS5IRUFQVTguYnVmZmVyLHB0cixsZW5ndGgpO3JldHVybiB0eXBlZEFycmF5LnNldCh6ZXJvcyksbmV3IExpZmV0aW1lKHt0eXBlZEFycmF5LHB0cn0sdm9pZCAwLHZhbHVlPT50aGlzLm1vZHVsZS5fZnJlZSh2YWx1ZS5wdHIpKX1uZXdNdXRhYmxlUG9pbnRlckFycmF5KGxlbmd0aCl7cmV0dXJuIHRoaXMubmV3VHlwZWRBcnJheShJbnQzMkFycmF5LGxlbmd0aCl9bmV3SGVhcENoYXJQb2ludGVyKHN0cmluZyl7bGV0IHN0cmxlbj10aGlzLm1vZHVsZS5sZW5ndGhCeXRlc1VURjgoc3RyaW5nKSxkYXRhQnl0ZXM9c3RybGVuKzEscHRyPXRoaXMubW9kdWxlLl9tYWxsb2MoZGF0YUJ5dGVzKTtyZXR1cm4gdGhpcy5tb2R1bGUuc3RyaW5nVG9VVEY4KHN0cmluZyxwdHIsZGF0YUJ5dGVzKSxuZXcgTGlmZXRpbWUoe3B0cixzdHJsZW59LHZvaWQgMCx2YWx1ZT0+dGhpcy5tb2R1bGUuX2ZyZWUodmFsdWUucHRyKSl9bmV3SGVhcEJ1ZmZlclBvaW50ZXIoYnVmZmVyKXtsZXQgbnVtQnl0ZXM9YnVmZmVyLmJ5dGVMZW5ndGgscHRyPXRoaXMubW9kdWxlLl9tYWxsb2MobnVtQnl0ZXMpO3JldHVybiB0aGlzLm1vZHVsZS5IRUFQVTguc2V0KGJ1ZmZlcixwdHIpLG5ldyBMaWZldGltZSh7cG9pbnRlcjpwdHIsbnVtQnl0ZXN9LHZvaWQgMCx2YWx1ZT0+dGhpcy5tb2R1bGUuX2ZyZWUodmFsdWUucG9pbnRlcikpfWNvbnN1bWVIZWFwQ2hhclBvaW50ZXIocHRyKXtsZXQgc3RyPXRoaXMubW9kdWxlLlVURjhUb1N0cmluZyhwdHIpO3JldHVybiB0aGlzLm1vZHVsZS5fZnJlZShwdHIpLHN0cn19O3ZhciBEZWZhdWx0SW50cmluc2ljcz1PYmplY3QuZnJlZXplKHtCYXNlT2JqZWN0czohMCxEYXRlOiEwLEV2YWw6ITAsU3RyaW5nTm9ybWFsaXplOiEwLFJlZ0V4cDohMCxKU09OOiEwLFByb3h5OiEwLE1hcFNldDohMCxUeXBlZEFycmF5czohMCxQcm9taXNlOiEwfSk7ZnVuY3Rpb24gaW50cmluc2ljc1RvRmxhZ3MoaW50cmluc2ljcyl7aWYoIWludHJpbnNpY3MpcmV0dXJuIDA7bGV0IHJlc3VsdD0wO2ZvcihsZXRbbWF5YmVJbnRyaW5zaWNOYW1lLGVuYWJsZWRdb2YgT2JqZWN0LmVudHJpZXMoaW50cmluc2ljcykpe2lmKCEobWF5YmVJbnRyaW5zaWNOYW1lIGluIEludHJpbnNpY3NGbGFncykpdGhyb3cgbmV3IFF1aWNrSlNVbmtub3duSW50cmluc2ljKG1heWJlSW50cmluc2ljTmFtZSk7ZW5hYmxlZCYmKHJlc3VsdHw9SW50cmluc2ljc0ZsYWdzW21heWJlSW50cmluc2ljTmFtZV0pO31yZXR1cm4gcmVzdWx0fWZ1bmN0aW9uIGV2YWxPcHRpb25zVG9GbGFncyhldmFsT3B0aW9ucyl7aWYodHlwZW9mIGV2YWxPcHRpb25zPT1cIm51bWJlclwiKXJldHVybiBldmFsT3B0aW9ucztpZihldmFsT3B0aW9ucz09PXZvaWQgMClyZXR1cm4gMDtsZXR7dHlwZSxzdHJpY3Qsc3RyaXAsY29tcGlsZU9ubHksYmFja3RyYWNlQmFycmllcn09ZXZhbE9wdGlvbnMsZmxhZ3M9MDtyZXR1cm4gdHlwZT09PVwiZ2xvYmFsXCImJihmbGFnc3w9RXZhbEZsYWdzLkpTX0VWQUxfVFlQRV9HTE9CQUwpLHR5cGU9PT1cIm1vZHVsZVwiJiYoZmxhZ3N8PUV2YWxGbGFncy5KU19FVkFMX1RZUEVfTU9EVUxFKSxzdHJpY3QmJihmbGFnc3w9RXZhbEZsYWdzLkpTX0VWQUxfRkxBR19TVFJJQ1QpLHN0cmlwJiYoZmxhZ3N8PUV2YWxGbGFncy5KU19FVkFMX0ZMQUdfU1RSSVApLGNvbXBpbGVPbmx5JiYoZmxhZ3N8PUV2YWxGbGFncy5KU19FVkFMX0ZMQUdfQ09NUElMRV9PTkxZKSxiYWNrdHJhY2VCYXJyaWVyJiYoZmxhZ3N8PUV2YWxGbGFncy5KU19FVkFMX0ZMQUdfQkFDS1RSQUNFX0JBUlJJRVIpLGZsYWdzfWZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXNPcHRpb25zVG9GbGFncyhvcHRpb25zKXtpZih0eXBlb2Ygb3B0aW9ucz09XCJudW1iZXJcIilyZXR1cm4gb3B0aW9ucztpZihvcHRpb25zPT09dm9pZCAwKXJldHVybiAwO2xldHtzdHJpbmdzOmluY2x1ZGVTdHJpbmdzLHN5bWJvbHM6aW5jbHVkZVN5bWJvbHMscXVpY2tqc1ByaXZhdGU6aW5jbHVkZVByaXZhdGUsb25seUVudW1lcmFibGUsbnVtYmVyczppbmNsdWRlTnVtYmVycyxudW1iZXJzQXNTdHJpbmdzfT1vcHRpb25zLGZsYWdzPTA7cmV0dXJuIGluY2x1ZGVTdHJpbmdzJiYoZmxhZ3N8PUdldE93blByb3BlcnR5TmFtZXNGbGFncy5KU19HUE5fU1RSSU5HX01BU0spLGluY2x1ZGVTeW1ib2xzJiYoZmxhZ3N8PUdldE93blByb3BlcnR5TmFtZXNGbGFncy5KU19HUE5fU1lNQk9MX01BU0spLGluY2x1ZGVQcml2YXRlJiYoZmxhZ3N8PUdldE93blByb3BlcnR5TmFtZXNGbGFncy5KU19HUE5fUFJJVkFURV9NQVNLKSxvbmx5RW51bWVyYWJsZSYmKGZsYWdzfD1HZXRPd25Qcm9wZXJ0eU5hbWVzRmxhZ3MuSlNfR1BOX0VOVU1fT05MWSksaW5jbHVkZU51bWJlcnMmJihmbGFnc3w9R2V0T3duUHJvcGVydHlOYW1lc0ZsYWdzLlFUU19HUE5fTlVNQkVSX01BU0spLG51bWJlcnNBc1N0cmluZ3MmJihmbGFnc3w9R2V0T3duUHJvcGVydHlOYW1lc0ZsYWdzLlFUU19TVEFOREFSRF9DT01QTElBTlRfTlVNQkVSKSxmbGFnc31mdW5jdGlvbiBjb25jYXQoLi4udmFsdWVzKXtsZXQgcmVzdWx0PVtdO2ZvcihsZXQgdmFsdWUgb2YgdmFsdWVzKXZhbHVlIT09dm9pZCAwJiYocmVzdWx0PXJlc3VsdC5jb25jYXQodmFsdWUpKTtyZXR1cm4gcmVzdWx0fXZhciBRdWlja0pTSXRlcmF0b3I9Y2xhc3MgZXh0ZW5kcyBVc2luZ0Rpc3Bvc2FibGV7Y29uc3RydWN0b3IoaGFuZGxlLGNvbnRleHQpe3N1cGVyKCk7dGhpcy5oYW5kbGU9aGFuZGxlO3RoaXMuY29udGV4dD1jb250ZXh0O3RoaXMuX2lzRG9uZT0hMTt0aGlzLm93bmVyPWNvbnRleHQucnVudGltZTt9W1N5bWJvbC5pdGVyYXRvcl0oKXtyZXR1cm4gdGhpc31uZXh0KHZhbHVlKXtpZighdGhpcy5hbGl2ZXx8dGhpcy5faXNEb25lKXJldHVybiB7ZG9uZTohMCx2YWx1ZTp2b2lkIDB9O2xldCBuZXh0TWV0aG9kPXRoaXMuX25leHQ/Pyh0aGlzLl9uZXh0PXRoaXMuY29udGV4dC5nZXRQcm9wKHRoaXMuaGFuZGxlLFwibmV4dFwiKSk7cmV0dXJuIHRoaXMuY2FsbEl0ZXJhdG9yTWV0aG9kKG5leHRNZXRob2QsdmFsdWUpfXJldHVybih2YWx1ZSl7aWYoIXRoaXMuYWxpdmUpcmV0dXJuIHtkb25lOiEwLHZhbHVlOnZvaWQgMH07bGV0IHJldHVybk1ldGhvZD10aGlzLmNvbnRleHQuZ2V0UHJvcCh0aGlzLmhhbmRsZSxcInJldHVyblwiKTtpZihyZXR1cm5NZXRob2Q9PT10aGlzLmNvbnRleHQudW5kZWZpbmVkJiZ2YWx1ZT09PXZvaWQgMClyZXR1cm4gdGhpcy5kaXNwb3NlKCkse2RvbmU6ITAsdmFsdWU6dm9pZCAwfTtsZXQgcmVzdWx0PXRoaXMuY2FsbEl0ZXJhdG9yTWV0aG9kKHJldHVybk1ldGhvZCx2YWx1ZSk7cmV0dXJuIHJldHVybk1ldGhvZC5kaXNwb3NlKCksdGhpcy5kaXNwb3NlKCkscmVzdWx0fXRocm93KGUpe2lmKCF0aGlzLmFsaXZlKXJldHVybiB7ZG9uZTohMCx2YWx1ZTp2b2lkIDB9O2xldCBlcnJvckhhbmRsZT1lIGluc3RhbmNlb2YgTGlmZXRpbWU/ZTp0aGlzLmNvbnRleHQubmV3RXJyb3IoZSksdGhyb3dNZXRob2Q9dGhpcy5jb250ZXh0LmdldFByb3AodGhpcy5oYW5kbGUsXCJ0aHJvd1wiKSxyZXN1bHQ9dGhpcy5jYWxsSXRlcmF0b3JNZXRob2QodGhyb3dNZXRob2QsZSk7cmV0dXJuIGVycm9ySGFuZGxlLmFsaXZlJiZlcnJvckhhbmRsZS5kaXNwb3NlKCksdGhyb3dNZXRob2QuZGlzcG9zZSgpLHRoaXMuZGlzcG9zZSgpLHJlc3VsdH1nZXQgYWxpdmUoKXtyZXR1cm4gdGhpcy5oYW5kbGUuYWxpdmV9ZGlzcG9zZSgpe3RoaXMuX2lzRG9uZT0hMCx0aGlzLmhhbmRsZS5kaXNwb3NlKCksdGhpcy5fbmV4dD8uZGlzcG9zZSgpO31jYWxsSXRlcmF0b3JNZXRob2QobWV0aG9kLGlucHV0KXtsZXQgY2FsbFJlc3VsdD1pbnB1dD90aGlzLmNvbnRleHQuY2FsbEZ1bmN0aW9uKG1ldGhvZCx0aGlzLmhhbmRsZSxpbnB1dCk6dGhpcy5jb250ZXh0LmNhbGxGdW5jdGlvbihtZXRob2QsdGhpcy5oYW5kbGUpO2lmKGNhbGxSZXN1bHQuZXJyb3IpcmV0dXJuIHRoaXMuZGlzcG9zZSgpLHt2YWx1ZTpjYWxsUmVzdWx0fTtsZXQgZG9uZT10aGlzLmNvbnRleHQuZ2V0UHJvcChjYWxsUmVzdWx0LnZhbHVlLFwiZG9uZVwiKS5jb25zdW1lKHY9PnRoaXMuY29udGV4dC5kdW1wKHYpKTtpZihkb25lKXJldHVybiBjYWxsUmVzdWx0LnZhbHVlLmRpc3Bvc2UoKSx0aGlzLmRpc3Bvc2UoKSx7ZG9uZSx2YWx1ZTp2b2lkIDB9O2xldCB2YWx1ZT10aGlzLmNvbnRleHQuZ2V0UHJvcChjYWxsUmVzdWx0LnZhbHVlLFwidmFsdWVcIik7cmV0dXJuIGNhbGxSZXN1bHQudmFsdWUuZGlzcG9zZSgpLHt2YWx1ZTpEaXNwb3NhYmxlUmVzdWx0LnN1Y2Nlc3ModmFsdWUpLGRvbmV9fX07dmFyIENvbnRleHRNZW1vcnk9Y2xhc3MgZXh0ZW5kcyBNb2R1bGVNZW1vcnl7Y29uc3RydWN0b3IoYXJncyl7c3VwZXIoYXJncy5tb2R1bGUpO3RoaXMuc2NvcGU9bmV3IFNjb3BlO3RoaXMuY29weUpTVmFsdWU9cHRyPT50aGlzLmZmaS5RVFNfRHVwVmFsdWVQb2ludGVyKHRoaXMuY3R4LnZhbHVlLHB0cik7dGhpcy5mcmVlSlNWYWx1ZT1wdHI9Pnt0aGlzLmZmaS5RVFNfRnJlZVZhbHVlUG9pbnRlcih0aGlzLmN0eC52YWx1ZSxwdHIpO307YXJncy5vd25lZExpZmV0aW1lcz8uZm9yRWFjaChsaWZldGltZT0+dGhpcy5zY29wZS5tYW5hZ2UobGlmZXRpbWUpKSx0aGlzLm93bmVyPWFyZ3Mub3duZXIsdGhpcy5tb2R1bGU9YXJncy5tb2R1bGUsdGhpcy5mZmk9YXJncy5mZmksdGhpcy5ydD1hcmdzLnJ0LHRoaXMuY3R4PXRoaXMuc2NvcGUubWFuYWdlKGFyZ3MuY3R4KTt9Z2V0IGFsaXZlKCl7cmV0dXJuIHRoaXMuc2NvcGUuYWxpdmV9ZGlzcG9zZSgpe3JldHVybiB0aGlzLnNjb3BlLmRpc3Bvc2UoKX1bU3ltYm9sLmRpc3Bvc2VdKCl7cmV0dXJuIHRoaXMuZGlzcG9zZSgpfW1hbmFnZShsaWZldGltZSl7cmV0dXJuIHRoaXMuc2NvcGUubWFuYWdlKGxpZmV0aW1lKX1jb25zdW1lSlNDaGFyUG9pbnRlcihwdHIpe2xldCBzdHI9dGhpcy5tb2R1bGUuVVRGOFRvU3RyaW5nKHB0cik7cmV0dXJuIHRoaXMuZmZpLlFUU19GcmVlQ1N0cmluZyh0aGlzLmN0eC52YWx1ZSxwdHIpLHN0cn1oZWFwVmFsdWVIYW5kbGUocHRyKXtyZXR1cm4gbmV3IExpZmV0aW1lKHB0cix0aGlzLmNvcHlKU1ZhbHVlLHRoaXMuZnJlZUpTVmFsdWUsdGhpcy5vd25lcil9c3RhdGljSGVhcFZhbHVlSGFuZGxlKHB0cil7cmV0dXJuIHRoaXMubWFuYWdlKHRoaXMuaGVhcFZhbHVlSGFuZGxlKHB0cikpLG5ldyBTdGF0aWNMaWZldGltZShwdHIsdGhpcy5vd25lcil9fSxRdWlja0pTQ29udGV4dD1jbGFzcyBleHRlbmRzIFVzaW5nRGlzcG9zYWJsZXtjb25zdHJ1Y3RvcihhcmdzKXtzdXBlcigpO3RoaXMuX3VuZGVmaW5lZD12b2lkIDA7dGhpcy5fbnVsbD12b2lkIDA7dGhpcy5fZmFsc2U9dm9pZCAwO3RoaXMuX3RydWU9dm9pZCAwO3RoaXMuX2dsb2JhbD12b2lkIDA7dGhpcy5fQmlnSW50PXZvaWQgMDt0aGlzLl9TeW1ib2w9dm9pZCAwO3RoaXMuX1N5bWJvbEl0ZXJhdG9yPXZvaWQgMDt0aGlzLl9TeW1ib2xBc3luY0l0ZXJhdG9yPXZvaWQgMDt0aGlzLmZuTmV4dElkPS0zMjc2ODt0aGlzLmZuTWFwcz1uZXcgTWFwO3RoaXMuY1RvSG9zdENhbGxiYWNrcz17Y2FsbEZ1bmN0aW9uOihjdHgsdGhpc19wdHIsYXJnYyxhcmd2LGZuX2lkKT0+e2lmKGN0eCE9PXRoaXMuY3R4LnZhbHVlKXRocm93IG5ldyBFcnJvcihcIlF1aWNrSlNDb250ZXh0IGluc3RhbmNlIHJlY2VpdmVkIEMgLT4gSlMgY2FsbCB3aXRoIG1pc21hdGNoZWQgY3R4XCIpO2xldCBmbj10aGlzLmdldEZ1bmN0aW9uKGZuX2lkKTtpZighZm4pdGhyb3cgbmV3IEVycm9yKGBRdWlja0pTQ29udGV4dCBoYWQgbm8gY2FsbGJhY2sgd2l0aCBpZCAke2ZuX2lkfWApO3JldHVybiBTY29wZS53aXRoU2NvcGVNYXliZUFzeW5jKHRoaXMsZnVuY3Rpb24qKGF3YWl0ZWQsc2NvcGUpe2xldCB0aGlzSGFuZGxlPXNjb3BlLm1hbmFnZShuZXcgV2Vha0xpZmV0aW1lKHRoaXNfcHRyLHRoaXMubWVtb3J5LmNvcHlKU1ZhbHVlLHRoaXMubWVtb3J5LmZyZWVKU1ZhbHVlLHRoaXMucnVudGltZSkpLGFyZ0hhbmRsZXM9bmV3IEFycmF5KGFyZ2MpO2ZvcihsZXQgaT0wO2k8YXJnYztpKyspe2xldCBwdHI9dGhpcy5mZmkuUVRTX0FyZ3ZHZXRKU1ZhbHVlQ29uc3RQb2ludGVyKGFyZ3YsaSk7YXJnSGFuZGxlc1tpXT1zY29wZS5tYW5hZ2UobmV3IFdlYWtMaWZldGltZShwdHIsdGhpcy5tZW1vcnkuY29weUpTVmFsdWUsdGhpcy5tZW1vcnkuZnJlZUpTVmFsdWUsdGhpcy5ydW50aW1lKSk7fXRyeXtsZXQgcmVzdWx0PXlpZWxkKmF3YWl0ZWQoZm4uYXBwbHkodGhpc0hhbmRsZSxhcmdIYW5kbGVzKSk7aWYocmVzdWx0KXtpZihcImVycm9yXCJpbiByZXN1bHQmJnJlc3VsdC5lcnJvcil0aHJvdyB0aGlzLnJ1bnRpbWUuZGVidWdMb2coXCJ0aHJvdyBlcnJvclwiLHJlc3VsdC5lcnJvcikscmVzdWx0LmVycm9yO2xldCBoYW5kbGU9c2NvcGUubWFuYWdlKHJlc3VsdCBpbnN0YW5jZW9mIExpZmV0aW1lP3Jlc3VsdDpyZXN1bHQudmFsdWUpO3JldHVybiB0aGlzLmZmaS5RVFNfRHVwVmFsdWVQb2ludGVyKHRoaXMuY3R4LnZhbHVlLGhhbmRsZS52YWx1ZSl9cmV0dXJuIDB9Y2F0Y2goZXJyb3Ipe3JldHVybiB0aGlzLmVycm9yVG9IYW5kbGUoZXJyb3IpLmNvbnN1bWUoZXJyb3JIYW5kbGU9PnRoaXMuZmZpLlFUU19UaHJvdyh0aGlzLmN0eC52YWx1ZSxlcnJvckhhbmRsZS52YWx1ZSkpfX0pfX07dGhpcy5ydW50aW1lPWFyZ3MucnVudGltZSx0aGlzLm1vZHVsZT1hcmdzLm1vZHVsZSx0aGlzLmZmaT1hcmdzLmZmaSx0aGlzLnJ0PWFyZ3MucnQsdGhpcy5jdHg9YXJncy5jdHgsdGhpcy5tZW1vcnk9bmV3IENvbnRleHRNZW1vcnkoey4uLmFyZ3Msb3duZXI6dGhpcy5ydW50aW1lfSksYXJncy5jYWxsYmFja3Muc2V0Q29udGV4dENhbGxiYWNrcyh0aGlzLmN0eC52YWx1ZSx0aGlzLmNUb0hvc3RDYWxsYmFja3MpLHRoaXMuZHVtcD10aGlzLmR1bXAuYmluZCh0aGlzKSx0aGlzLmdldFN0cmluZz10aGlzLmdldFN0cmluZy5iaW5kKHRoaXMpLHRoaXMuZ2V0TnVtYmVyPXRoaXMuZ2V0TnVtYmVyLmJpbmQodGhpcyksdGhpcy5yZXNvbHZlUHJvbWlzZT10aGlzLnJlc29sdmVQcm9taXNlLmJpbmQodGhpcyksdGhpcy51aW50MzJPdXQ9dGhpcy5tZW1vcnkubWFuYWdlKHRoaXMubWVtb3J5Lm5ld1R5cGVkQXJyYXkoVWludDMyQXJyYXksMSkpO31nZXQgYWxpdmUoKXtyZXR1cm4gdGhpcy5tZW1vcnkuYWxpdmV9ZGlzcG9zZSgpe3RoaXMubWVtb3J5LmRpc3Bvc2UoKTt9Z2V0IHVuZGVmaW5lZCgpe2lmKHRoaXMuX3VuZGVmaW5lZClyZXR1cm4gdGhpcy5fdW5kZWZpbmVkO2xldCBwdHI9dGhpcy5mZmkuUVRTX0dldFVuZGVmaW5lZCgpO3JldHVybiB0aGlzLl91bmRlZmluZWQ9bmV3IFN0YXRpY0xpZmV0aW1lKHB0cil9Z2V0IG51bGwoKXtpZih0aGlzLl9udWxsKXJldHVybiB0aGlzLl9udWxsO2xldCBwdHI9dGhpcy5mZmkuUVRTX0dldE51bGwoKTtyZXR1cm4gdGhpcy5fbnVsbD1uZXcgU3RhdGljTGlmZXRpbWUocHRyKX1nZXQgdHJ1ZSgpe2lmKHRoaXMuX3RydWUpcmV0dXJuIHRoaXMuX3RydWU7bGV0IHB0cj10aGlzLmZmaS5RVFNfR2V0VHJ1ZSgpO3JldHVybiB0aGlzLl90cnVlPW5ldyBTdGF0aWNMaWZldGltZShwdHIpfWdldCBmYWxzZSgpe2lmKHRoaXMuX2ZhbHNlKXJldHVybiB0aGlzLl9mYWxzZTtsZXQgcHRyPXRoaXMuZmZpLlFUU19HZXRGYWxzZSgpO3JldHVybiB0aGlzLl9mYWxzZT1uZXcgU3RhdGljTGlmZXRpbWUocHRyKX1nZXQgZ2xvYmFsKCl7aWYodGhpcy5fZ2xvYmFsKXJldHVybiB0aGlzLl9nbG9iYWw7bGV0IHB0cj10aGlzLmZmaS5RVFNfR2V0R2xvYmFsT2JqZWN0KHRoaXMuY3R4LnZhbHVlKTtyZXR1cm4gdGhpcy5fZ2xvYmFsPXRoaXMubWVtb3J5LnN0YXRpY0hlYXBWYWx1ZUhhbmRsZShwdHIpLHRoaXMuX2dsb2JhbH1uZXdOdW1iZXIobnVtKXtyZXR1cm4gdGhpcy5tZW1vcnkuaGVhcFZhbHVlSGFuZGxlKHRoaXMuZmZpLlFUU19OZXdGbG9hdDY0KHRoaXMuY3R4LnZhbHVlLG51bSkpfW5ld1N0cmluZyhzdHIpe2xldCBwdHI9dGhpcy5tZW1vcnkubmV3SGVhcENoYXJQb2ludGVyKHN0cikuY29uc3VtZShjaGFySGFuZGxlPT50aGlzLmZmaS5RVFNfTmV3U3RyaW5nKHRoaXMuY3R4LnZhbHVlLGNoYXJIYW5kbGUudmFsdWUucHRyKSk7cmV0dXJuIHRoaXMubWVtb3J5LmhlYXBWYWx1ZUhhbmRsZShwdHIpfW5ld1VuaXF1ZVN5bWJvbChkZXNjcmlwdGlvbil7bGV0IGtleT0odHlwZW9mIGRlc2NyaXB0aW9uPT1cInN5bWJvbFwiP2Rlc2NyaXB0aW9uLmRlc2NyaXB0aW9uOmRlc2NyaXB0aW9uKT8/XCJcIixwdHI9dGhpcy5tZW1vcnkubmV3SGVhcENoYXJQb2ludGVyKGtleSkuY29uc3VtZShjaGFySGFuZGxlPT50aGlzLmZmaS5RVFNfTmV3U3ltYm9sKHRoaXMuY3R4LnZhbHVlLGNoYXJIYW5kbGUudmFsdWUucHRyLDApKTtyZXR1cm4gdGhpcy5tZW1vcnkuaGVhcFZhbHVlSGFuZGxlKHB0cil9bmV3U3ltYm9sRm9yKGtleSl7bGV0IGRlc2NyaXB0aW9uPSh0eXBlb2Yga2V5PT1cInN5bWJvbFwiP2tleS5kZXNjcmlwdGlvbjprZXkpPz9cIlwiLHB0cj10aGlzLm1lbW9yeS5uZXdIZWFwQ2hhclBvaW50ZXIoZGVzY3JpcHRpb24pLmNvbnN1bWUoY2hhckhhbmRsZT0+dGhpcy5mZmkuUVRTX05ld1N5bWJvbCh0aGlzLmN0eC52YWx1ZSxjaGFySGFuZGxlLnZhbHVlLnB0ciwxKSk7cmV0dXJuIHRoaXMubWVtb3J5LmhlYXBWYWx1ZUhhbmRsZShwdHIpfWdldFdlbGxLbm93blN5bWJvbChuYW1lKXtyZXR1cm4gdGhpcy5fU3ltYm9sPz8odGhpcy5fU3ltYm9sPXRoaXMubWVtb3J5Lm1hbmFnZSh0aGlzLmdldFByb3AodGhpcy5nbG9iYWwsXCJTeW1ib2xcIikpKSx0aGlzLmdldFByb3AodGhpcy5fU3ltYm9sLG5hbWUpfW5ld0JpZ0ludChudW0pe2lmKCF0aGlzLl9CaWdJbnQpe2xldCBiaWdJbnRIYW5kbGUyPXRoaXMuZ2V0UHJvcCh0aGlzLmdsb2JhbCxcIkJpZ0ludFwiKTt0aGlzLm1lbW9yeS5tYW5hZ2UoYmlnSW50SGFuZGxlMiksdGhpcy5fQmlnSW50PW5ldyBTdGF0aWNMaWZldGltZShiaWdJbnRIYW5kbGUyLnZhbHVlLHRoaXMucnVudGltZSk7fWxldCBiaWdJbnRIYW5kbGU9dGhpcy5fQmlnSW50LGFzU3RyaW5nPVN0cmluZyhudW0pO3JldHVybiB0aGlzLm5ld1N0cmluZyhhc1N0cmluZykuY29uc3VtZShoYW5kbGU9PnRoaXMudW53cmFwUmVzdWx0KHRoaXMuY2FsbEZ1bmN0aW9uKGJpZ0ludEhhbmRsZSx0aGlzLnVuZGVmaW5lZCxoYW5kbGUpKSl9bmV3T2JqZWN0KHByb3RvdHlwZSl7cHJvdG90eXBlJiZ0aGlzLnJ1bnRpbWUuYXNzZXJ0T3duZWQocHJvdG90eXBlKTtsZXQgcHRyPXByb3RvdHlwZT90aGlzLmZmaS5RVFNfTmV3T2JqZWN0UHJvdG8odGhpcy5jdHgudmFsdWUscHJvdG90eXBlLnZhbHVlKTp0aGlzLmZmaS5RVFNfTmV3T2JqZWN0KHRoaXMuY3R4LnZhbHVlKTtyZXR1cm4gdGhpcy5tZW1vcnkuaGVhcFZhbHVlSGFuZGxlKHB0cil9bmV3QXJyYXkoKXtsZXQgcHRyPXRoaXMuZmZpLlFUU19OZXdBcnJheSh0aGlzLmN0eC52YWx1ZSk7cmV0dXJuIHRoaXMubWVtb3J5LmhlYXBWYWx1ZUhhbmRsZShwdHIpfW5ld0FycmF5QnVmZmVyKGJ1ZmZlcil7bGV0IGFycmF5PW5ldyBVaW50OEFycmF5KGJ1ZmZlciksaGFuZGxlPXRoaXMubWVtb3J5Lm5ld0hlYXBCdWZmZXJQb2ludGVyKGFycmF5KSxwdHI9dGhpcy5mZmkuUVRTX05ld0FycmF5QnVmZmVyKHRoaXMuY3R4LnZhbHVlLGhhbmRsZS52YWx1ZS5wb2ludGVyLGFycmF5Lmxlbmd0aCk7cmV0dXJuIHRoaXMubWVtb3J5LmhlYXBWYWx1ZUhhbmRsZShwdHIpfW5ld1Byb21pc2UodmFsdWUpe2xldCBkZWZlcnJlZFByb21pc2U9U2NvcGUud2l0aFNjb3BlKHNjb3BlPT57bGV0IG11dGFibGVQb2ludGVyQXJyYXk9c2NvcGUubWFuYWdlKHRoaXMubWVtb3J5Lm5ld011dGFibGVQb2ludGVyQXJyYXkoMikpLHByb21pc2VQdHI9dGhpcy5mZmkuUVRTX05ld1Byb21pc2VDYXBhYmlsaXR5KHRoaXMuY3R4LnZhbHVlLG11dGFibGVQb2ludGVyQXJyYXkudmFsdWUucHRyKSxwcm9taXNlSGFuZGxlPXRoaXMubWVtb3J5LmhlYXBWYWx1ZUhhbmRsZShwcm9taXNlUHRyKSxbcmVzb2x2ZUhhbmRsZSxyZWplY3RIYW5kbGVdPUFycmF5LmZyb20obXV0YWJsZVBvaW50ZXJBcnJheS52YWx1ZS50eXBlZEFycmF5KS5tYXAoanN2YWx1ZVB0cj0+dGhpcy5tZW1vcnkuaGVhcFZhbHVlSGFuZGxlKGpzdmFsdWVQdHIpKTtyZXR1cm4gbmV3IFF1aWNrSlNEZWZlcnJlZFByb21pc2Uoe2NvbnRleHQ6dGhpcyxwcm9taXNlSGFuZGxlLHJlc29sdmVIYW5kbGUscmVqZWN0SGFuZGxlfSl9KTtyZXR1cm4gdmFsdWUmJnR5cGVvZiB2YWx1ZT09XCJmdW5jdGlvblwiJiYodmFsdWU9bmV3IFByb21pc2UodmFsdWUpKSx2YWx1ZSYmUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKGRlZmVycmVkUHJvbWlzZS5yZXNvbHZlLGVycm9yPT5lcnJvciBpbnN0YW5jZW9mIExpZmV0aW1lP2RlZmVycmVkUHJvbWlzZS5yZWplY3QoZXJyb3IpOnRoaXMubmV3RXJyb3IoZXJyb3IpLmNvbnN1bWUoZGVmZXJyZWRQcm9taXNlLnJlamVjdCkpLGRlZmVycmVkUHJvbWlzZX1uZXdGdW5jdGlvbihuYW1lLGZuKXtsZXQgZm5JZD0rK3RoaXMuZm5OZXh0SWQ7cmV0dXJuIHRoaXMuc2V0RnVuY3Rpb24oZm5JZCxmbiksdGhpcy5tZW1vcnkuaGVhcFZhbHVlSGFuZGxlKHRoaXMuZmZpLlFUU19OZXdGdW5jdGlvbih0aGlzLmN0eC52YWx1ZSxmbklkLG5hbWUpKX1uZXdFcnJvcihlcnJvcil7bGV0IGVycm9ySGFuZGxlPXRoaXMubWVtb3J5LmhlYXBWYWx1ZUhhbmRsZSh0aGlzLmZmaS5RVFNfTmV3RXJyb3IodGhpcy5jdHgudmFsdWUpKTtyZXR1cm4gZXJyb3ImJnR5cGVvZiBlcnJvcj09XCJvYmplY3RcIj8oZXJyb3IubmFtZSE9PXZvaWQgMCYmdGhpcy5uZXdTdHJpbmcoZXJyb3IubmFtZSkuY29uc3VtZShoYW5kbGU9PnRoaXMuc2V0UHJvcChlcnJvckhhbmRsZSxcIm5hbWVcIixoYW5kbGUpKSxlcnJvci5tZXNzYWdlIT09dm9pZCAwJiZ0aGlzLm5ld1N0cmluZyhlcnJvci5tZXNzYWdlKS5jb25zdW1lKGhhbmRsZT0+dGhpcy5zZXRQcm9wKGVycm9ySGFuZGxlLFwibWVzc2FnZVwiLGhhbmRsZSkpKTp0eXBlb2YgZXJyb3I9PVwic3RyaW5nXCI/dGhpcy5uZXdTdHJpbmcoZXJyb3IpLmNvbnN1bWUoaGFuZGxlPT50aGlzLnNldFByb3AoZXJyb3JIYW5kbGUsXCJtZXNzYWdlXCIsaGFuZGxlKSk6ZXJyb3IhPT12b2lkIDAmJnRoaXMubmV3U3RyaW5nKFN0cmluZyhlcnJvcikpLmNvbnN1bWUoaGFuZGxlPT50aGlzLnNldFByb3AoZXJyb3JIYW5kbGUsXCJtZXNzYWdlXCIsaGFuZGxlKSksZXJyb3JIYW5kbGV9dHlwZW9mKGhhbmRsZSl7cmV0dXJuIHRoaXMucnVudGltZS5hc3NlcnRPd25lZChoYW5kbGUpLHRoaXMubWVtb3J5LmNvbnN1bWVIZWFwQ2hhclBvaW50ZXIodGhpcy5mZmkuUVRTX1R5cGVvZih0aGlzLmN0eC52YWx1ZSxoYW5kbGUudmFsdWUpKX1nZXROdW1iZXIoaGFuZGxlKXtyZXR1cm4gdGhpcy5ydW50aW1lLmFzc2VydE93bmVkKGhhbmRsZSksdGhpcy5mZmkuUVRTX0dldEZsb2F0NjQodGhpcy5jdHgudmFsdWUsaGFuZGxlLnZhbHVlKX1nZXRTdHJpbmcoaGFuZGxlKXtyZXR1cm4gdGhpcy5ydW50aW1lLmFzc2VydE93bmVkKGhhbmRsZSksdGhpcy5tZW1vcnkuY29uc3VtZUpTQ2hhclBvaW50ZXIodGhpcy5mZmkuUVRTX0dldFN0cmluZyh0aGlzLmN0eC52YWx1ZSxoYW5kbGUudmFsdWUpKX1nZXRTeW1ib2woaGFuZGxlKXt0aGlzLnJ1bnRpbWUuYXNzZXJ0T3duZWQoaGFuZGxlKTtsZXQga2V5PXRoaXMubWVtb3J5LmNvbnN1bWVKU0NoYXJQb2ludGVyKHRoaXMuZmZpLlFUU19HZXRTeW1ib2xEZXNjcmlwdGlvbk9yS2V5KHRoaXMuY3R4LnZhbHVlLGhhbmRsZS52YWx1ZSkpO3JldHVybiB0aGlzLmZmaS5RVFNfSXNHbG9iYWxTeW1ib2wodGhpcy5jdHgudmFsdWUsaGFuZGxlLnZhbHVlKT9TeW1ib2wuZm9yKGtleSk6U3ltYm9sKGtleSl9Z2V0QmlnSW50KGhhbmRsZSl7dGhpcy5ydW50aW1lLmFzc2VydE93bmVkKGhhbmRsZSk7bGV0IGFzU3RyaW5nPXRoaXMuZ2V0U3RyaW5nKGhhbmRsZSk7cmV0dXJuIEJpZ0ludChhc1N0cmluZyl9Z2V0QXJyYXlCdWZmZXIoaGFuZGxlKXt0aGlzLnJ1bnRpbWUuYXNzZXJ0T3duZWQoaGFuZGxlKTtsZXQgbGVuPXRoaXMuZmZpLlFUU19HZXRBcnJheUJ1ZmZlckxlbmd0aCh0aGlzLmN0eC52YWx1ZSxoYW5kbGUudmFsdWUpLHB0cj10aGlzLmZmaS5RVFNfR2V0QXJyYXlCdWZmZXIodGhpcy5jdHgudmFsdWUsaGFuZGxlLnZhbHVlKTtpZighcHRyKXRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGFsbG9jYXRlIG1lbW9yeSB0byBnZXQgQXJyYXlCdWZmZXJcIik7cmV0dXJuIG5ldyBMaWZldGltZSh0aGlzLm1vZHVsZS5IRUFQVTguc3ViYXJyYXkocHRyLHB0citsZW4pLHZvaWQgMCwoKT0+dGhpcy5tb2R1bGUuX2ZyZWUocHRyKSl9Z2V0UHJvbWlzZVN0YXRlKGhhbmRsZSl7dGhpcy5ydW50aW1lLmFzc2VydE93bmVkKGhhbmRsZSk7bGV0IHN0YXRlPXRoaXMuZmZpLlFUU19Qcm9taXNlU3RhdGUodGhpcy5jdHgudmFsdWUsaGFuZGxlLnZhbHVlKTtpZihzdGF0ZTwwKXJldHVybiB7dHlwZTpcImZ1bGZpbGxlZFwiLHZhbHVlOmhhbmRsZSxub3RBUHJvbWlzZTohMH07aWYoc3RhdGU9PT1KU1Byb21pc2VTdGF0ZUVudW0uUGVuZGluZylyZXR1cm4ge3R5cGU6XCJwZW5kaW5nXCIsZ2V0IGVycm9yKCl7cmV0dXJuIG5ldyBRdWlja0pTUHJvbWlzZVBlbmRpbmcoXCJDYW5ub3QgdW53cmFwIGEgcGVuZGluZyBwcm9taXNlXCIpfX07bGV0IHB0cj10aGlzLmZmaS5RVFNfUHJvbWlzZVJlc3VsdCh0aGlzLmN0eC52YWx1ZSxoYW5kbGUudmFsdWUpLHJlc3VsdD10aGlzLm1lbW9yeS5oZWFwVmFsdWVIYW5kbGUocHRyKTtpZihzdGF0ZT09PUpTUHJvbWlzZVN0YXRlRW51bS5GdWxmaWxsZWQpcmV0dXJuIHt0eXBlOlwiZnVsZmlsbGVkXCIsdmFsdWU6cmVzdWx0fTtpZihzdGF0ZT09PUpTUHJvbWlzZVN0YXRlRW51bS5SZWplY3RlZClyZXR1cm4ge3R5cGU6XCJyZWplY3RlZFwiLGVycm9yOnJlc3VsdH07dGhyb3cgcmVzdWx0LmRpc3Bvc2UoKSxuZXcgRXJyb3IoYFVua25vd24gSlNQcm9taXNlU3RhdGVFbnVtOiAke3N0YXRlfWApfXJlc29sdmVQcm9taXNlKHByb21pc2VMaWtlSGFuZGxlKXt0aGlzLnJ1bnRpbWUuYXNzZXJ0T3duZWQocHJvbWlzZUxpa2VIYW5kbGUpO2xldCB2bVJlc29sdmVSZXN1bHQ9U2NvcGUud2l0aFNjb3BlKHNjb3BlPT57bGV0IHZtUHJvbWlzZT1zY29wZS5tYW5hZ2UodGhpcy5nZXRQcm9wKHRoaXMuZ2xvYmFsLFwiUHJvbWlzZVwiKSksdm1Qcm9taXNlUmVzb2x2ZT1zY29wZS5tYW5hZ2UodGhpcy5nZXRQcm9wKHZtUHJvbWlzZSxcInJlc29sdmVcIikpO3JldHVybiB0aGlzLmNhbGxGdW5jdGlvbih2bVByb21pc2VSZXNvbHZlLHZtUHJvbWlzZSxwcm9taXNlTGlrZUhhbmRsZSl9KTtyZXR1cm4gdm1SZXNvbHZlUmVzdWx0LmVycm9yP1Byb21pc2UucmVzb2x2ZSh2bVJlc29sdmVSZXN1bHQpOm5ldyBQcm9taXNlKHJlc29sdmU9PntTY29wZS53aXRoU2NvcGUoc2NvcGU9PntsZXQgcmVzb2x2ZUhhbmRsZT1zY29wZS5tYW5hZ2UodGhpcy5uZXdGdW5jdGlvbihcInJlc29sdmVcIix2YWx1ZT0+e3Jlc29sdmUodGhpcy5zdWNjZXNzKHZhbHVlJiZ2YWx1ZS5kdXAoKSkpO30pKSxyZWplY3RIYW5kbGU9c2NvcGUubWFuYWdlKHRoaXMubmV3RnVuY3Rpb24oXCJyZWplY3RcIixlcnJvcj0+e3Jlc29sdmUodGhpcy5mYWlsKGVycm9yJiZlcnJvci5kdXAoKSkpO30pKSxwcm9taXNlSGFuZGxlPXNjb3BlLm1hbmFnZSh2bVJlc29sdmVSZXN1bHQudmFsdWUpLHByb21pc2VUaGVuSGFuZGxlPXNjb3BlLm1hbmFnZSh0aGlzLmdldFByb3AocHJvbWlzZUhhbmRsZSxcInRoZW5cIikpO3RoaXMuY2FsbEZ1bmN0aW9uKHByb21pc2VUaGVuSGFuZGxlLHByb21pc2VIYW5kbGUscmVzb2x2ZUhhbmRsZSxyZWplY3RIYW5kbGUpLnVud3JhcCgpLmRpc3Bvc2UoKTt9KTt9KX1pc0VxdWFsKGEsYixlcXVhbGl0eVR5cGU9SXNFcXVhbE9wLklzU3RyaWN0bHlFcXVhbCl7aWYoYT09PWIpcmV0dXJuICEwO3RoaXMucnVudGltZS5hc3NlcnRPd25lZChhKSx0aGlzLnJ1bnRpbWUuYXNzZXJ0T3duZWQoYik7bGV0IHJlc3VsdD10aGlzLmZmaS5RVFNfSXNFcXVhbCh0aGlzLmN0eC52YWx1ZSxhLnZhbHVlLGIudmFsdWUsZXF1YWxpdHlUeXBlKTtpZihyZXN1bHQ9PT0tMSl0aHJvdyBuZXcgUXVpY2tKU05vdEltcGxlbWVudGVkKFwiV0FTTSB2YXJpYW50IGRvZXMgbm90IGV4cG9zZSBlcXVhbGl0eVwiKTtyZXR1cm4gISFyZXN1bHR9ZXEoaGFuZGxlLG90aGVyKXtyZXR1cm4gdGhpcy5pc0VxdWFsKGhhbmRsZSxvdGhlcixJc0VxdWFsT3AuSXNTdHJpY3RseUVxdWFsKX1zYW1lVmFsdWUoaGFuZGxlLG90aGVyKXtyZXR1cm4gdGhpcy5pc0VxdWFsKGhhbmRsZSxvdGhlcixJc0VxdWFsT3AuSXNTYW1lVmFsdWUpfXNhbWVWYWx1ZVplcm8oaGFuZGxlLG90aGVyKXtyZXR1cm4gdGhpcy5pc0VxdWFsKGhhbmRsZSxvdGhlcixJc0VxdWFsT3AuSXNTYW1lVmFsdWVaZXJvKX1nZXRQcm9wKGhhbmRsZSxrZXkpe3RoaXMucnVudGltZS5hc3NlcnRPd25lZChoYW5kbGUpO2xldCBwdHI7cmV0dXJuIHR5cGVvZiBrZXk9PVwibnVtYmVyXCImJmtleT49MD9wdHI9dGhpcy5mZmkuUVRTX0dldFByb3BOdW1iZXIodGhpcy5jdHgudmFsdWUsaGFuZGxlLnZhbHVlLGtleSk6cHRyPXRoaXMuYm9ycm93UHJvcGVydHlLZXkoa2V5KS5jb25zdW1lKHF1aWNrSlNLZXk9PnRoaXMuZmZpLlFUU19HZXRQcm9wKHRoaXMuY3R4LnZhbHVlLGhhbmRsZS52YWx1ZSxxdWlja0pTS2V5LnZhbHVlKSksdGhpcy5tZW1vcnkuaGVhcFZhbHVlSGFuZGxlKHB0cil9Z2V0TGVuZ3RoKGhhbmRsZSl7aWYodGhpcy5ydW50aW1lLmFzc2VydE93bmVkKGhhbmRsZSksISh0aGlzLmZmaS5RVFNfR2V0TGVuZ3RoKHRoaXMuY3R4LnZhbHVlLHRoaXMudWludDMyT3V0LnZhbHVlLnB0cixoYW5kbGUudmFsdWUpPDApKXJldHVybiB0aGlzLnVpbnQzMk91dC52YWx1ZS50eXBlZEFycmF5WzBdfWdldE93blByb3BlcnR5TmFtZXMoaGFuZGxlLG9wdGlvbnM9e3N0cmluZ3M6ITAsbnVtYmVyc0FzU3RyaW5nczohMH0pe3RoaXMucnVudGltZS5hc3NlcnRPd25lZChoYW5kbGUpLGhhbmRsZS52YWx1ZTtsZXQgZmxhZ3M9Z2V0T3duUHJvcGVydHlOYW1lc09wdGlvbnNUb0ZsYWdzKG9wdGlvbnMpO2lmKGZsYWdzPT09MCl0aHJvdyBuZXcgUXVpY2tKU0VtcHR5R2V0T3duUHJvcGVydHlOYW1lcyhcIk5vIG9wdGlvbnMgc2V0LCB3aWxsIHJldHVybiBhbiBlbXB0eSBhcnJheVwiKTtyZXR1cm4gU2NvcGUud2l0aFNjb3BlKHNjb3BlPT57bGV0IG91dFB0cj1zY29wZS5tYW5hZ2UodGhpcy5tZW1vcnkubmV3TXV0YWJsZVBvaW50ZXJBcnJheSgxKSksZXJyb3JQdHI9dGhpcy5mZmkuUVRTX0dldE93blByb3BlcnR5TmFtZXModGhpcy5jdHgudmFsdWUsb3V0UHRyLnZhbHVlLnB0cix0aGlzLnVpbnQzMk91dC52YWx1ZS5wdHIsaGFuZGxlLnZhbHVlLGZsYWdzKTtpZihlcnJvclB0cilyZXR1cm4gdGhpcy5mYWlsKHRoaXMubWVtb3J5LmhlYXBWYWx1ZUhhbmRsZShlcnJvclB0cikpO2xldCBsZW49dGhpcy51aW50MzJPdXQudmFsdWUudHlwZWRBcnJheVswXSxwdHI9b3V0UHRyLnZhbHVlLnR5cGVkQXJyYXlbMF0scG9pbnRlckFycmF5PW5ldyBVaW50MzJBcnJheSh0aGlzLm1vZHVsZS5IRUFQOC5idWZmZXIscHRyLGxlbiksaGFuZGxlcz1BcnJheS5mcm9tKHBvaW50ZXJBcnJheSkubWFwKHB0cjI9PnRoaXMubWVtb3J5LmhlYXBWYWx1ZUhhbmRsZShwdHIyKSk7cmV0dXJuIHRoaXMuZmZpLlFUU19GcmVlVm9pZFBvaW50ZXIodGhpcy5jdHgudmFsdWUscHRyKSx0aGlzLnN1Y2Nlc3MoY3JlYXRlRGlzcG9zYWJsZUFycmF5KGhhbmRsZXMpKX0pfWdldEl0ZXJhdG9yKGl0ZXJhYmxlSGFuZGxlKXtsZXQgU3ltYm9sSXRlcmF0b3I9dGhpcy5fU3ltYm9sSXRlcmF0b3I/Pyh0aGlzLl9TeW1ib2xJdGVyYXRvcj10aGlzLm1lbW9yeS5tYW5hZ2UodGhpcy5nZXRXZWxsS25vd25TeW1ib2woXCJpdGVyYXRvclwiKSkpO3JldHVybiBTY29wZS53aXRoU2NvcGUoc2NvcGU9PntsZXQgbWV0aG9kSGFuZGxlPXNjb3BlLm1hbmFnZSh0aGlzLmdldFByb3AoaXRlcmFibGVIYW5kbGUsU3ltYm9sSXRlcmF0b3IpKSxpdGVyYXRvckNhbGxSZXN1bHQ9dGhpcy5jYWxsRnVuY3Rpb24obWV0aG9kSGFuZGxlLGl0ZXJhYmxlSGFuZGxlKTtyZXR1cm4gaXRlcmF0b3JDYWxsUmVzdWx0LmVycm9yP2l0ZXJhdG9yQ2FsbFJlc3VsdDp0aGlzLnN1Y2Nlc3MobmV3IFF1aWNrSlNJdGVyYXRvcihpdGVyYXRvckNhbGxSZXN1bHQudmFsdWUsdGhpcykpfSl9c2V0UHJvcChoYW5kbGUsa2V5LHZhbHVlKXt0aGlzLnJ1bnRpbWUuYXNzZXJ0T3duZWQoaGFuZGxlKSx0aGlzLmJvcnJvd1Byb3BlcnR5S2V5KGtleSkuY29uc3VtZShxdWlja0pTS2V5PT50aGlzLmZmaS5RVFNfU2V0UHJvcCh0aGlzLmN0eC52YWx1ZSxoYW5kbGUudmFsdWUscXVpY2tKU0tleS52YWx1ZSx2YWx1ZS52YWx1ZSkpO31kZWZpbmVQcm9wKGhhbmRsZSxrZXksZGVzY3JpcHRvcil7dGhpcy5ydW50aW1lLmFzc2VydE93bmVkKGhhbmRsZSksU2NvcGUud2l0aFNjb3BlKHNjb3BlPT57bGV0IHF1aWNrSlNLZXk9c2NvcGUubWFuYWdlKHRoaXMuYm9ycm93UHJvcGVydHlLZXkoa2V5KSksdmFsdWU9ZGVzY3JpcHRvci52YWx1ZXx8dGhpcy51bmRlZmluZWQsY29uZmlndXJhYmxlPSEhZGVzY3JpcHRvci5jb25maWd1cmFibGUsZW51bWVyYWJsZT0hIWRlc2NyaXB0b3IuZW51bWVyYWJsZSxoYXNWYWx1ZT0hIWRlc2NyaXB0b3IudmFsdWUsZ2V0PWRlc2NyaXB0b3IuZ2V0P3Njb3BlLm1hbmFnZSh0aGlzLm5ld0Z1bmN0aW9uKGRlc2NyaXB0b3IuZ2V0Lm5hbWUsZGVzY3JpcHRvci5nZXQpKTp0aGlzLnVuZGVmaW5lZCxzZXQ9ZGVzY3JpcHRvci5zZXQ/c2NvcGUubWFuYWdlKHRoaXMubmV3RnVuY3Rpb24oZGVzY3JpcHRvci5zZXQubmFtZSxkZXNjcmlwdG9yLnNldCkpOnRoaXMudW5kZWZpbmVkO3RoaXMuZmZpLlFUU19EZWZpbmVQcm9wKHRoaXMuY3R4LnZhbHVlLGhhbmRsZS52YWx1ZSxxdWlja0pTS2V5LnZhbHVlLHZhbHVlLnZhbHVlLGdldC52YWx1ZSxzZXQudmFsdWUsY29uZmlndXJhYmxlLGVudW1lcmFibGUsaGFzVmFsdWUpO30pO31jYWxsRnVuY3Rpb24oZnVuYyx0aGlzVmFsLC4uLnJlc3RBcmdzKXt0aGlzLnJ1bnRpbWUuYXNzZXJ0T3duZWQoZnVuYyk7bGV0IGFyZ3MsZmlyc3RBcmc9cmVzdEFyZ3NbMF07Zmlyc3RBcmc9PT12b2lkIDB8fEFycmF5LmlzQXJyYXkoZmlyc3RBcmcpP2FyZ3M9Zmlyc3RBcmc/P1tdOmFyZ3M9cmVzdEFyZ3M7bGV0IHJlc3VsdFB0cj10aGlzLm1lbW9yeS50b1BvaW50ZXJBcnJheShhcmdzKS5jb25zdW1lKGFyZ3NBcnJheVB0cj0+dGhpcy5mZmkuUVRTX0NhbGwodGhpcy5jdHgudmFsdWUsZnVuYy52YWx1ZSx0aGlzVmFsLnZhbHVlLGFyZ3MubGVuZ3RoLGFyZ3NBcnJheVB0ci52YWx1ZSkpLGVycm9yUHRyPXRoaXMuZmZpLlFUU19SZXNvbHZlRXhjZXB0aW9uKHRoaXMuY3R4LnZhbHVlLHJlc3VsdFB0cik7cmV0dXJuIGVycm9yUHRyPyh0aGlzLmZmaS5RVFNfRnJlZVZhbHVlUG9pbnRlcih0aGlzLmN0eC52YWx1ZSxyZXN1bHRQdHIpLHRoaXMuZmFpbCh0aGlzLm1lbW9yeS5oZWFwVmFsdWVIYW5kbGUoZXJyb3JQdHIpKSk6dGhpcy5zdWNjZXNzKHRoaXMubWVtb3J5LmhlYXBWYWx1ZUhhbmRsZShyZXN1bHRQdHIpKX1jYWxsTWV0aG9kKHRoaXNIYW5kbGUsa2V5LGFyZ3M9W10pe3JldHVybiB0aGlzLmdldFByb3AodGhpc0hhbmRsZSxrZXkpLmNvbnN1bWUoZnVuYz0+dGhpcy5jYWxsRnVuY3Rpb24oZnVuYyx0aGlzSGFuZGxlLGFyZ3MpKX1ldmFsQ29kZShjb2RlLGZpbGVuYW1lPVwiZXZhbC5qc1wiLG9wdGlvbnMpe2xldCBkZXRlY3RNb2R1bGU9b3B0aW9ucz09PXZvaWQgMD8xOjAsZmxhZ3M9ZXZhbE9wdGlvbnNUb0ZsYWdzKG9wdGlvbnMpLHJlc3VsdFB0cj10aGlzLm1lbW9yeS5uZXdIZWFwQ2hhclBvaW50ZXIoY29kZSkuY29uc3VtZShjaGFySGFuZGxlPT50aGlzLmZmaS5RVFNfRXZhbCh0aGlzLmN0eC52YWx1ZSxjaGFySGFuZGxlLnZhbHVlLnB0cixjaGFySGFuZGxlLnZhbHVlLnN0cmxlbixmaWxlbmFtZSxkZXRlY3RNb2R1bGUsZmxhZ3MpKSxlcnJvclB0cj10aGlzLmZmaS5RVFNfUmVzb2x2ZUV4Y2VwdGlvbih0aGlzLmN0eC52YWx1ZSxyZXN1bHRQdHIpO3JldHVybiBlcnJvclB0cj8odGhpcy5mZmkuUVRTX0ZyZWVWYWx1ZVBvaW50ZXIodGhpcy5jdHgudmFsdWUscmVzdWx0UHRyKSx0aGlzLmZhaWwodGhpcy5tZW1vcnkuaGVhcFZhbHVlSGFuZGxlKGVycm9yUHRyKSkpOnRoaXMuc3VjY2Vzcyh0aGlzLm1lbW9yeS5oZWFwVmFsdWVIYW5kbGUocmVzdWx0UHRyKSl9dGhyb3coZXJyb3Ipe3JldHVybiB0aGlzLmVycm9yVG9IYW5kbGUoZXJyb3IpLmNvbnN1bWUoaGFuZGxlPT50aGlzLmZmaS5RVFNfVGhyb3codGhpcy5jdHgudmFsdWUsaGFuZGxlLnZhbHVlKSl9Ym9ycm93UHJvcGVydHlLZXkoa2V5KXtyZXR1cm4gdHlwZW9mIGtleT09XCJudW1iZXJcIj90aGlzLm5ld051bWJlcihrZXkpOnR5cGVvZiBrZXk9PVwic3RyaW5nXCI/dGhpcy5uZXdTdHJpbmcoa2V5KTpuZXcgU3RhdGljTGlmZXRpbWUoa2V5LnZhbHVlLHRoaXMucnVudGltZSl9Z2V0TWVtb3J5KHJ0KXtpZihydD09PXRoaXMucnQudmFsdWUpcmV0dXJuIHRoaXMubWVtb3J5O3Rocm93IG5ldyBFcnJvcihcIlByaXZhdGUgQVBJLiBDYW5ub3QgZ2V0IG1lbW9yeSBmcm9tIGEgZGlmZmVyZW50IHJ1bnRpbWVcIil9ZHVtcChoYW5kbGUpe3RoaXMucnVudGltZS5hc3NlcnRPd25lZChoYW5kbGUpO2xldCB0eXBlPXRoaXMudHlwZW9mKGhhbmRsZSk7aWYodHlwZT09PVwic3RyaW5nXCIpcmV0dXJuIHRoaXMuZ2V0U3RyaW5nKGhhbmRsZSk7aWYodHlwZT09PVwibnVtYmVyXCIpcmV0dXJuIHRoaXMuZ2V0TnVtYmVyKGhhbmRsZSk7aWYodHlwZT09PVwiYmlnaW50XCIpcmV0dXJuIHRoaXMuZ2V0QmlnSW50KGhhbmRsZSk7aWYodHlwZT09PVwidW5kZWZpbmVkXCIpcmV0dXJuO2lmKHR5cGU9PT1cInN5bWJvbFwiKXJldHVybiB0aGlzLmdldFN5bWJvbChoYW5kbGUpO2xldCBhc1Byb21pc2VTdGF0ZT10aGlzLmdldFByb21pc2VTdGF0ZShoYW5kbGUpO2lmKGFzUHJvbWlzZVN0YXRlLnR5cGU9PT1cImZ1bGZpbGxlZFwiJiYhYXNQcm9taXNlU3RhdGUubm90QVByb21pc2UpcmV0dXJuIGhhbmRsZS5kaXNwb3NlKCkse3R5cGU6YXNQcm9taXNlU3RhdGUudHlwZSx2YWx1ZTphc1Byb21pc2VTdGF0ZS52YWx1ZS5jb25zdW1lKHRoaXMuZHVtcCl9O2lmKGFzUHJvbWlzZVN0YXRlLnR5cGU9PT1cInBlbmRpbmdcIilyZXR1cm4gaGFuZGxlLmRpc3Bvc2UoKSx7dHlwZTphc1Byb21pc2VTdGF0ZS50eXBlfTtpZihhc1Byb21pc2VTdGF0ZS50eXBlPT09XCJyZWplY3RlZFwiKXJldHVybiBoYW5kbGUuZGlzcG9zZSgpLHt0eXBlOmFzUHJvbWlzZVN0YXRlLnR5cGUsZXJyb3I6YXNQcm9taXNlU3RhdGUuZXJyb3IuY29uc3VtZSh0aGlzLmR1bXApfTtsZXQgc3RyPXRoaXMubWVtb3J5LmNvbnN1bWVKU0NoYXJQb2ludGVyKHRoaXMuZmZpLlFUU19EdW1wKHRoaXMuY3R4LnZhbHVlLGhhbmRsZS52YWx1ZSkpO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShzdHIpfWNhdGNoe3JldHVybiBzdHJ9fXVud3JhcFJlc3VsdChyZXN1bHQpe2lmKHJlc3VsdC5lcnJvcil7bGV0IGNvbnRleHQ9XCJjb250ZXh0XCJpbiByZXN1bHQuZXJyb3I/cmVzdWx0LmVycm9yLmNvbnRleHQ6dGhpcyxjYXVzZT1yZXN1bHQuZXJyb3IuY29uc3VtZShlcnJvcj0+dGhpcy5kdW1wKGVycm9yKSk7aWYoY2F1c2UmJnR5cGVvZiBjYXVzZT09XCJvYmplY3RcIiYmdHlwZW9mIGNhdXNlLm1lc3NhZ2U9PVwic3RyaW5nXCIpe2xldHttZXNzYWdlLG5hbWUsc3RhY2ssLi4ucmVzdH09Y2F1c2UsZXhjZXB0aW9uPW5ldyBRdWlja0pTVW53cmFwRXJyb3IoY2F1c2UsY29udGV4dCk7dHlwZW9mIG5hbWU9PVwic3RyaW5nXCImJihleGNlcHRpb24ubmFtZT1jYXVzZS5uYW1lKSxleGNlcHRpb24ubWVzc2FnZT1tZXNzYWdlO2xldCBob3N0U3RhY2s9ZXhjZXB0aW9uLnN0YWNrO3Rocm93IHR5cGVvZiBzdGFjaz09XCJzdHJpbmdcIiYmKGV4Y2VwdGlvbi5zdGFjaz1gJHtuYW1lfTogJHttZXNzYWdlfVxuJHtjYXVzZS5zdGFja31Ib3N0OiAke2hvc3RTdGFja31gKSxPYmplY3QuYXNzaWduKGV4Y2VwdGlvbixyZXN0KSxleGNlcHRpb259dGhyb3cgbmV3IFF1aWNrSlNVbndyYXBFcnJvcihjYXVzZSl9cmV0dXJuIHJlc3VsdC52YWx1ZX1bU3ltYm9sLmZvcihcIm5vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tXCIpXSgpe3JldHVybiB0aGlzLmFsaXZlP2Ake3RoaXMuY29uc3RydWN0b3IubmFtZX0geyBjdHg6ICR7dGhpcy5jdHgudmFsdWV9IHJ0OiAke3RoaXMucnQudmFsdWV9IH1gOmAke3RoaXMuY29uc3RydWN0b3IubmFtZX0geyBkaXNwb3NlZCB9YH1nZXRGdW5jdGlvbihmbl9pZCl7bGV0IG1hcF9pZD1mbl9pZD4+OCxmbk1hcD10aGlzLmZuTWFwcy5nZXQobWFwX2lkKTtpZihmbk1hcClyZXR1cm4gZm5NYXAuZ2V0KGZuX2lkKX1zZXRGdW5jdGlvbihmbl9pZCxoYW5kbGUpe2xldCBtYXBfaWQ9Zm5faWQ+PjgsZm5NYXA9dGhpcy5mbk1hcHMuZ2V0KG1hcF9pZCk7cmV0dXJuIGZuTWFwfHwoZm5NYXA9bmV3IE1hcCx0aGlzLmZuTWFwcy5zZXQobWFwX2lkLGZuTWFwKSksZm5NYXAuc2V0KGZuX2lkLGhhbmRsZSl9ZXJyb3JUb0hhbmRsZShlcnJvcil7cmV0dXJuIGVycm9yIGluc3RhbmNlb2YgTGlmZXRpbWU/ZXJyb3I6dGhpcy5uZXdFcnJvcihlcnJvcil9ZW5jb2RlQmluYXJ5SlNPTihoYW5kbGUpe2xldCBwdHI9dGhpcy5mZmkuUVRTX2Jqc29uX2VuY29kZSh0aGlzLmN0eC52YWx1ZSxoYW5kbGUudmFsdWUpO3JldHVybiB0aGlzLm1lbW9yeS5oZWFwVmFsdWVIYW5kbGUocHRyKX1kZWNvZGVCaW5hcnlKU09OKGhhbmRsZSl7bGV0IHB0cj10aGlzLmZmaS5RVFNfYmpzb25fZGVjb2RlKHRoaXMuY3R4LnZhbHVlLGhhbmRsZS52YWx1ZSk7cmV0dXJuIHRoaXMubWVtb3J5LmhlYXBWYWx1ZUhhbmRsZShwdHIpfXN1Y2Nlc3ModmFsdWUpe3JldHVybiBEaXNwb3NhYmxlUmVzdWx0LnN1Y2Nlc3ModmFsdWUpfWZhaWwoZXJyb3Ipe3JldHVybiBEaXNwb3NhYmxlUmVzdWx0LmZhaWwoZXJyb3IsZXJyb3IyPT50aGlzLnVud3JhcFJlc3VsdChlcnJvcjIpKX19O3ZhciBRdWlja0pTUnVudGltZT1jbGFzcyBleHRlbmRzIFVzaW5nRGlzcG9zYWJsZXtjb25zdHJ1Y3RvcihhcmdzKXtzdXBlcigpO3RoaXMuc2NvcGU9bmV3IFNjb3BlO3RoaXMuY29udGV4dE1hcD1uZXcgTWFwO3RoaXMuX2RlYnVnTW9kZT0hMTt0aGlzLmNUb0hvc3RDYWxsYmFja3M9e3Nob3VsZEludGVycnVwdDpydD0+e2lmKHJ0IT09dGhpcy5ydC52YWx1ZSl0aHJvdyBuZXcgRXJyb3IoXCJRdWlja0pTQ29udGV4dCBpbnN0YW5jZSByZWNlaXZlZCBDIC0+IEpTIGludGVycnVwdCB3aXRoIG1pc21hdGNoZWQgcnRcIik7bGV0IGZuPXRoaXMuaW50ZXJydXB0SGFuZGxlcjtpZighZm4pdGhyb3cgbmV3IEVycm9yKFwiUXVpY2tKU0NvbnRleHQgaGFkIG5vIGludGVycnVwdCBoYW5kbGVyXCIpO3JldHVybiBmbih0aGlzKT8xOjB9LGxvYWRNb2R1bGVTb3VyY2U6bWF5YmVBc3luY0ZuKHRoaXMsZnVuY3Rpb24qKGF3YWl0ZWQscnQsY3R4LG1vZHVsZU5hbWUpe2xldCBtb2R1bGVMb2FkZXI9dGhpcy5tb2R1bGVMb2FkZXI7aWYoIW1vZHVsZUxvYWRlcil0aHJvdyBuZXcgRXJyb3IoXCJSdW50aW1lIGhhcyBubyBtb2R1bGUgbG9hZGVyXCIpO2lmKHJ0IT09dGhpcy5ydC52YWx1ZSl0aHJvdyBuZXcgRXJyb3IoXCJSdW50aW1lIHBvaW50ZXIgbWlzbWF0Y2hcIik7bGV0IGNvbnRleHQ9dGhpcy5jb250ZXh0TWFwLmdldChjdHgpPz90aGlzLm5ld0NvbnRleHQoe2NvbnRleHRQb2ludGVyOmN0eH0pO3RyeXtsZXQgcmVzdWx0PXlpZWxkKmF3YWl0ZWQobW9kdWxlTG9hZGVyKG1vZHVsZU5hbWUsY29udGV4dCkpO2lmKHR5cGVvZiByZXN1bHQ9PVwib2JqZWN0XCImJlwiZXJyb3JcImluIHJlc3VsdCYmcmVzdWx0LmVycm9yKXRocm93IHRoaXMuZGVidWdMb2coXCJjVG9Ib3N0TG9hZE1vZHVsZTogbG9hZGVyIHJldHVybmVkIGVycm9yXCIscmVzdWx0LmVycm9yKSxyZXN1bHQuZXJyb3I7bGV0IG1vZHVsZVNvdXJjZT10eXBlb2YgcmVzdWx0PT1cInN0cmluZ1wiP3Jlc3VsdDpcInZhbHVlXCJpbiByZXN1bHQ/cmVzdWx0LnZhbHVlOnJlc3VsdDtyZXR1cm4gdGhpcy5tZW1vcnkubmV3SGVhcENoYXJQb2ludGVyKG1vZHVsZVNvdXJjZSkudmFsdWUucHRyfWNhdGNoKGVycm9yKXtyZXR1cm4gdGhpcy5kZWJ1Z0xvZyhcImNUb0hvc3RMb2FkTW9kdWxlOiBjYXVnaHQgZXJyb3JcIixlcnJvciksY29udGV4dC50aHJvdyhlcnJvciksMH19KSxub3JtYWxpemVNb2R1bGU6bWF5YmVBc3luY0ZuKHRoaXMsZnVuY3Rpb24qKGF3YWl0ZWQscnQsY3R4LGJhc2VNb2R1bGVOYW1lLG1vZHVsZU5hbWVSZXF1ZXN0KXtsZXQgbW9kdWxlTm9ybWFsaXplcj10aGlzLm1vZHVsZU5vcm1hbGl6ZXI7aWYoIW1vZHVsZU5vcm1hbGl6ZXIpdGhyb3cgbmV3IEVycm9yKFwiUnVudGltZSBoYXMgbm8gbW9kdWxlIG5vcm1hbGl6ZXJcIik7aWYocnQhPT10aGlzLnJ0LnZhbHVlKXRocm93IG5ldyBFcnJvcihcIlJ1bnRpbWUgcG9pbnRlciBtaXNtYXRjaFwiKTtsZXQgY29udGV4dD10aGlzLmNvbnRleHRNYXAuZ2V0KGN0eCk/P3RoaXMubmV3Q29udGV4dCh7Y29udGV4dFBvaW50ZXI6Y3R4fSk7dHJ5e2xldCByZXN1bHQ9eWllbGQqYXdhaXRlZChtb2R1bGVOb3JtYWxpemVyKGJhc2VNb2R1bGVOYW1lLG1vZHVsZU5hbWVSZXF1ZXN0LGNvbnRleHQpKTtpZih0eXBlb2YgcmVzdWx0PT1cIm9iamVjdFwiJiZcImVycm9yXCJpbiByZXN1bHQmJnJlc3VsdC5lcnJvcil0aHJvdyB0aGlzLmRlYnVnTG9nKFwiY1RvSG9zdE5vcm1hbGl6ZU1vZHVsZTogbm9ybWFsaXplciByZXR1cm5lZCBlcnJvclwiLHJlc3VsdC5lcnJvcikscmVzdWx0LmVycm9yO2xldCBuYW1lPXR5cGVvZiByZXN1bHQ9PVwic3RyaW5nXCI/cmVzdWx0OnJlc3VsdC52YWx1ZTtyZXR1cm4gY29udGV4dC5nZXRNZW1vcnkodGhpcy5ydC52YWx1ZSkubmV3SGVhcENoYXJQb2ludGVyKG5hbWUpLnZhbHVlLnB0cn1jYXRjaChlcnJvcil7cmV0dXJuIHRoaXMuZGVidWdMb2coXCJub3JtYWxpemVNb2R1bGU6IGNhdWdodCBlcnJvclwiLGVycm9yKSxjb250ZXh0LnRocm93KGVycm9yKSwwfX0pfTthcmdzLm93bmVkTGlmZXRpbWVzPy5mb3JFYWNoKGxpZmV0aW1lPT50aGlzLnNjb3BlLm1hbmFnZShsaWZldGltZSkpLHRoaXMubW9kdWxlPWFyZ3MubW9kdWxlLHRoaXMubWVtb3J5PW5ldyBNb2R1bGVNZW1vcnkodGhpcy5tb2R1bGUpLHRoaXMuZmZpPWFyZ3MuZmZpLHRoaXMucnQ9YXJncy5ydCx0aGlzLmNhbGxiYWNrcz1hcmdzLmNhbGxiYWNrcyx0aGlzLnNjb3BlLm1hbmFnZSh0aGlzLnJ0KSx0aGlzLmNhbGxiYWNrcy5zZXRSdW50aW1lQ2FsbGJhY2tzKHRoaXMucnQudmFsdWUsdGhpcy5jVG9Ib3N0Q2FsbGJhY2tzKSx0aGlzLmV4ZWN1dGVQZW5kaW5nSm9icz10aGlzLmV4ZWN1dGVQZW5kaW5nSm9icy5iaW5kKHRoaXMpLFFUU19ERUJVRyYmdGhpcy5zZXREZWJ1Z01vZGUoITApO31nZXQgYWxpdmUoKXtyZXR1cm4gdGhpcy5zY29wZS5hbGl2ZX1kaXNwb3NlKCl7cmV0dXJuIHRoaXMuc2NvcGUuZGlzcG9zZSgpfW5ld0NvbnRleHQob3B0aW9ucz17fSl7bGV0IGludHJpbnNpY3M9aW50cmluc2ljc1RvRmxhZ3Mob3B0aW9ucy5pbnRyaW5zaWNzKSxjdHg9bmV3IExpZmV0aW1lKG9wdGlvbnMuY29udGV4dFBvaW50ZXJ8fHRoaXMuZmZpLlFUU19OZXdDb250ZXh0KHRoaXMucnQudmFsdWUsaW50cmluc2ljcyksdm9pZCAwLGN0eF9wdHI9Pnt0aGlzLmNvbnRleHRNYXAuZGVsZXRlKGN0eF9wdHIpLHRoaXMuY2FsbGJhY2tzLmRlbGV0ZUNvbnRleHQoY3R4X3B0ciksdGhpcy5mZmkuUVRTX0ZyZWVDb250ZXh0KGN0eF9wdHIpO30pLGNvbnRleHQ9bmV3IFF1aWNrSlNDb250ZXh0KHttb2R1bGU6dGhpcy5tb2R1bGUsY3R4LGZmaTp0aGlzLmZmaSxydDp0aGlzLnJ0LG93bmVkTGlmZXRpbWVzOm9wdGlvbnMub3duZWRMaWZldGltZXMscnVudGltZTp0aGlzLGNhbGxiYWNrczp0aGlzLmNhbGxiYWNrc30pO3JldHVybiB0aGlzLmNvbnRleHRNYXAuc2V0KGN0eC52YWx1ZSxjb250ZXh0KSxjb250ZXh0fXNldE1vZHVsZUxvYWRlcihtb2R1bGVMb2FkZXIsbW9kdWxlTm9ybWFsaXplcil7dGhpcy5tb2R1bGVMb2FkZXI9bW9kdWxlTG9hZGVyLHRoaXMubW9kdWxlTm9ybWFsaXplcj1tb2R1bGVOb3JtYWxpemVyLHRoaXMuZmZpLlFUU19SdW50aW1lRW5hYmxlTW9kdWxlTG9hZGVyKHRoaXMucnQudmFsdWUsdGhpcy5tb2R1bGVOb3JtYWxpemVyPzE6MCk7fXJlbW92ZU1vZHVsZUxvYWRlcigpe3RoaXMubW9kdWxlTG9hZGVyPXZvaWQgMCx0aGlzLmZmaS5RVFNfUnVudGltZURpc2FibGVNb2R1bGVMb2FkZXIodGhpcy5ydC52YWx1ZSk7fWhhc1BlbmRpbmdKb2IoKXtyZXR1cm4gISF0aGlzLmZmaS5RVFNfSXNKb2JQZW5kaW5nKHRoaXMucnQudmFsdWUpfXNldEludGVycnVwdEhhbmRsZXIoY2Ipe2xldCBwcmV2SW50ZXJydXB0SGFuZGxlcj10aGlzLmludGVycnVwdEhhbmRsZXI7dGhpcy5pbnRlcnJ1cHRIYW5kbGVyPWNiLHByZXZJbnRlcnJ1cHRIYW5kbGVyfHx0aGlzLmZmaS5RVFNfUnVudGltZUVuYWJsZUludGVycnVwdEhhbmRsZXIodGhpcy5ydC52YWx1ZSk7fXJlbW92ZUludGVycnVwdEhhbmRsZXIoKXt0aGlzLmludGVycnVwdEhhbmRsZXImJih0aGlzLmZmaS5RVFNfUnVudGltZURpc2FibGVJbnRlcnJ1cHRIYW5kbGVyKHRoaXMucnQudmFsdWUpLHRoaXMuaW50ZXJydXB0SGFuZGxlcj12b2lkIDApO31leGVjdXRlUGVuZGluZ0pvYnMobWF4Sm9ic1RvRXhlY3V0ZT0tMSl7bGV0IGN0eFB0ck91dD10aGlzLm1lbW9yeS5uZXdNdXRhYmxlUG9pbnRlckFycmF5KDEpLHZhbHVlUHRyPXRoaXMuZmZpLlFUU19FeGVjdXRlUGVuZGluZ0pvYih0aGlzLnJ0LnZhbHVlLG1heEpvYnNUb0V4ZWN1dGU/Py0xLGN0eFB0ck91dC52YWx1ZS5wdHIpLGN0eFB0cj1jdHhQdHJPdXQudmFsdWUudHlwZWRBcnJheVswXTtpZihjdHhQdHJPdXQuZGlzcG9zZSgpLGN0eFB0cj09PTApcmV0dXJuIHRoaXMuZmZpLlFUU19GcmVlVmFsdWVQb2ludGVyUnVudGltZSh0aGlzLnJ0LnZhbHVlLHZhbHVlUHRyKSxEaXNwb3NhYmxlUmVzdWx0LnN1Y2Nlc3MoMCk7bGV0IGNvbnRleHQ9dGhpcy5jb250ZXh0TWFwLmdldChjdHhQdHIpPz90aGlzLm5ld0NvbnRleHQoe2NvbnRleHRQb2ludGVyOmN0eFB0cn0pLHJlc3VsdFZhbHVlPWNvbnRleHQuZ2V0TWVtb3J5KHRoaXMucnQudmFsdWUpLmhlYXBWYWx1ZUhhbmRsZSh2YWx1ZVB0cik7aWYoY29udGV4dC50eXBlb2YocmVzdWx0VmFsdWUpPT09XCJudW1iZXJcIil7bGV0IGV4ZWN1dGVkSm9icz1jb250ZXh0LmdldE51bWJlcihyZXN1bHRWYWx1ZSk7cmV0dXJuIHJlc3VsdFZhbHVlLmRpc3Bvc2UoKSxEaXNwb3NhYmxlUmVzdWx0LnN1Y2Nlc3MoZXhlY3V0ZWRKb2JzKX1lbHNlIHtsZXQgZXJyb3I9T2JqZWN0LmFzc2lnbihyZXN1bHRWYWx1ZSx7Y29udGV4dH0pO3JldHVybiBEaXNwb3NhYmxlUmVzdWx0LmZhaWwoZXJyb3IsZXJyb3IyPT5jb250ZXh0LnVud3JhcFJlc3VsdChlcnJvcjIpKX19c2V0TWVtb3J5TGltaXQobGltaXRCeXRlcyl7aWYobGltaXRCeXRlczwwJiZsaW1pdEJ5dGVzIT09LTEpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHNldCBtZW1vcnkgbGltaXQgdG8gbmVnYXRpdmUgbnVtYmVyLiBUbyB1bnNldCwgcGFzcyAtMVwiKTt0aGlzLmZmaS5RVFNfUnVudGltZVNldE1lbW9yeUxpbWl0KHRoaXMucnQudmFsdWUsbGltaXRCeXRlcyk7fWNvbXB1dGVNZW1vcnlVc2FnZSgpe2xldCBzZXJ2aWNlQ29udGV4dE1lbW9yeT10aGlzLmdldFN5c3RlbUNvbnRleHQoKS5nZXRNZW1vcnkodGhpcy5ydC52YWx1ZSk7cmV0dXJuIHNlcnZpY2VDb250ZXh0TWVtb3J5LmhlYXBWYWx1ZUhhbmRsZSh0aGlzLmZmaS5RVFNfUnVudGltZUNvbXB1dGVNZW1vcnlVc2FnZSh0aGlzLnJ0LnZhbHVlLHNlcnZpY2VDb250ZXh0TWVtb3J5LmN0eC52YWx1ZSkpfWR1bXBNZW1vcnlVc2FnZSgpe3JldHVybiB0aGlzLm1lbW9yeS5jb25zdW1lSGVhcENoYXJQb2ludGVyKHRoaXMuZmZpLlFUU19SdW50aW1lRHVtcE1lbW9yeVVzYWdlKHRoaXMucnQudmFsdWUpKX1zZXRNYXhTdGFja1NpemUoc3RhY2tTaXplKXtpZihzdGFja1NpemU8MCl0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc2V0IG1lbW9yeSBsaW1pdCB0byBuZWdhdGl2ZSBudW1iZXIuIFRvIHVuc2V0LCBwYXNzIDAuXCIpO3RoaXMuZmZpLlFUU19SdW50aW1lU2V0TWF4U3RhY2tTaXplKHRoaXMucnQudmFsdWUsc3RhY2tTaXplKTt9YXNzZXJ0T3duZWQoaGFuZGxlKXtpZihoYW5kbGUub3duZXImJmhhbmRsZS5vd25lci5ydCE9PXRoaXMucnQpdGhyb3cgbmV3IFF1aWNrSlNXcm9uZ093bmVyKGBIYW5kbGUgaXMgbm90IG93bmVkIGJ5IHRoaXMgcnVudGltZTogJHtoYW5kbGUub3duZXIucnQudmFsdWV9ICE9ICR7dGhpcy5ydC52YWx1ZX1gKX1zZXREZWJ1Z01vZGUoZW5hYmxlZCl7dGhpcy5fZGVidWdNb2RlPWVuYWJsZWQsdGhpcy5mZmkuREVCVUcmJnRoaXMucnQuYWxpdmUmJnRoaXMuZmZpLlFUU19TZXREZWJ1Z0xvZ0VuYWJsZWQodGhpcy5ydC52YWx1ZSxlbmFibGVkPzE6MCk7fWlzRGVidWdNb2RlKCl7cmV0dXJuIHRoaXMuX2RlYnVnTW9kZX1kZWJ1Z0xvZyguLi5tc2cpe3RoaXMuX2RlYnVnTW9kZSYmY29uc29sZS5sb2coXCJxdWlja2pzLWVtc2NyaXB0ZW46XCIsLi4ubXNnKTt9W1N5bWJvbC5mb3IoXCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbVwiKV0oKXtyZXR1cm4gdGhpcy5hbGl2ZT9gJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9IHsgcnQ6ICR7dGhpcy5ydC52YWx1ZX0gfWA6YCR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfSB7IGRpc3Bvc2VkIH1gfWdldFN5c3RlbUNvbnRleHQoKXtyZXR1cm4gdGhpcy5jb250ZXh0fHwodGhpcy5jb250ZXh0PXRoaXMuc2NvcGUubWFuYWdlKHRoaXMubmV3Q29udGV4dCgpKSksdGhpcy5jb250ZXh0fX07dmFyIFF1aWNrSlNFbXNjcmlwdGVuTW9kdWxlQ2FsbGJhY2tzPWNsYXNze2NvbnN0cnVjdG9yKGFyZ3Mpe3RoaXMuY2FsbEZ1bmN0aW9uPWFyZ3MuY2FsbEZ1bmN0aW9uLHRoaXMuc2hvdWxkSW50ZXJydXB0PWFyZ3Muc2hvdWxkSW50ZXJydXB0LHRoaXMubG9hZE1vZHVsZVNvdXJjZT1hcmdzLmxvYWRNb2R1bGVTb3VyY2UsdGhpcy5ub3JtYWxpemVNb2R1bGU9YXJncy5ub3JtYWxpemVNb2R1bGU7fX0sUXVpY2tKU01vZHVsZUNhbGxiYWNrcz1jbGFzc3tjb25zdHJ1Y3Rvcihtb2R1bGUpe3RoaXMuY29udGV4dENhbGxiYWNrcz1uZXcgTWFwO3RoaXMucnVudGltZUNhbGxiYWNrcz1uZXcgTWFwO3RoaXMuc3VzcGVuZGVkQ291bnQ9MDt0aGlzLmNUb0hvc3RDYWxsYmFja3M9bmV3IFF1aWNrSlNFbXNjcmlwdGVuTW9kdWxlQ2FsbGJhY2tzKHtjYWxsRnVuY3Rpb246KGFzeW5jaWZ5LGN0eCx0aGlzX3B0cixhcmdjLGFyZ3YsZm5faWQpPT50aGlzLmhhbmRsZUFzeW5jaWZ5KGFzeW5jaWZ5LCgpPT57dHJ5e2xldCB2bT10aGlzLmNvbnRleHRDYWxsYmFja3MuZ2V0KGN0eCk7aWYoIXZtKXRocm93IG5ldyBFcnJvcihgUXVpY2tKU0NvbnRleHQoY3R4ID0gJHtjdHh9KSBub3QgZm91bmQgZm9yIEMgZnVuY3Rpb24gY2FsbCBcIiR7Zm5faWR9XCJgKTtyZXR1cm4gdm0uY2FsbEZ1bmN0aW9uKGN0eCx0aGlzX3B0cixhcmdjLGFyZ3YsZm5faWQpfWNhdGNoKGVycm9yKXtyZXR1cm4gY29uc29sZS5lcnJvcihcIltDIHRvIGhvc3QgZXJyb3I6IHJldHVybmluZyBudWxsXVwiLGVycm9yKSwwfX0pLHNob3VsZEludGVycnVwdDooYXN5bmNpZnkscnQpPT50aGlzLmhhbmRsZUFzeW5jaWZ5KGFzeW5jaWZ5LCgpPT57dHJ5e2xldCB2bT10aGlzLnJ1bnRpbWVDYWxsYmFja3MuZ2V0KHJ0KTtpZighdm0pdGhyb3cgbmV3IEVycm9yKGBRdWlja0pTUnVudGltZShydCA9ICR7cnR9KSBub3QgZm91bmQgZm9yIEMgaW50ZXJydXB0YCk7cmV0dXJuIHZtLnNob3VsZEludGVycnVwdChydCl9Y2F0Y2goZXJyb3Ipe3JldHVybiBjb25zb2xlLmVycm9yKFwiW0MgdG8gaG9zdCBpbnRlcnJ1cHQ6IHJldHVybmluZyBlcnJvcl1cIixlcnJvciksMX19KSxsb2FkTW9kdWxlU291cmNlOihhc3luY2lmeSxydCxjdHgsbW9kdWxlTmFtZSk9PnRoaXMuaGFuZGxlQXN5bmNpZnkoYXN5bmNpZnksKCk9Pnt0cnl7bGV0IHJ1bnRpbWVDYWxsYmFja3M9dGhpcy5ydW50aW1lQ2FsbGJhY2tzLmdldChydCk7aWYoIXJ1bnRpbWVDYWxsYmFja3MpdGhyb3cgbmV3IEVycm9yKGBRdWlja0pTUnVudGltZShydCA9ICR7cnR9KSBub3QgZm91bmQgZm9yIEMgbW9kdWxlIGxvYWRlcmApO2xldCBsb2FkTW9kdWxlPXJ1bnRpbWVDYWxsYmFja3MubG9hZE1vZHVsZVNvdXJjZTtpZighbG9hZE1vZHVsZSl0aHJvdyBuZXcgRXJyb3IoYFF1aWNrSlNSdW50aW1lKHJ0ID0gJHtydH0pIGRvZXMgbm90IHN1cHBvcnQgbW9kdWxlIGxvYWRpbmdgKTtyZXR1cm4gbG9hZE1vZHVsZShydCxjdHgsbW9kdWxlTmFtZSl9Y2F0Y2goZXJyb3Ipe3JldHVybiBjb25zb2xlLmVycm9yKFwiW0MgdG8gaG9zdCBtb2R1bGUgbG9hZGVyIGVycm9yOiByZXR1cm5pbmcgbnVsbF1cIixlcnJvciksMH19KSxub3JtYWxpemVNb2R1bGU6KGFzeW5jaWZ5LHJ0LGN0eCxtb2R1bGVCYXNlTmFtZSxtb2R1bGVOYW1lKT0+dGhpcy5oYW5kbGVBc3luY2lmeShhc3luY2lmeSwoKT0+e3RyeXtsZXQgcnVudGltZUNhbGxiYWNrcz10aGlzLnJ1bnRpbWVDYWxsYmFja3MuZ2V0KHJ0KTtpZighcnVudGltZUNhbGxiYWNrcyl0aHJvdyBuZXcgRXJyb3IoYFF1aWNrSlNSdW50aW1lKHJ0ID0gJHtydH0pIG5vdCBmb3VuZCBmb3IgQyBtb2R1bGUgbG9hZGVyYCk7bGV0IG5vcm1hbGl6ZU1vZHVsZT1ydW50aW1lQ2FsbGJhY2tzLm5vcm1hbGl6ZU1vZHVsZTtpZighbm9ybWFsaXplTW9kdWxlKXRocm93IG5ldyBFcnJvcihgUXVpY2tKU1J1bnRpbWUocnQgPSAke3J0fSkgZG9lcyBub3Qgc3VwcG9ydCBtb2R1bGUgbG9hZGluZ2ApO3JldHVybiBub3JtYWxpemVNb2R1bGUocnQsY3R4LG1vZHVsZUJhc2VOYW1lLG1vZHVsZU5hbWUpfWNhdGNoKGVycm9yKXtyZXR1cm4gY29uc29sZS5lcnJvcihcIltDIHRvIGhvc3QgbW9kdWxlIGxvYWRlciBlcnJvcjogcmV0dXJuaW5nIG51bGxdXCIsZXJyb3IpLDB9fSl9KTt0aGlzLm1vZHVsZT1tb2R1bGUsdGhpcy5tb2R1bGUuY2FsbGJhY2tzPXRoaXMuY1RvSG9zdENhbGxiYWNrczt9c2V0UnVudGltZUNhbGxiYWNrcyhydCxjYWxsYmFja3Mpe3RoaXMucnVudGltZUNhbGxiYWNrcy5zZXQocnQsY2FsbGJhY2tzKTt9ZGVsZXRlUnVudGltZShydCl7dGhpcy5ydW50aW1lQ2FsbGJhY2tzLmRlbGV0ZShydCk7fXNldENvbnRleHRDYWxsYmFja3MoY3R4LGNhbGxiYWNrcyl7dGhpcy5jb250ZXh0Q2FsbGJhY2tzLnNldChjdHgsY2FsbGJhY2tzKTt9ZGVsZXRlQ29udGV4dChjdHgpe3RoaXMuY29udGV4dENhbGxiYWNrcy5kZWxldGUoY3R4KTt9aGFuZGxlQXN5bmNpZnkoYXN5bmNpZnksZm4pe2lmKGFzeW5jaWZ5KXJldHVybiBhc3luY2lmeS5oYW5kbGVTbGVlcChkb25lPT57dHJ5e2xldCByZXN1bHQ9Zm4oKTtpZighKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpKXtkZWJ1Z0xvZyhcImFzeW5jaWZ5LmhhbmRsZVNsZWVwOiBub3Qgc3VzcGVuZGluZzpcIixyZXN1bHQpLGRvbmUocmVzdWx0KTtyZXR1cm59aWYodGhpcy5zdXNwZW5kZWQpdGhyb3cgbmV3IFF1aWNrSlNBc3luY2lmeUVycm9yKGBBbHJlYWR5IHN1c3BlbmRlZCBhdDogJHt0aGlzLnN1c3BlbmRlZC5zdGFja31cbkF0dGVtcHRlZCB0byBzdXNwZW5kIGF0OmApO3RoaXMuc3VzcGVuZGVkPW5ldyBRdWlja0pTQXN5bmNpZnlTdXNwZW5kZWQoYCgke3RoaXMuc3VzcGVuZGVkQ291bnQrK30pYCksZGVidWdMb2coXCJhc3luY2lmeS5oYW5kbGVTbGVlcDogc3VzcGVuZGluZzpcIix0aGlzLnN1c3BlbmRlZCkscmVzdWx0LnRoZW4ocmVzb2x2ZWRSZXN1bHQ9Pnt0aGlzLnN1c3BlbmRlZD12b2lkIDAsZGVidWdMb2coXCJhc3luY2lmeS5oYW5kbGVTbGVlcDogcmVzb2x2ZWQ6XCIscmVzb2x2ZWRSZXN1bHQpLGRvbmUocmVzb2x2ZWRSZXN1bHQpO30sZXJyb3I9PntkZWJ1Z0xvZyhcImFzeW5jaWZ5LmhhbmRsZVNsZWVwOiByZWplY3RlZDpcIixlcnJvciksY29uc29sZS5lcnJvcihcIlF1aWNrSlM6IGNhbm5vdCBoYW5kbGUgZXJyb3IgaW4gc3VzcGVuZGVkIGZ1bmN0aW9uXCIsZXJyb3IpLHRoaXMuc3VzcGVuZGVkPXZvaWQgMDt9KTt9Y2F0Y2goZXJyb3Ipe3Rocm93IGRlYnVnTG9nKFwiYXN5bmNpZnkuaGFuZGxlU2xlZXA6IGVycm9yOlwiLGVycm9yKSx0aGlzLnN1c3BlbmRlZD12b2lkIDAsZXJyb3J9fSk7bGV0IHZhbHVlPWZuKCk7aWYodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKXRocm93IG5ldyBFcnJvcihcIlByb21pc2UgcmV0dXJuIHZhbHVlIG5vdCBzdXBwb3J0ZWQgaW4gbm9uLWFzeW5jaWZ5IGNvbnRleHQuXCIpO3JldHVybiB2YWx1ZX19O2Z1bmN0aW9uIGFwcGx5QmFzZVJ1bnRpbWVPcHRpb25zKHJ1bnRpbWUsb3B0aW9ucyl7b3B0aW9ucy5pbnRlcnJ1cHRIYW5kbGVyJiZydW50aW1lLnNldEludGVycnVwdEhhbmRsZXIob3B0aW9ucy5pbnRlcnJ1cHRIYW5kbGVyKSxvcHRpb25zLm1heFN0YWNrU2l6ZUJ5dGVzIT09dm9pZCAwJiZydW50aW1lLnNldE1heFN0YWNrU2l6ZShvcHRpb25zLm1heFN0YWNrU2l6ZUJ5dGVzKSxvcHRpb25zLm1lbW9yeUxpbWl0Qnl0ZXMhPT12b2lkIDAmJnJ1bnRpbWUuc2V0TWVtb3J5TGltaXQob3B0aW9ucy5tZW1vcnlMaW1pdEJ5dGVzKTt9ZnVuY3Rpb24gYXBwbHlNb2R1bGVFdmFsUnVudGltZU9wdGlvbnMocnVudGltZSxvcHRpb25zKXtvcHRpb25zLm1vZHVsZUxvYWRlciYmcnVudGltZS5zZXRNb2R1bGVMb2FkZXIob3B0aW9ucy5tb2R1bGVMb2FkZXIpLG9wdGlvbnMuc2hvdWxkSW50ZXJydXB0JiZydW50aW1lLnNldEludGVycnVwdEhhbmRsZXIob3B0aW9ucy5zaG91bGRJbnRlcnJ1cHQpLG9wdGlvbnMubWVtb3J5TGltaXRCeXRlcyE9PXZvaWQgMCYmcnVudGltZS5zZXRNZW1vcnlMaW1pdChvcHRpb25zLm1lbW9yeUxpbWl0Qnl0ZXMpLG9wdGlvbnMubWF4U3RhY2tTaXplQnl0ZXMhPT12b2lkIDAmJnJ1bnRpbWUuc2V0TWF4U3RhY2tTaXplKG9wdGlvbnMubWF4U3RhY2tTaXplQnl0ZXMpO312YXIgUXVpY2tKU1dBU01Nb2R1bGU9Y2xhc3N7Y29uc3RydWN0b3IobW9kdWxlLGZmaSl7dGhpcy5tb2R1bGU9bW9kdWxlLHRoaXMuZmZpPWZmaSx0aGlzLmNhbGxiYWNrcz1uZXcgUXVpY2tKU01vZHVsZUNhbGxiYWNrcyhtb2R1bGUpO31uZXdSdW50aW1lKG9wdGlvbnM9e30pe2xldCBydD1uZXcgTGlmZXRpbWUodGhpcy5mZmkuUVRTX05ld1J1bnRpbWUoKSx2b2lkIDAscnRfcHRyPT57dGhpcy5jYWxsYmFja3MuZGVsZXRlUnVudGltZShydF9wdHIpLHRoaXMuZmZpLlFUU19GcmVlUnVudGltZShydF9wdHIpO30pLHJ1bnRpbWU9bmV3IFF1aWNrSlNSdW50aW1lKHttb2R1bGU6dGhpcy5tb2R1bGUsY2FsbGJhY2tzOnRoaXMuY2FsbGJhY2tzLGZmaTp0aGlzLmZmaSxydH0pO3JldHVybiBhcHBseUJhc2VSdW50aW1lT3B0aW9ucyhydW50aW1lLG9wdGlvbnMpLG9wdGlvbnMubW9kdWxlTG9hZGVyJiZydW50aW1lLnNldE1vZHVsZUxvYWRlcihvcHRpb25zLm1vZHVsZUxvYWRlcikscnVudGltZX1uZXdDb250ZXh0KG9wdGlvbnM9e30pe2xldCBydW50aW1lPXRoaXMubmV3UnVudGltZSgpLGNvbnRleHQ9cnVudGltZS5uZXdDb250ZXh0KHsuLi5vcHRpb25zLG93bmVkTGlmZXRpbWVzOmNvbmNhdChydW50aW1lLG9wdGlvbnMub3duZWRMaWZldGltZXMpfSk7cmV0dXJuIHJ1bnRpbWUuY29udGV4dD1jb250ZXh0LGNvbnRleHR9ZXZhbENvZGUoY29kZSxvcHRpb25zPXt9KXtyZXR1cm4gU2NvcGUud2l0aFNjb3BlKHNjb3BlPT57bGV0IHZtPXNjb3BlLm1hbmFnZSh0aGlzLm5ld0NvbnRleHQoKSk7YXBwbHlNb2R1bGVFdmFsUnVudGltZU9wdGlvbnModm0ucnVudGltZSxvcHRpb25zKTtsZXQgcmVzdWx0PXZtLmV2YWxDb2RlKGNvZGUsXCJldmFsLmpzXCIpO2lmKG9wdGlvbnMubWVtb3J5TGltaXRCeXRlcyE9PXZvaWQgMCYmdm0ucnVudGltZS5zZXRNZW1vcnlMaW1pdCgtMSkscmVzdWx0LmVycm9yKXRocm93IHZtLmR1bXAoc2NvcGUubWFuYWdlKHJlc3VsdC5lcnJvcikpO3JldHVybiB2bS5kdW1wKHNjb3BlLm1hbmFnZShyZXN1bHQudmFsdWUpKX0pfWdldFdhc21NZW1vcnkoKXtsZXQgbWVtb3J5PXRoaXMubW9kdWxlLnF1aWNranNFbXNjcmlwdGVuSW5pdD8uKCgpPT57fSk/LmdldFdhc21NZW1vcnk/LigpO2lmKCFtZW1vcnkpdGhyb3cgbmV3IEVycm9yKFwiVmFyaWFudCBkb2VzIG5vdCBzdXBwb3J0IGdldHRpbmcgV2ViQXNzZW1ibHkuTWVtb3J5XCIpO3JldHVybiBtZW1vcnl9Z2V0RkZJKCl7cmV0dXJuIHRoaXMuZmZpfX07XG5cbnZhciBRdWlja0pTQXN5bmNDb250ZXh0PWNsYXNzIGV4dGVuZHMgUXVpY2tKU0NvbnRleHR7YXN5bmMgZXZhbENvZGVBc3luYyhjb2RlLGZpbGVuYW1lPVwiZXZhbC5qc1wiLG9wdGlvbnMpe2xldCBkZXRlY3RNb2R1bGU9b3B0aW9ucz09PXZvaWQgMD8xOjAsZmxhZ3M9ZXZhbE9wdGlvbnNUb0ZsYWdzKG9wdGlvbnMpLHJlc3VsdFB0cj0wO3RyeXtyZXN1bHRQdHI9YXdhaXQgdGhpcy5tZW1vcnkubmV3SGVhcENoYXJQb2ludGVyKGNvZGUpLmNvbnN1bWUoY2hhckhhbmRsZT0+dGhpcy5mZmkuUVRTX0V2YWxfTWF5YmVBc3luYyh0aGlzLmN0eC52YWx1ZSxjaGFySGFuZGxlLnZhbHVlLnB0cixjaGFySGFuZGxlLnZhbHVlLnN0cmxlbixmaWxlbmFtZSxkZXRlY3RNb2R1bGUsZmxhZ3MpKTt9Y2F0Y2goZXJyb3Ipe3Rocm93IHRoaXMucnVudGltZS5kZWJ1Z0xvZyhcIlFUU19FdmFsX01heWJlQXN5bmMgdGhyZXdcIixlcnJvciksZXJyb3J9bGV0IGVycm9yUHRyPXRoaXMuZmZpLlFUU19SZXNvbHZlRXhjZXB0aW9uKHRoaXMuY3R4LnZhbHVlLHJlc3VsdFB0cik7cmV0dXJuIGVycm9yUHRyPyh0aGlzLmZmaS5RVFNfRnJlZVZhbHVlUG9pbnRlcih0aGlzLmN0eC52YWx1ZSxyZXN1bHRQdHIpLHRoaXMuZmFpbCh0aGlzLm1lbW9yeS5oZWFwVmFsdWVIYW5kbGUoZXJyb3JQdHIpKSk6dGhpcy5zdWNjZXNzKHRoaXMubWVtb3J5LmhlYXBWYWx1ZUhhbmRsZShyZXN1bHRQdHIpKX1uZXdBc3luY2lmaWVkRnVuY3Rpb24obmFtZSxmbil7cmV0dXJuIHRoaXMubmV3RnVuY3Rpb24obmFtZSxmbil9fTt2YXIgUXVpY2tKU0FzeW5jUnVudGltZT1jbGFzcyBleHRlbmRzIFF1aWNrSlNSdW50aW1le2NvbnN0cnVjdG9yKGFyZ3Mpe3N1cGVyKGFyZ3MpO31uZXdDb250ZXh0KG9wdGlvbnM9e30pe2xldCBpbnRyaW5zaWNzPWludHJpbnNpY3NUb0ZsYWdzKG9wdGlvbnMuaW50cmluc2ljcyksY3R4PW5ldyBMaWZldGltZSh0aGlzLmZmaS5RVFNfTmV3Q29udGV4dCh0aGlzLnJ0LnZhbHVlLGludHJpbnNpY3MpLHZvaWQgMCxjdHhfcHRyPT57dGhpcy5jb250ZXh0TWFwLmRlbGV0ZShjdHhfcHRyKSx0aGlzLmNhbGxiYWNrcy5kZWxldGVDb250ZXh0KGN0eF9wdHIpLHRoaXMuZmZpLlFUU19GcmVlQ29udGV4dChjdHhfcHRyKTt9KSxjb250ZXh0PW5ldyBRdWlja0pTQXN5bmNDb250ZXh0KHttb2R1bGU6dGhpcy5tb2R1bGUsY3R4LGZmaTp0aGlzLmZmaSxydDp0aGlzLnJ0LG93bmVkTGlmZXRpbWVzOltdLHJ1bnRpbWU6dGhpcyxjYWxsYmFja3M6dGhpcy5jYWxsYmFja3N9KTtyZXR1cm4gdGhpcy5jb250ZXh0TWFwLnNldChjdHgudmFsdWUsY29udGV4dCksY29udGV4dH1zZXRNb2R1bGVMb2FkZXIobW9kdWxlTG9hZGVyLG1vZHVsZU5vcm1hbGl6ZXIpe3N1cGVyLnNldE1vZHVsZUxvYWRlcihtb2R1bGVMb2FkZXIsbW9kdWxlTm9ybWFsaXplcik7fXNldE1heFN0YWNrU2l6ZShzdGFja1NpemUpe3JldHVybiBzdXBlci5zZXRNYXhTdGFja1NpemUoc3RhY2tTaXplKX19O3ZhciBRdWlja0pTQXN5bmNXQVNNTW9kdWxlPWNsYXNzIGV4dGVuZHMgUXVpY2tKU1dBU01Nb2R1bGV7Y29uc3RydWN0b3IobW9kdWxlLGZmaSl7c3VwZXIobW9kdWxlLGZmaSk7dGhpcy5mZmk9ZmZpLHRoaXMubW9kdWxlPW1vZHVsZTt9bmV3UnVudGltZShvcHRpb25zPXt9KXtsZXQgcnQ9bmV3IExpZmV0aW1lKHRoaXMuZmZpLlFUU19OZXdSdW50aW1lKCksdm9pZCAwLHJ0X3B0cj0+e3RoaXMuY2FsbGJhY2tzLmRlbGV0ZVJ1bnRpbWUocnRfcHRyKSx0aGlzLmZmaS5RVFNfRnJlZVJ1bnRpbWUocnRfcHRyKTt9KSxydW50aW1lPW5ldyBRdWlja0pTQXN5bmNSdW50aW1lKHttb2R1bGU6dGhpcy5tb2R1bGUsZmZpOnRoaXMuZmZpLHJ0LGNhbGxiYWNrczp0aGlzLmNhbGxiYWNrc30pO3JldHVybiBhcHBseUJhc2VSdW50aW1lT3B0aW9ucyhydW50aW1lLG9wdGlvbnMpLG9wdGlvbnMubW9kdWxlTG9hZGVyJiZydW50aW1lLnNldE1vZHVsZUxvYWRlcihvcHRpb25zLm1vZHVsZUxvYWRlcikscnVudGltZX1uZXdDb250ZXh0KG9wdGlvbnM9e30pe2xldCBydW50aW1lPXRoaXMubmV3UnVudGltZSgpLGxpZmV0aW1lcz1vcHRpb25zLm93bmVkTGlmZXRpbWVzP29wdGlvbnMub3duZWRMaWZldGltZXMuY29uY2F0KFtydW50aW1lXSk6W3J1bnRpbWVdLGNvbnRleHQ9cnVudGltZS5uZXdDb250ZXh0KHsuLi5vcHRpb25zLG93bmVkTGlmZXRpbWVzOmxpZmV0aW1lc30pO3JldHVybiBydW50aW1lLmNvbnRleHQ9Y29udGV4dCxjb250ZXh0fWV2YWxDb2RlKCl7dGhyb3cgbmV3IFF1aWNrSlNOb3RJbXBsZW1lbnRlZChcIlF1aWNrSlNXQVNNTW9kdWxlQXN5bmNpZnkuZXZhbENvZGU6IHVzZSBldmFsQ29kZUFzeW5jIGluc3RlYWRcIil9ZXZhbENvZGVBc3luYyhjb2RlLG9wdGlvbnMpe3JldHVybiBTY29wZS53aXRoU2NvcGVBc3luYyhhc3luYyBzY29wZT0+e2xldCB2bT1zY29wZS5tYW5hZ2UodGhpcy5uZXdDb250ZXh0KCkpO2FwcGx5TW9kdWxlRXZhbFJ1bnRpbWVPcHRpb25zKHZtLnJ1bnRpbWUsb3B0aW9ucyk7bGV0IHJlc3VsdD1hd2FpdCB2bS5ldmFsQ29kZUFzeW5jKGNvZGUsXCJldmFsLmpzXCIpO2lmKG9wdGlvbnMubWVtb3J5TGltaXRCeXRlcyE9PXZvaWQgMCYmdm0ucnVudGltZS5zZXRNZW1vcnlMaW1pdCgtMSkscmVzdWx0LmVycm9yKXRocm93IHZtLmR1bXAoc2NvcGUubWFuYWdlKHJlc3VsdC5lcnJvcikpO3JldHVybiB2bS5kdW1wKHNjb3BlLm1hbmFnZShyZXN1bHQudmFsdWUpKX0pfX07XG5cbmFzeW5jIGZ1bmN0aW9uIG5ld1F1aWNrSlNXQVNNTW9kdWxlRnJvbVZhcmlhbnQodmFyaWFudE9yUHJvbWlzZSl7bGV0IHZhcmlhbnQ9c21hcnRVbndyYXAoYXdhaXQgdmFyaWFudE9yUHJvbWlzZSksW3dhc21Nb2R1bGVMb2FkZXIsUXVpY2tKU0ZGSSx7UXVpY2tKU1dBU01Nb2R1bGU6UXVpY2tKU1dBU01Nb2R1bGUyfV09YXdhaXQgUHJvbWlzZS5hbGwoW3ZhcmlhbnQuaW1wb3J0TW9kdWxlTG9hZGVyKCkudGhlbihzbWFydFVud3JhcCksdmFyaWFudC5pbXBvcnRGRkkoKSxQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1vZHVsZTZGM0U1SDdZOyB9KS50aGVuKHNtYXJ0VW53cmFwKV0pLHdhc21Nb2R1bGU9YXdhaXQgd2FzbU1vZHVsZUxvYWRlcigpO3dhc21Nb2R1bGUudHlwZT1cInN5bmNcIjtsZXQgZmZpPW5ldyBRdWlja0pTRkZJKHdhc21Nb2R1bGUpO3JldHVybiBuZXcgUXVpY2tKU1dBU01Nb2R1bGUyKHdhc21Nb2R1bGUsZmZpKX1hc3luYyBmdW5jdGlvbiBuZXdRdWlja0pTQXN5bmNXQVNNTW9kdWxlRnJvbVZhcmlhbnQodmFyaWFudE9yUHJvbWlzZSl7bGV0IHZhcmlhbnQ9c21hcnRVbndyYXAoYXdhaXQgdmFyaWFudE9yUHJvbWlzZSksW3dhc21Nb2R1bGVMb2FkZXIsUXVpY2tKU0FzeW5jRkZJLHtRdWlja0pTQXN5bmNXQVNNTW9kdWxlOlF1aWNrSlNBc3luY1dBU01Nb2R1bGUyfV09YXdhaXQgUHJvbWlzZS5hbGwoW3ZhcmlhbnQuaW1wb3J0TW9kdWxlTG9hZGVyKCkudGhlbihzbWFydFVud3JhcCksdmFyaWFudC5pbXBvcnRGRkkoKSxQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1vZHVsZUFzeW5jaWZ5UjZQV0o2WlY7IH0pLnRoZW4oc21hcnRVbndyYXApXSksd2FzbU1vZHVsZT1hd2FpdCB3YXNtTW9kdWxlTG9hZGVyKCk7d2FzbU1vZHVsZS50eXBlPVwiYXN5bmNcIjtsZXQgZmZpPW5ldyBRdWlja0pTQXN5bmNGRkkod2FzbU1vZHVsZSk7cmV0dXJuIG5ldyBRdWlja0pTQXN5bmNXQVNNTW9kdWxlMih3YXNtTW9kdWxlLGZmaSl9ZnVuY3Rpb24gbWVtb2l6ZVByb21pc2VGYWN0b3J5KGZuKXtsZXQgcHJvbWlzZTtyZXR1cm4gKCk9PnByb21pc2U/Pyhwcm9taXNlPWZuKCkpfWZ1bmN0aW9uIHNtYXJ0VW53cmFwKHZhbCl7cmV0dXJuIHZhbCYmXCJkZWZhdWx0XCJpbiB2YWwmJnZhbC5kZWZhdWx0P3ZhbC5kZWZhdWx0JiZcImRlZmF1bHRcImluIHZhbC5kZWZhdWx0JiZ2YWwuZGVmYXVsdC5kZWZhdWx0P3ZhbC5kZWZhdWx0LmRlZmF1bHQ6dmFsLmRlZmF1bHQ6dmFsfWZ1bmN0aW9uIG5ld1ZhcmlhbnQoYmFzZVZhcmlhbnQsb3B0aW9ucyl7cmV0dXJuIHsuLi5iYXNlVmFyaWFudCxhc3luYyBpbXBvcnRNb2R1bGVMb2FkZXIoKXtsZXQgbW9kdWxlTG9hZGVyPXNtYXJ0VW53cmFwKGF3YWl0IGJhc2VWYXJpYW50LmltcG9ydE1vZHVsZUxvYWRlcigpKTtyZXR1cm4gYXN5bmMgZnVuY3Rpb24oKXtsZXQgbW9kdWxlTG9hZGVyQXJnPW9wdGlvbnMuZW1zY3JpcHRlbk1vZHVsZT97Li4ub3B0aW9ucy5lbXNjcmlwdGVuTW9kdWxlfTp7fSxsb2c9b3B0aW9ucy5sb2c/PygoLi4uYXJncyk9PmRlYnVnTG9nKFwibmV3VmFyaWFudCBtb2R1bGVMb2FkZXI6XCIsLi4uYXJncykpLHRhcFZhbHVlPShtZXNzYWdlLHZhbCk9Pihsb2coLi4ubWVzc2FnZSx2YWwpLHZhbCksZm9yY2U9dmFsPT50eXBlb2YgdmFsPT1cImZ1bmN0aW9uXCI/dmFsKCk6dmFsOyhvcHRpb25zLndhc21Mb2NhdGlvbnx8b3B0aW9ucy53YXNtU291cmNlTWFwTG9jYXRpb258fG9wdGlvbnMubG9jYXRlRmlsZSkmJihtb2R1bGVMb2FkZXJBcmcubG9jYXRlRmlsZT0oZmlsZU5hbWUscmVsYXRpdmVUbyk9PntsZXQgYXJncz17ZmlsZU5hbWUscmVsYXRpdmVUb307aWYoZmlsZU5hbWUuZW5kc1dpdGgoXCIud2FzbVwiKSYmb3B0aW9ucy53YXNtTG9jYXRpb24hPT12b2lkIDApcmV0dXJuIHRhcFZhbHVlKFtcImxvY2F0ZUZpbGUgLndhc206IHByb3ZpZGUgd2FzbUxvY2F0aW9uXCIsYXJnc10sb3B0aW9ucy53YXNtTG9jYXRpb24pO2lmKGZpbGVOYW1lLmVuZHNXaXRoKFwiLm1hcFwiKSl7aWYob3B0aW9ucy53YXNtU291cmNlTWFwTG9jYXRpb24hPT12b2lkIDApcmV0dXJuIHRhcFZhbHVlKFtcImxvY2F0ZUZpbGUgLm1hcDogcHJvdmlkZSB3YXNtU291cmNlTWFwTG9jYXRpb25cIixhcmdzXSxvcHRpb25zLndhc21Tb3VyY2VNYXBMb2NhdGlvbik7aWYob3B0aW9ucy53YXNtTG9jYXRpb24mJiFvcHRpb25zLmxvY2F0ZUZpbGUpcmV0dXJuIHRhcFZhbHVlKFtcImxvY2F0ZUZpbGUgLm1hcDogaW5mZXIgZnJvbSB3YXNtTG9jYXRpb25cIixhcmdzXSxvcHRpb25zLndhc21Mb2NhdGlvbitcIi5tYXBcIil9cmV0dXJuIG9wdGlvbnMubG9jYXRlRmlsZT90YXBWYWx1ZShbXCJsb2NhdGVGaWxlOiB1c2UgcHJvdmlkZWQgZm5cIixhcmdzXSxvcHRpb25zLmxvY2F0ZUZpbGUoZmlsZU5hbWUscmVsYXRpdmVUbykpOnRhcFZhbHVlKFtcImxvY2F0ZUZpbGU6IHVuaGFuZGxlZCwgcGFzc3Rocm91Z2hcIixhcmdzXSxmaWxlTmFtZSl9KSxvcHRpb25zLndhc21CaW5hcnkmJihtb2R1bGVMb2FkZXJBcmcud2FzbUJpbmFyeT1hd2FpdCBmb3JjZShvcHRpb25zLndhc21CaW5hcnkpKSxvcHRpb25zLndhc21NZW1vcnkmJihtb2R1bGVMb2FkZXJBcmcud2FzbU1lbW9yeT1hd2FpdCBmb3JjZShvcHRpb25zLndhc21NZW1vcnkpKTtsZXQgb3B0aW9uc1dhc21Nb2R1bGU9b3B0aW9ucy53YXNtTW9kdWxlLG1vZHVsZVByb21pc2U7b3B0aW9uc1dhc21Nb2R1bGUmJihtb2R1bGVMb2FkZXJBcmcuaW5zdGFudGlhdGVXYXNtPWFzeW5jKGltcG9ydHMsb25TdWNjZXNzKT0+e21vZHVsZVByb21pc2U/Pyhtb2R1bGVQcm9taXNlPVByb21pc2UucmVzb2x2ZShmb3JjZShvcHRpb25zV2FzbU1vZHVsZSkpKTtsZXQgd2FzbU1vZHVsZT1hd2FpdCBtb2R1bGVQcm9taXNlO2lmKCF3YXNtTW9kdWxlKXRocm93IG5ldyBRdWlja0pTRW1zY3JpcHRlbk1vZHVsZUVycm9yKGBvcHRpb25zLndhc21Nb2R1bGUgcmV0dXJuZWQgJHtTdHJpbmcod2FzbU1vZHVsZSl9YCk7bGV0IGluc3RhbmNlPWF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKHdhc21Nb2R1bGUsaW1wb3J0cyk7cmV0dXJuIG9uU3VjY2VzcyhpbnN0YW5jZSksaW5zdGFuY2UuZXhwb3J0c30pLG1vZHVsZUxvYWRlckFyZy5tb25pdG9yUnVuRGVwZW5kZW5jaWVzPWxlZnQ9Pntsb2coXCJtb25pdG9yUnVuRGVwZW5kZW5jaWVzOlwiLGxlZnQpO30sbW9kdWxlTG9hZGVyQXJnLnF1aWNranNFbXNjcmlwdGVuSW5pdD0oKT0+bmV3TW9ja0V4dGVuc2lvbnMobG9nKTtsZXQgcmVzdWx0UHJvbWlzZT1tb2R1bGVMb2FkZXIobW9kdWxlTG9hZGVyQXJnKSxleHRlbnNpb25zPW1vZHVsZUxvYWRlckFyZy5xdWlja2pzRW1zY3JpcHRlbkluaXQ/Lihsb2cpO2lmKG9wdGlvbnNXYXNtTW9kdWxlJiZleHRlbnNpb25zPy5yZWNlaXZlV2FzbU9mZnNldENvbnZlcnRlciYmIWV4dGVuc2lvbnMuZXhpc3RpbmdXYXNtT2Zmc2V0Q29udmVydGVyKXtsZXQgd2FzbUJpbmFyeT1hd2FpdCBmb3JjZShvcHRpb25zLndhc21CaW5hcnkpPz9uZXcgQXJyYXlCdWZmZXIoMCk7bW9kdWxlUHJvbWlzZT8/KG1vZHVsZVByb21pc2U9UHJvbWlzZS5yZXNvbHZlKGZvcmNlKG9wdGlvbnNXYXNtTW9kdWxlKSkpO2xldCB3YXNtTW9kdWxlPWF3YWl0IG1vZHVsZVByb21pc2U7aWYoIXdhc21Nb2R1bGUpdGhyb3cgbmV3IFF1aWNrSlNFbXNjcmlwdGVuTW9kdWxlRXJyb3IoYG9wdGlvbnMud2FzbU1vZHVsZSByZXR1cm5lZCAke1N0cmluZyh3YXNtTW9kdWxlKX1gKTtleHRlbnNpb25zLnJlY2VpdmVXYXNtT2Zmc2V0Q29udmVydGVyKHdhc21CaW5hcnksd2FzbU1vZHVsZSk7fWlmKGV4dGVuc2lvbnM/LnJlY2VpdmVTb3VyY2VNYXBKU09OKXtsZXQgbG9hZGVkU291cmNlTWFwRGF0YT1hd2FpdCBmb3JjZShvcHRpb25zLndhc21Tb3VyY2VNYXBEYXRhKTt0eXBlb2YgbG9hZGVkU291cmNlTWFwRGF0YT09XCJzdHJpbmdcIj9leHRlbnNpb25zLnJlY2VpdmVTb3VyY2VNYXBKU09OKEpTT04ucGFyc2UobG9hZGVkU291cmNlTWFwRGF0YSkpOmxvYWRlZFNvdXJjZU1hcERhdGE/ZXh0ZW5zaW9ucy5yZWNlaXZlU291cmNlTWFwSlNPTihsb2FkZWRTb3VyY2VNYXBEYXRhKTpleHRlbnNpb25zLnJlY2VpdmVTb3VyY2VNYXBKU09OKHt2ZXJzaW9uOjMsbmFtZXM6W10sc291cmNlczpbXSxtYXBwaW5nczpcIlwifSk7fXJldHVybiByZXN1bHRQcm9taXNlfX19fWZ1bmN0aW9uIG5ld01vY2tFeHRlbnNpb25zKGxvZyl7bGV0IG1vY2tNZXNzYWdlPVwibW9jayBjYWxsZWQsIGVtc2NyaXB0ZW4gbW9kdWxlIG1heSBub3QgYmUgaW5pdGlhbGl6ZWQgeWV0XCI7cmV0dXJuIHttb2NrOiEwLHJlbW92ZVJ1bkRlcGVuZGVuY3kobmFtZSl7bG9nKGAke21vY2tNZXNzYWdlfTogcmVtb3ZlUnVuRGVwZW5kZW5jeSBjYWxsZWQ6YCxuYW1lKTt9LHJlY2VpdmVTb3VyY2VNYXBKU09OKGRhdGEpe2xvZyhgJHttb2NrTWVzc2FnZX06IHJlY2VpdmVTb3VyY2VNYXBKU09OIGNhbGxlZDpgLGRhdGEpO30sV2FzbU9mZnNldENvbnZlcnRlcjp2b2lkIDAscmVjZWl2ZVdhc21PZmZzZXRDb252ZXJ0ZXIoYnl0ZXMsbW9kKXtsb2coYCR7bW9ja01lc3NhZ2V9OiByZWNlaXZlV2FzbU9mZnNldENvbnZlcnRlciBjYWxsZWQ6YCxieXRlcyxtb2QpO319fWZ1bmN0aW9uIGlzU3VjY2VzcyhzdWNjZXNzT3JGYWlsKXtyZXR1cm4gIShcImVycm9yXCJpbiBzdWNjZXNzT3JGYWlsKX1mdW5jdGlvbiBpc0ZhaWwoc3VjY2Vzc09yRmFpbCl7cmV0dXJuIFwiZXJyb3JcImluIHN1Y2Nlc3NPckZhaWx9ZnVuY3Rpb24gc2hvdWxkSW50ZXJydXB0QWZ0ZXJEZWFkbGluZShkZWFkbGluZSl7bGV0IGRlYWRsaW5lQXNOdW1iZXI9dHlwZW9mIGRlYWRsaW5lPT1cIm51bWJlclwiP2RlYWRsaW5lOmRlYWRsaW5lLmdldFRpbWUoKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3coKT5kZWFkbGluZUFzTnVtYmVyfX12YXIgVGVzdFF1aWNrSlNXQVNNTW9kdWxlPWNsYXNze2NvbnN0cnVjdG9yKHBhcmVudCl7dGhpcy5wYXJlbnQ9cGFyZW50O3RoaXMuY29udGV4dHM9bmV3IFNldDt0aGlzLnJ1bnRpbWVzPW5ldyBTZXQ7fW5ld1J1bnRpbWUob3B0aW9ucyl7bGV0IHJ1bnRpbWU9dGhpcy5wYXJlbnQubmV3UnVudGltZSh7Li4ub3B0aW9ucyxvd25lZExpZmV0aW1lczpbbmV3IExpZmV0aW1lKHZvaWQgMCx2b2lkIDAsKCk9PnRoaXMucnVudGltZXMuZGVsZXRlKHJ1bnRpbWUpKSwuLi5vcHRpb25zPy5vd25lZExpZmV0aW1lcz8/W11dfSk7cmV0dXJuIHRoaXMucnVudGltZXMuYWRkKHJ1bnRpbWUpLHJ1bnRpbWV9bmV3Q29udGV4dChvcHRpb25zKXtsZXQgY29udGV4dD10aGlzLnBhcmVudC5uZXdDb250ZXh0KHsuLi5vcHRpb25zLG93bmVkTGlmZXRpbWVzOltuZXcgTGlmZXRpbWUodm9pZCAwLHZvaWQgMCwoKT0+dGhpcy5jb250ZXh0cy5kZWxldGUoY29udGV4dCkpLC4uLm9wdGlvbnM/Lm93bmVkTGlmZXRpbWVzPz9bXV19KTtyZXR1cm4gdGhpcy5jb250ZXh0cy5hZGQoY29udGV4dCksY29udGV4dH1ldmFsQ29kZShjb2RlLG9wdGlvbnMpe3JldHVybiB0aGlzLnBhcmVudC5ldmFsQ29kZShjb2RlLG9wdGlvbnMpfWRpc3Bvc2VBbGwoKXtsZXQgYWxsRGlzcG9zYWJsZXM9Wy4uLnRoaXMuY29udGV4dHMsLi4udGhpcy5ydW50aW1lc107dGhpcy5ydW50aW1lcy5jbGVhcigpLHRoaXMuY29udGV4dHMuY2xlYXIoKSxhbGxEaXNwb3NhYmxlcy5mb3JFYWNoKGQ9PntkLmFsaXZlJiZkLmRpc3Bvc2UoKTt9KTt9YXNzZXJ0Tm9NZW1vcnlBbGxvY2F0ZWQoKXtpZih0aGlzLmdldEZGSSgpLlFUU19SZWNvdmVyYWJsZUxlYWtDaGVjaygpKXRocm93IG5ldyBRdWlja0pTTWVtb3J5TGVha0RldGVjdGVkKFwiTGVhayBzYW5pdGl6ZXIgZGV0ZWN0ZWQgdW4tZnJlZWQgbWVtb3J5XCIpO2lmKHRoaXMuY29udGV4dHMuc2l6ZT4wKXRocm93IG5ldyBRdWlja0pTTWVtb3J5TGVha0RldGVjdGVkKGAke3RoaXMuY29udGV4dHMuc2l6ZX0gY29udGV4dHMgbGVha2VkYCk7aWYodGhpcy5ydW50aW1lcy5zaXplPjApdGhyb3cgbmV3IFF1aWNrSlNNZW1vcnlMZWFrRGV0ZWN0ZWQoYCR7dGhpcy5ydW50aW1lcy5zaXplfSBydW50aW1lcyBsZWFrZWRgKX1nZXRXYXNtTWVtb3J5KCl7cmV0dXJuIHRoaXMucGFyZW50LmdldFdhc21NZW1vcnkoKX1nZXRGRkkoKXtyZXR1cm4gdGhpcy5wYXJlbnQuZ2V0RkZJKCl9fTtcblxudmFyIG1vZHVsZTZGM0U1SDdZID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuXHRfX3Byb3RvX186IG51bGwsXG5cdFF1aWNrSlNNb2R1bGVDYWxsYmFja3M6IFF1aWNrSlNNb2R1bGVDYWxsYmFja3MsXG5cdFF1aWNrSlNXQVNNTW9kdWxlOiBRdWlja0pTV0FTTU1vZHVsZSxcblx0YXBwbHlCYXNlUnVudGltZU9wdGlvbnM6IGFwcGx5QmFzZVJ1bnRpbWVPcHRpb25zLFxuXHRhcHBseU1vZHVsZUV2YWxSdW50aW1lT3B0aW9uczogYXBwbHlNb2R1bGVFdmFsUnVudGltZU9wdGlvbnNcbn0pO1xuXG52YXIgbW9kdWxlQXN5bmNpZnlSNlBXSjZaViA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcblx0X19wcm90b19fOiBudWxsLFxuXHRRdWlja0pTQXN5bmNXQVNNTW9kdWxlOiBRdWlja0pTQXN5bmNXQVNNTW9kdWxlXG59KTtcblxuZXhwb3J0IHsgRGVmYXVsdEludHJpbnNpY3MsIERpc3Bvc2FibGVGYWlsLCBEaXNwb3NhYmxlUmVzdWx0LCBEaXNwb3NhYmxlU3VjY2VzcywgRXZhbEZsYWdzLCBHZXRPd25Qcm9wZXJ0eU5hbWVzRmxhZ3MsIEludHJpbnNpY3NGbGFncywgSXNFcXVhbE9wLCBKU1Byb21pc2VTdGF0ZUVudW0sIExpZmV0aW1lLCBRdWlja0pTQXN5bmNDb250ZXh0LCBRdWlja0pTQXN5bmNSdW50aW1lLCBRdWlja0pTQXN5bmNXQVNNTW9kdWxlLCBRdWlja0pTQ29udGV4dCwgUXVpY2tKU0RlZmVycmVkUHJvbWlzZSwgUXVpY2tKU1J1bnRpbWUsIFF1aWNrSlNXQVNNTW9kdWxlLCBTY29wZSwgU3RhdGljTGlmZXRpbWUsIFRlc3RRdWlja0pTV0FTTU1vZHVsZSwgVXNpbmdEaXNwb3NhYmxlLCBXZWFrTGlmZXRpbWUsIGNyZWF0ZURpc3Bvc2FibGVBcnJheSwgZGVidWdMb2csIGVycm9yc19leHBvcnRzIGFzIGVycm9ycywgaXNGYWlsLCBpc1N1Y2Nlc3MsIG1lbW9pemVQcm9taXNlRmFjdG9yeSwgbmV3UXVpY2tKU0FzeW5jV0FTTU1vZHVsZUZyb21WYXJpYW50LCBuZXdRdWlja0pTV0FTTU1vZHVsZUZyb21WYXJpYW50LCBuZXdWYXJpYW50LCBzZXREZWJ1Z01vZGUsIHNob3VsZEludGVycnVwdEFmdGVyRGVhZGxpbmUgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/.pnpm/@hashbrownai+core@0.3.0/node_modules/@hashbrownai/core/index.esm4.js\n"));

/***/ })

}]);